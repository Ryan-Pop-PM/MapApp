/*
 * wallaby-core - v1.0.1620
 * https://wallabyjs.com
 * Copyright (c) 2014-2024 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of wallaby-core and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
!function o(i,s,a){var l="function"==typeof require&&require;module.exports=function n(r,e){if(!s[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(l)return l(r,!0);throw(e=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",e}t=s[r]={exports:{}},i[r][0].call(t.exports,function(e){var t=i[r][1][e];return n(t||e)},t,t.exports,o,i,s,a)}return s[r].exports}(a[0])}({1:[function(n,e,t){const o="{".charCodeAt(0),i=" ".charCodeAt(0),s="with",a="assert";e.exports=function(e){const{tokTypes:l,TokenType:t}=e.acorn||n("acorn");return class extends e{constructor(...e){super(...e),this.withToken=new t(s),this.assertToken=new t(a)}_codeAt(e){return this.input.charCodeAt(e)}_eat(e){this.type!==e&&this.unexpected(),this.next()}_collectionName(e){return e===this.assertToken?"assertions":"attributes"}readToken(e){let t=0,n=this.withToken,r=s;for(;t<s.length;t++)if(this._codeAt(this.pos+t)!==s.charCodeAt(t)){n=void 0,r=void 0;break}if(!n)for(n=this.assertToken,r=a,t=0;t<a.length;t++)if(this._codeAt(this.pos+t)!==a.charCodeAt(t))return super.readToken(e);for(;this._codeAt(this.pos+t)!==o;t++)if(this._codeAt(this.pos+t)!==i)return super.readToken(e);return"{"===this.type.label?super.readToken(e):(this.pos+=r.length,this.finishToken(n))}parseDynamicImport(e){var t;return this.next(),e.source=this.parseMaybeAssign(),this.eat(l.comma)&&(t=this.parseExpression(),e.arguments=[t]),this._eat(l.parenR),this.finishNode(e,"ImportExpression")}parseExport(e,t){var n,r,o;if(this.next(),this.eat(l.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==l.string&&this.unexpected(),e.source=this.parseExprAtom(),(this.type===this.withToken||this.type===this.assertToken||this.type===l._with)&&(r=this._collectionName(this.type),this.next(),n=this.parseImportAttributes())&&(e[r]=n),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(l._default))return this.checkExport(t,"default",this.lastTokStart),this.type===l._function||(o=this.isAsyncFunction())?(r=this.startNode(),this.next(),o&&this.next(),e.declaration=this.parseFunction(r,5,!1,o)):this.type===l._class?(n=this.startNode(),e.declaration=this.parseClass(n,"nullableID")):(e.declaration=this.parseMaybeAssign(),this.semicolon()),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==l.string&&this.unexpected(),e.source=this.parseExprAtom(),(this.type===this.withToken||this.type===this.assertToken||this.type===l._with)&&(r=this._collectionName(this.type),this.next(),o=this.parseImportAttributes())&&(e[r]=o);else{for(var i=0,s=e.specifiers;i<s.length;i+=1){var a=s[i];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")}parseImport(e){var t,n;return this.next(),this.type===l.string?(e.specifiers=[],e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===l.string?this.parseExprAtom():this.unexpected()),(this.type===this.withToken||this.type===this.assertToken||this.type==l._with)&&(t=this._collectionName(this.type),this.next(),n=this.parseImportAttributes())&&(e[t]=n),this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportAttributes(){this._eat(l.braceL);var e=this.parsewithEntries();return this._eat(l.braceR),e}parsewithEntries(){var t=[],n=new Set;do{if(this.type===l.braceR)break;var r=this.startNode();let e;e=this.type===l.string?this.parseLiteral(this.value):this.parseIdent(!0),this.next(),r.key=e,n.has(r.key.name)&&this.raise(this.pos,"Duplicated key in attributes"),n.add(r.key.name),this.type!==l.string&&this.raise(this.pos,"Only string is supported as an attribute value"),r.value=this.parseLiteral(this.value),t.push(this.finishNode(r,"ImportAttribute"))}while(this.eat(l.comma));return t}}}},{acorn:void 0}],2:[function(e,t,n){"use strict";const i=e("acorn").tokTypes,r=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,s=e=>{r.lastIndex=e.pos;var t=r.exec(e.input),t=e.pos+t[0].length;return"."===e.input.slice(t,t+1)};t.exports=function(e){return class extends e{parseExprAtom(e){if(this.type!==i._import||!s(this))return super.parseExprAtom(e);this.options.allowImportExportEverywhere||this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'");e=this.startNode();return this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),e.meta=this.parseIdent(!0),this.expect(i.dot),e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is import.meta"),this.containsEsc&&this.raiseRecoverable(e.property.start,'"meta" in import.meta must not contain escape sequences'),this.finishNode(e,"MetaProperty")}parseStatement(e,t,n){var r,o;return this.type===i._import&&s(this)?(r=this.startNode(),o=this.parseExpression(),this.parseExpressionStatement(r,o)):super.parseStatement(e,t,n)}}}},{acorn:void 0}],3:[function(t,e,n){e.exports=function(e){const n=(e.acorn||t("acorn")).tokTypes;return class extends e{readToken_pipe_amp(e){let t=this.input.charCodeAt(this.pos+1);return t===e?61===(t=this.input.charCodeAt(this.pos+2))?this.finishOp(n.assign,3):this.finishOp(124===e?n.logicalOR:n.logicalAND,2):61===t?this.finishOp(n.assign,2):this.finishOp(124===e?n.bitwiseOR:n.bitwiseAND,1)}getTokenFromCode(e){return 63==e?this.readToken_question():super.getTokenFromCode(e)}readToken_question(){if(11<=this.options.ecmaVersion){var e=this.input.charCodeAt(this.pos+1);if(63===e&&61===this.input.charCodeAt(this.pos+2))return this.finishOp(n.assign,3)}return super.readToken_question?super.readToken_question():this.finishOp(n.question,1)}}}},{acorn:void 0}],4:[function(e,t,n){"use strict";const i=e("acorn");t.exports=function(e){return class extends e{readInt(n,e){if(null!=e)return super.readInt(n,e);let t=this.pos,r=0,o=!1;for(;;){let e=this.input.charCodeAt(this.pos),t;if(97<=e)t=e-97+10;else{if(95==e){o||this.raise(this.pos,"Invalid numeric separator"),++this.pos,o=!1;continue}t=65<=e?e-65+10:48<=e&&e<=57?e-48:1/0}if(t>=n)break;++this.pos,r=r*n+t,o=!0}return this.pos===t?null:(o||this.raise(this.pos-1,"Invalid numeric separator"),r)}readNumber(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");let n=2<=this.pos-t&&48===this.input.charCodeAt(t),r=!1,o=(n&&this.strict&&this.raise(t,"Invalid number"),this.input.charCodeAt(this.pos));if(!n&&!e&&11<=this.options.ecmaVersion&&110===o)return e=this.getNumberInput(t,this.pos),e="undefined"!=typeof BigInt?BigInt(e):null,++this.pos,i.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(i.tokTypes.num,e);n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1,r=!0),46!==o||n||(++this.pos,this.readInt(10),o=this.input.charCodeAt(this.pos)),69!==o&&101!==o||n||(43!==(o=this.input.charCodeAt(++this.pos))&&45!==o||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),i.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");e=this.getNumberInput(t,this.pos),(n||r)&&e.length<this.pos-t&&this.raise(t,"Invalid number"),t=n?parseInt(e,8):parseFloat(e);return this.finishToken(i.tokTypes.num,t)}parseLiteral(e){e=super.parseLiteral(e);return e.bigint&&(e.bigint=e.bigint.replace(/_/g,"")),e}readRadixNumber(e){var t=this.pos;this.pos+=2;let n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(e=this.getNumberInput(t,this.pos),n="undefined"!=typeof BigInt?BigInt(e):null,++this.pos):i.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(i.tokTypes.num,n)}getNumberInput(e,t){return this.input.slice(e,t).replace(/_/g,"")}}}},{acorn:void 0}],5:[function(e,t,n){"use strict";t.exports=function(e){return class extends e{isDirectiveCandidate(){return!1}strictDirective(){return!1}canDeclareLexicalName(){return!0}canDeclareVarName(){return!0}isSimpleParamList(){return!0}adaptDirectivePrologue(){}checkParams(){}checkPatternErrors(){}checkPatternExport(){}checkPropClash(){}checkVariableExport(){}checkYieldAwaitInDefaultParams(){}declareLexicalName(){}declareVarName(){}enterFunctionScope(){}enterLexicalScope(){}exitFunctionScope(){}exitLexicalScope(){}invalidStringToken(){}}}},{}],6:[function(e,t,n){"use strict";t.exports=function(e){return class extends e{parseMaybeUnary(){return this.isContextual("await")?this.parseAwait():super.parseMaybeUnary.apply(this,arguments)}}}},{}],7:[function(e,t,n){t.exports=function(e){return e.JSXExpressionContainer=e.ExpressionStatement,e.JSXSpreadChild=e.ExpressionStatement,e.JSXClosingFragment=e.Identifier,e.JSXEmptyExpression=e.Identifier,e.JSXIdentifier=e.Identifier,e.JSXOpeningFragment=e.Identifier,e.JSXText=e.Identifier,e.JSXSpreadAttribute=e.SpreadElement,e.JSXAttribute=(e,t,n)=>{n(e.name,t),e.value&&n(e.value,t)},e.JSXMemberExpression=(e,t,n)=>{n(e.object,t),n(e.property,t)},e.JSXNamespacedName=(e,t,n)=>{n(e.namespace,t),n(e.name,t)},e.JSXOpeningElement=(t,n,r)=>{r(t.name,n);for(let e=0;e<t.attributes.length;++e)r(t.attributes[e],n)},e.JSXClosingElement=(e,t,n)=>{n(e.name,t)},e.JSXElement=(t,n,r)=>{r(t.openingElement,n);for(let e=0;e<t.children.length;++e)r(t.children[e],n);t.closingElement&&r(t.closingElement,n)},e.JSXFragment=(t,n,r)=>{r(t.openingFragment,n);for(let e=0;e<t.children.length;++e)r(t.children[e],n);r(t.closingFragment,n)},e}},{}],8:[function(e,t,d){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.looksLikeEmail=void 0;const v=e("path"),x=e("os"),b=e("fs"),S=(d.looksLikeEmail=/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,63}$/,["January","February","March","April","May","June","July","August","September","October","November","December"]),o="wallabyjs@gmail.com";d.default={wallabyEmail:function(){return o},normalizePath:function(e){return"win32"===process.platform&&e?e.replace(/\\/g,"/"):e},parseKey:function(e){var t={},n=(e&&2===(n=e.split(":")).length&&(e=(n=n[1])&&n.replace(/^\s+|\s+$/gm,"")),Buffer.from(e,"base64").toString().split("\n")),e=(t.licenseeName=n[0],t.licenseTags=n[1],t.licenseTags.split(",")||[]);t.licenseeEmail=e[0],t.licensedProduct=e[1],t.multiUserKey=e[2],t.source=e[3],t.trial="1"===e[5],t.expirationDateString=n[2],t.licenseSignature=n[3],t.freeLicense=t.licenseeEmail===o;try{var r=t.expirationDateString.split("/");t.expirationDateStringFormatted=r[0]+" "+S[parseInt(r[1],10)-1]+" "+r[2]}catch(e){t.expirationDateStringFormatted=t.expirationDateString}return t.expirationTime=e[7]&&parseInt(e[7],10)||new Date(t.expirationDateString+" UTC").getTime(),t},format:function(r,o){return r.replace(/\{([0-9a-zA-Z_]+)\}/g,function(e,t,n){return"{"===r[n-1]&&"}"===r[n+e.length]?t:null==(n=o.hasOwnProperty(t)?o[t]:null)?"":n})},validPackageName:function(e){if(e&&!e.match(/^\./)&&!e.match(/^_/)&&!(214<e.length||e.toLowerCase()!==e||/[~'!()*]/.test(e.split("/").slice(-1)[0]))){if(encodeURIComponent(e)===e)return e;var t=e.match(/^(?:@([^/]+?)[/])?([^/]+?)$/);if(t){var n=t[1],t=t[2];if(encodeURIComponent(n)===n&&encodeURIComponent(t)===t)return e}}},withFreePort:function(t){var n=e("http").createServer();n.listen(0),n.on("listening",function(){var e=n.address().port;n.once("close",function(){t(e)}),n.close()}),process.nextTick(function(){})},checkPort:function(r){const o=e("net");return new Promise(e=>{const t=new o.Socket,n=setTimeout(()=>{e(0);try{t.destroy()}catch(e){}},500);t.once("connect",()=>{clearTimeout(n),e(0),t.end()}).once("error",()=>{clearTimeout(n),e(r)}).connect(r,"0.0.0.0")})},getLicenseDetails:function(){var e=v.join(x.homedir(),".wallaby"),t=v.join(e,"key.lic"),e=v.join(e,".ol"),n={state:"demoLicense",productType:"",registeredTo:"",expiryDate:"",email:"",daysUntilExpiry:"",isBundle:!1,upgradeUrl:"https://wallabyjs.com/purchase/?referrer=wsp#select-wallaby",purchaseUrl:"https://wallabyjs.com/purchase/?referrer=wsp#select-wallaby",renewUrl:"https://wallabyjs.com/purchase/?referrer=wsp#select-wallaby"};try{var r=JSON.parse(Buffer.from(b.readFileSync(e).toString(),"base64").toString());n.email=r.wallabyEmail||"",n.registeredTo=n.email,n.onlineLicense=!!r.wallabyEmail,n.onlineLicense&&n.registeredTo&&(n.state="activating")}catch(e){}try{var o=b.readFileSync(t).toString().split(":").reduce((e,t)=>t.trim());if(o.length<50){if(!n.onlineLicense)try{parseInt(o,10)+1314e6<+new Date&&(n.state="trialDemoOver")}catch(e){n.state="trialDemoOver"}}else{var i,s,a,l=Buffer.from(o,"base64").toString().split("\n"),[c,p,,,u,d]=l[1].split(","),h=(n.registeredTo=l[0],n.email=n.email||c,n.isBundle=!!~p.indexOf("Quokka.js"),!!~p.toLowerCase().indexOf("company")||!!~p.toLowerCase().indexOf("enterprise")),m=!!~p.indexOf("Open Source"),g="wallabyjs@gmail.com"===c||"1"===d,[f,_,y]=(n.productType=n.isBundle?"Wallaby.js + Quokka.js":"Wallaby.js",l[2].split("/"));n.expiryDate=f+" "+S[parseInt(_,10)-1]+", "+y;let e=!1;m?n.state="openSource":(i=new Date(Date.UTC(parseInt(y,10),parseInt(_,10)-1,parseInt(f,10))),s=new Date,a=Math.floor((i.getTime()-s.getTime())/864e5),n.daysUntilExpiry=a+" day"+(1===a?"":"s"),a<0?g?n.state="trialDemoOver":(n.state="expired",n.key=o,e=!0):a<=14?g?n.state="trialLicense":(n.state="expiring",n.key=o,e=!0):g?n.state="trialLicense":(n.state="activated",n.key=o,e=!0)),e&&!h&&(h?(n.purchaseUrl="https://wallabyjs.com/store/company/?referrer=wsp#select-wallaby",u?(n.upgradeUrl=`https://wallabyjs.com/store/personal/?renewalOrder=${u}&upgrade=1&referrer=wsp`,n.renewUrl=`https://wallabyjs.com/store/personal/?renewalOrder=${u}&referrer=wsp`):(n.upgradeUrl="https://wallabyjs.com/store/company/?referrer=wsp#select-wallaby",n.renewUrl="https://wallabyjs.com/store/company/?referrer=wsp#select-wallaby")):(n.upgradeUrl=`https://wallabyjs.com/store/personal/?renewalEmail=${encodeURIComponent(c)}&upgrade=1&referrer=wsp`,n.renewUrl=`https://wallabyjs.com/store/personal/?renewalEmail=${encodeURIComponent(c)}&referrer=wsp`))}}catch(e){}return n},saveLicenseDetails:function(t){var e=v.join(x.homedir(),".wallaby"),n=v.join(e,"key.lic"),e=v.join(e,".ol");let r;try{r=JSON.parse(Buffer.from(b.readFileSync(e).toString(),"base64").toString())}catch(e){r={}}let o="";try{o=b.readFileSync(n).toString()}catch(e){}if(d.looksLikeEmail.test(t)){try{r.wallabyEmail=t.trim(),r.lastUpdate=(new Date).getTime(),b.writeFileSync(e,Buffer.from(JSON.stringify(r)).toString("base64"))}catch(e){}return"emailLooksOk"}try{b.unlinkSync(e)}catch(e){}var e=e=>{try{var t=this.parseKey(e);if(t.licenseeName&&t.expirationDateString&&(~t.licensedProduct.indexOf("(Freedom)")||~t.licensedProduct.indexOf("(VS Code)")))return{licensee:t.licenseeName,freeLicense:t.freeLicense,isBundle:0===t.licensedProduct.indexOf("Wallaby.js + Quokka.js"),expiration:t.expirationDateStringFormatted||t.expirationDateString}}catch(e){}},t=t||"",i=!!e(o),e=e(t),s=!!e;let a=!1;if(!(s||!t&&i))return"keyDoesNotLookOk";try{b.writeFileSync(n,t);try{if(e.isBundle){var l=v.join(x.homedir(),".quokka"),c=v.join(l,".qlc"),p=(b.existsSync(l)||b.mkdirSync(l),b.writeFileSync(c,t),v.join(l,"config.json"));let e={};try{var u=b.readFileSync(p).toString();e=JSON.parse(u)}catch(e){}e.pro=!0,b.writeFileSync(p,JSON.stringify(e))}}catch(e){}a=s}catch(e){a=!1}return a?"keyLooksOk":"keyDoesNotLookOk"}}},{fs:void 0,http:void 0,net:void 0,os:void 0,path:void 0}],9:[function(e,t,n){global._=e("lodash"),global.Q=e("q"),global.EventEmitter=e("events").EventEmitter,Q.longStackSupport=!1,global.Promise||(global.Promise=Q.Promise),_.extend(_,e("./utils").default),_.str=e("underscore.string"),_.mixin(_.str.exports()),global.logger=global.logger||e("./logger"),_["_"+["ls","pq","61","0w","xp"].join("")]=["ls","pq","61","0w","xp"].join("")},{"./logger":11,"./utils":15,events:void 0,lodash:void 0,q:void 0,"underscore.string":void 0}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("acorn");const o=["AssignmentExpression","AssignmentPattern","ArrayExpression","ArrayPattern","ArrowFunctionExpression","AwaitExpression","BlockStatement","BinaryExpression","BreakStatement","CallExpression","CatchClause","ClassBody","ClassDeclaration","ClassExpression","ComprehensionBlock","ComprehensionExpression","ConditionalExpression","ContinueStatement","DoWhileStatement","DebuggerStatement","EmptyStatement","ExportBatchSpecifier","ExportDeclaration","ExportSpecifier","ExportNamedDeclaration","ExportDefaultDeclaration","ExportAllDeclaration","ExpressionStatement","FieldDefinition","ForOfStatement","ForStatement","ForInStatement","FunctionDeclaration","FunctionExpression","GeneratorExpression","Identifier","IfStatement","ImportBatchSpecifier","ImportDeclaration","ImportSpecifier","Literal","LabeledStatement","LogicalExpression","MemberExpression","MethodDefinition","ModuleDeclaration","NewExpression","ObjectExpression","ObjectPattern","Program","Property","ReturnStatement","SequenceExpression","SpreadElement","SwitchStatement","SwitchCase","Super","TaggedTemplateExpression","TemplateElement","TemplateLiteral","ThisExpression","ThrowStatement","TryStatement","UnaryExpression","UpdateExpression","VariableDeclaration","VariableDeclarator","WhileStatement","WithStatement","YieldExpression","JSXIdentifier","JSXNamespacedName","JSXMemberExpression","JSXElement","JSXOpeningElement","JSXClosingElement","JSXEmptyExpression","JSXExpressionContainer","JSXSpreadAttribute","JSXAttribute"],a=r.Parser.extend(t("./acornTolerancePlugin"),t("./acornTopLevelAwaitPlugin"),t("./acornLogicalAssignment"),t("./acornImportMetaPlugin"),t("./acornImportAttributesAssertionsPlugin"),t("./acornNumericSeparatorPlugin.js"),t("acorn-jsx")());var l=t("escodegen-wallaby"),c="Babel.objectSpread";function i(e){var t;return 0===e.indexOf("__REGEXP ")?(t=e.split("__REGEXP ")[1].match(/\/(.*)\/(.*)?/),new RegExp(t[1],t[2]||"")):e}class s{constructor(e){var a=this;if(this._autoLogHints={},this._loggedRanges={},this._liveCommentLines={},this._ignoreCoverageHints=[],this._testNames=[],this._ignoreCoverageHints.lastHintPosition=-1,this._ignoreFileCoverage=!1,this._captureConsoleLog=e.captureConsoleLog,this._logMarkers=e.recordValues?e.logMarkers:void 0,this._extractedComments=e.extractedComments,this._outstandingLogpointCount=0,this._extractedComments&&this._extractedComments.isCoverageIgnored&&(this._ignoreFileCoverage=!0),e.hints&&(this._extractedComments||this._ignoreFileCoverage||(e.hints.ignoreCoverage&&(this._ignoreCoverageRegExp=i(e.hints.ignoreCoverage)),e.hints.ignoreCoverageForFile&&(this._ignoreFileCoverageRegExp=i(e.hints.ignoreCoverageForFile))),e.recordValues&&e.hints.commentAutoLog&&(_.isString(e.hints.commentAutoLog)?this._autoLogHintExpPrefix=e.hints.commentAutoLog:(this._autoLogHintExpPrefix=e.hints.commentAutoLog.value,this._autoLogHintGlobalExp=e.hints.commentAutoLog.exp)),e.hints.logpointsNotAvailableExpression&&(this._logpointsNotAvailableExpression=e.hints.logpointsNotAvailableExpression),e.hints.testFileSelection)&&(e.hints.testFileSelection.include&&(this._includeTestFileRegExp=i(e.hints.testFileSelection.include)),e.hints.testFileSelection.exclude)&&(this._excludeTestFileRegExp=i(e.hints.testFileSelection.exclude)),this._opts=_.defaults(e||{},{}),this._opts.recordValues||(this._wrapExpressionStatementExpressionIntoVisitor=function(e){return e}),this._opts.test){let n=!1,r=this._opts.testFileChangeStart;if(this._logMarkers){let t=!1;for(let e=0;e<this._logMarkers.length;e++){var o=this._logMarkers[e];if(o.new&&o.range){if(this._opts.testFileChangeStart||t){n=!0;break}t=!0,r={line:o.range[0],column:o.range[1]}}}}n?this._containsChangePosition=function(){return!1}:a._containsChangePosition=r&&r.line?function(e){return e&&e.loc.start.line<=r.line&&e.loc.end.line>=r.line&&(r.line>e.loc.start.line||r.column>e.loc.start.column)&&(r.line<e.loc.end.line||r.column<e.loc.end.column)}:function(e){return e&&e.start<a._opts.testFileChangeStart&&e.end>a._opts.testFileChangeStart}}else this._containsChangePosition=function(){return!1};if(a._visitor=this._createVisitor(),a._opts.sequenceExpressionToDiff||(a._replaceSequenceWithDiff=()=>{}),a._opts.automaticTestFileSelection&&a._visitor.CallExpression.add(function(e){e.arguments&&e.arguments[0]&&"Literal"===e.arguments[0].type&&(e.callee&&"Identifier"===e.callee.type&&"fit"===e.callee.name&&2===e.arguments.length&&(a._includedTestFile=!0,a._hasIncludedTest=!0),e.callee&&"Identifier"===e.callee.type&&"fdescribe"===e.callee.name&&2===e.arguments.length||e.callee&&"MemberExpression"===e.callee.type&&e.callee.property&&"Identifier"===e.callee.property.type&&"only"===e.callee.property.name&&(2===e.arguments.length||3===e.arguments.length))&&(a._includedTestFile=!0,a._hasIncludedTest=!0)}),a._opts.recordMatchSnapshotRanges&&(a._matchSnapshotRanges=[],a._visitor.CallExpression.add(function(e){e.callee&&"MemberExpression"===e.callee.type&&e.callee.property&&"Identifier"===e.callee.property.type&&("toMatchSnapshot"===e.callee.property.name||"toThrowErrorMatchingSnapshot"===e.callee.property.name||"snapshot"===e.callee.property.name)&&(e.callee.object=a._sequence([{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"$_$tracer"},property:{type:"Identifier",name:"_beforeMatchSnapshot"}},arguments:[a._literal(a._opts.file),a._literal(a._matchSnapshotRanges.length)]},e.callee.object]),a._matchSnapshotRanges.push([e.loc.start.line,e.loc.start.column,e.loc.end.line,e.loc.end.column]))})),null!=(e=a._opts.snaps)&&e.enabled){const s=a._opts.vue,l=a._opts.svelte;a._snaps=[],a._snapScopes=new Map,a._lastSnap=void 0,a._visitor.BlockStatement.add(function(e,r){var o=a._lastSnap;if(!(o&&o.body.end>e.start)&&e.body&&1===e.body.length&&Array.isArray(r.parentNode)){o=e.body[0];if("BlockStatement"===o.type&&o.body){var t=!o.body.length;if(t||1<o.body.length||"BlockStatement"!==o.body[0].type){o=a._lastSnap={empty:t,body:e};if(a._snaps.push(o),s){let e=void 0,t=void 0,n=r.parentContext;for(;n;){var i=n.parentNode;if(!i)break;if(e){if("CallExpression"===i.type&&i.callee&&"Identifier"===i.callee.type&&"_defineComponent"===i.callee.name&&i.arguments&&1<=i.arguments.length&&"ObjectExpression"===i.arguments[0].type){t=i;break}}else"Property"===i.type&&i.method&&"init"===i.kind&&"Identifier"===i.key.type&&"setup"===i.key.name&&"FunctionExpression"===i.value.type&&i.value.params&&"BlockStatement"===i.value.body.type&&1<=i.value.params.length&&"__props"===i.value.params[0].name&&(e=i);n=n.parentContext}t&&e&&(o.scope="vue",a._snapScopes.set(o.scope,{source:e.value.body,call:a._vueSfcSetupFuncCall()}))}if(l){let e=void 0,t=r.parentContext;for(;t;){var n=t.parentNode;if(!n)break;if("FunctionDeclaration"===n.type&&n.id&&"Identifier"===n.id.type&&"instance"===n.id.name&&n.params&&3<=n.params.length&&"Identifier"===n.params[0].type&&"$$self"===n.params[0].name&&"Identifier"===n.params[1].type&&"$$props"===n.params[1].name&&"Identifier"===n.params[2].type&&"$$invalidate"===n.params[2].name){e=n;break}t=t.parentContext}e&&(o.scope="svelte",a._snapScopes.set(o.scope,{source:e.body,call:a._svelteInstanceFuncCall()}))}t=r.parentNode.indexOf(e),r=r.parentNode[t+1];if(r&&"ExpressionStatement"===r.type&&r.expression){e="TemplateLiteral"===r.expression.type,t="Literal"===r.expression.type&&"string"==typeof r.expression.value;if(e||t)if(o.output=r.expression,e&&l){e=r.expression.quasis;if(e&&1===e.length){const e=r.expression.quasis[0];e.loc&&e.loc.start&&e.loc.end?o.outputLines=e.loc.end.line-e.loc.start.line+1:o.outputContent=e.value.raw}}else o.outputContent=t?r.expression.value:void 0}}}}}),a._visitor.ExpressionStatement.add(function(e,t){a._lastSnap&&a._lastSnap.output===e.expression&&(t.hinted=!0)})}a._visitor.SequenceExpression.add(function(e,t){var n,r;e.expressions&&2===e.expressions.length&&([n,r]=e.expressions,n)&&r&&"Literal"===n.type&&0===n.value&&"MemberExpression"===r.type&&"Identifier"===(null==(n=r.object)?void 0:n.type)&&null!=(n=r.object)&&n.name&&r.object.name.startsWith("import_")&&"Identifier"===(null==(n=r.property)?void 0:n.type)&&"default"===(null==(n=r.property)?void 0:n.name)&&(e.expressions[1]={type:"SequenceExpression",expressions:[a._instruction(r,t),r]})}),a._visitor.IfStatement.add(function(e){e.consequent&&"BlockStatement"!==e.consequent.type&&(e.consequent=a._wrapInBlock([e.consequent])),e.alternate&&"BlockStatement"!==e.alternate.type&&"IfStatement"!==e.alternate.type&&(e.alternate=a._wrapInBlock([e.alternate]))}),a._visitor.add([this._visitor.DoWhileStatement,this._visitor.WhileStatement,this._visitor.IfStatement,this._visitor.ForStatement],function(e,t){e.test&&(e.test=a._instructionValueSequence([a._instruction(e.test,t,"TST"),e.test],t,void 0,1)),e.update&&(t=a._wrapIfMarkedForAutoLog(e.update,t))&&(e.update=t)}),a._visitor.add([this._visitor.ForOfStatement,this._visitor.ForInStatement],function(e,t){e.right&&(e.right=a._instructionValueSequence([a._instruction(e.right,t,"FR"),e.right],t))}),a._visitor.SwitchStatement.add(function(e,t){e.discriminant=a._instructionValueSequence([a._instruction(e.discriminant,t,"SWT"),e.discriminant],t)}),a._visitor.SwitchCase.add(function(e){e.consequent&&0<e.consequent.length&&(1!=e.consequent.length||"BlockStatement"!==e.consequent[0].type)&&(e.consequent=[a._wrapInBlock(e.consequent)])}),a._visitor.add([a._visitor.DoWhileStatement,a._visitor.ForInStatement,a._visitor.ForStatement,a._visitor.ForOfStatement,a._visitor.LabeledStatement,a._visitor.WhileStatement,a._visitor.WithStatement],function(e){e.body&&"BlockStatement"!==e.body.type&&("LabeledStatement"!==e.type||"DoWhileStatement"!==e.body.type&&"ForInStatement"!==e.body.type&&"ForStatement"!==e.body.type&&"WhileStatement"!==e.body.type)&&"ForOfStatement"!==e.body.type&&(e.body=a._wrapInBlock([e.body]))}),a._visitor.add([a._visitor.BreakStatement,a._visitor.ContinueStatement,a._visitor.ThrowStatement],function(e,t){t.parentNode&&("ForStatement"===t.parentNode.type||"ForInStatement"===t.parentNode.type||"ForOfStatement"===t.parentNode.type||"ExportDeclaration"===t.parentNode.type)||(e=[a._instructionStatement(e,t,"S"),e],t.replacement=a._wrapInBlock(e))}),a._visitor.VariableDeclaration.add(function(t,n){if((!n.parentNode||"ForStatement"!==n.parentNode.type&&"ForInStatement"!==n.parentNode.type&&"ForOfStatement"!==n.parentNode.type&&"ExportDeclaration"!==n.parentNode.type&&"ExportNamedDeclaration"!==n.parentNode.type)&&t.declarations&&t.declarations.length&&"VariableDeclarator"===t.declarations[0].type){var e,r=t.declarations[0],o=a._instruction(t,n,"S");a._isUndefinedInstruction(o)||(!r.init||"FunctionExpression"!==r.init.type&&"ArrowFunctionExpression"!==r.init.type&&"ClassExpression"!==r.init.type?r.init?(e=a._getNodesToCheckForAutoLogsInVariableDeclaration(t,r),r.init=a._instructionValueSequence([o,r.init],n,e)):"var"===t.kind?r.init={type:"LogicalExpression",operator:"||",left:o,right:{type:"Identifier",name:r.id.name}}:r.init=o:t.declarations.unshift({type:"VariableDeclarator",id:{type:"Identifier",name:"$_$wvd"+a._ranges.length},init:o}));for(let e=1;e<t.declarations.length;e++){var i,s=t.declarations[e];"VariableDeclarator"===s.type&&s.init&&"FunctionExpression"!==s.init.type&&"ArrowFunctionExpression"!==s.init.type&&"ClassExpression"!==s.init.type&&(i=a._getNodesToCheckForAutoLogsInVariableDeclaration(t,s),i=a._wrapIfMarkedForAutoLog(s.init,n,!1,i))&&(s.init=i)}}}),a._visitor.ExpressionStatement.add(function(e,t){a._replaceConsoleLog(e.expression,t);var n=[],r=e.expression;a._replaceSequenceWithDiff(e)&&n.push(r),e._systemJsRegisterCall||(e.expression&&"YieldExpression"===e.expression.type?((r=a._wrapIfMarkedForAutoLog(e.expression.argument,t,void 0,[e.expression,e]))&&(e.expression.argument=r),e.expression=a._sequence([a._instruction(e,t,"S"),e.expression])):((r=t.hinted?e.expression:a._wrapExpressionStatementExpressionIntoVisitor(e.expression,e))===e.expression&&n.push(e),e.expression=a._instructionValueSequence([a._instruction(e,t,"S"),r],t,n)))}),a._visitor.ReturnStatement.add(function(e,t){a._replaceConsoleLog(e.argument,t),e.argument=e.argument?a._instructionValueSequence([a._instruction(e,t,"R"),e.argument],t,[e],-(e.end-e.start-6)):a._instruction(e,t,"R")}),a._visitor.ConditionalExpression.add(function(e,t){a._replaceConsoleLog(e.consequent,t),e.consequent=a._instructionValueSequence([a._instruction(e.consequent,t,"CDC"),e.consequent],t),a._replaceConsoleLog(e.alternate,t),e.alternate=a._instructionValueSequence([a._instruction(e.alternate,t,"CDA"),e.alternate],t)}),a._visitor.LogicalExpression.add(function(e,t){e.left=a._instructionValueSequence([a._instruction(e.left,t,"LGL"),e.left],t),e.right=a._instructionValueSequence([a._instruction(e.right,t,"LGR"),e.right],t)}),a._visitor.Program.add(function(e,t){_.isEmpty(a._autoLogHints)&&(a._visitor.removeVisitorsAddedForAutoLogHintsOnly(),a._getFunctionParameterLogInstructions=()=>[],a._getNodesToCheckForAutoLogsInVariableDeclaration=()=>[]),e.body=e.body||[];var n=e.body[0],r=1===e.body.length&&a._isSystemJsModule(n),o=a._scopeStartVariableDeclaration("P",[a._delayedLiteral(()=>a._totalRanges)]);a._needsToStayFirst(n)?e.body.splice(0,1,a._firstNode(n),o):r&&r.length?(n._systemJsRegisterCall=!0,e.body.splice(1,0,o,a._instructionStatement(e.body[0],t,"S"))):e.body.unshift(o),e.body.push(a._instructionStatement(e,t,"PE"))}),a._visitor.add([a._visitor.FunctionDeclaration,a._visitor.FunctionExpression,a._visitor.ArrowFunctionExpression],function(e,t){e.id&&e.id.name&&("_getJestObj"!==e.id.name&&"_interopRequireDefault"!==e.id.name||(t.hinted=!0)),a._numberOfFunctions++,a._tryFindTestName(e,t),"ArrowFunctionExpression"===e.type&&e.expression&&(e.body=a._wrapInBlock([a._return(a._instructionValueSequence([a._instruction(e.body,t,"R"),e.body],t))]),e.expression=!1);var n=a._scopeStartVariableDeclaration("F"),r=a._getFunctionParameterLogInstructions(e,t),o=e.body.body[0],i=a._needsToStayFirst(o),s=a._isSuperCall(o);i?(e.body.body.splice(0,1,a._firstNode(o),n),e.body.body.splice(2,0,...r)):s?a._handleSuperCall(e.body.body,t,n,r):e.body.body.unshift(n,...r)}),a._visitor.ImportBatchSpecifier.add(function(e){e.type="ImportNamespaceSpecifier",e.id=e.name,delete e.name}),a._visitor.ImportSpecifier.add(function(e){e.default&&(e.type="ImportDefaultSpecifier")}),a._visitor.AssignmentPattern.add(function(e){"="===e.operator&&(e.type="AssignmentExpression")}),a._visitor.add([a._visitor.ExportNamedDeclaration,a._visitor.ExportDefaultDeclaration,a._visitor.ExportAllDeclaration,a._visitor.ImportDeclaration],function(){a._esm=!0}),a._visitor.CatchClause.addForAutoLogOnly(function(e,t){var n;e.body&&e.body.body&&e.param&&"Identifier"===e.param.type&&(n=a._getAutoLogHint(e)||a._getAutoLogHint(e.param))&&e.param.name&&e.body.body.unshift({type:"ExpressionStatement",expression:a._generateUndefinedAutoLogNode(e.param,t,n)})}),a._visitor.ObjectPattern.addForAutoLogOnly(function(e,t){e.properties.forEach(e=>{e.ignore=!0})}),a._visitor.Property.addForAutoLogOnly(function(e,t){var n;!e.ignore&&e.value&&"ObjectPattern"!==t.parentNode.type&&!e.method&&(n=[],!e.computed&&e.key&&"Identifier"===e.key.type&&n.push(e.key),t=a._wrapIfMarkedForAutoLog(e.value,t,!1,n))&&(e.shorthand=!1,e.value=t)}),a._visitor.WithStatement.addForAutoLogOnly(function(e,t){e.object&&(t=a._wrapIfMarkedForAutoLog(e.object,t,!1))&&(e.object=t)}),a._visitor.SpreadElement.addForAutoLogOnly(function(e,t){e.argument&&(t=a._wrapIfMarkedForAutoLog(e.argument,t,!1,[e]))&&(e.argument=t)}),["ForInStatement","ForOfStatement"].forEach(e=>{a._visitor[e].addForAutoLogOnly(function(e,t){var n,r;e.body&&"BlockStatement"===e.body.type&&e.left&&("Identifier"===e.left.type?(n=a._getAutoLogHint(e)||a._getAutoLogHint(e.left))&&e.body.body.unshift(a._generateUndefinedAutoLogNode(e.left,t,n,!0)):"VariableDeclaration"===e.left.type&&1===e.left.declarations.length&&(n=a._getAutoLogHint(e)||a._getAutoLogHint(e.left)||a._getAutoLogHint(e.left.declarations[0]))&&("ObjectPattern"===(r=e.left.declarations[0].id).type&&r.properties&&r.properties.length&&r.properties[0].value&&"AssignmentPattern"===r.properties[0].value.type?r.properties[0].value.left&&"Identifier"===r.properties[0].value.left.type&&e.body.body.unshift(a._generateUndefinedAutoLogNode(r.properties[0].value.left,t,n,!0)):e.body.body.unshift(a._generateUndefinedAutoLogNode(r,t,n,!0))))})}),a._visitor.ThrowStatement.addForAutoLogOnly(function(e,t){e.argument&&(t=a._wrapIfMarkedForAutoLog(e.argument,t,!1,[e]))&&(e.argument=t)}),a._visitor.MemberExpression.addForAutoLogOnly(function(e,t){var n;e.object&&(n=a._wrapIfMarkedForAutoLog(e.object,t))&&(e.object=n),e.property&&(e.computed?(n=a._wrapIfMarkedForAutoLog(e.property,t))&&(e.property=n):t.parentNode&&(a._isInstrumented(e,t)||"AssignmentExpression"===t.parentNode.type&&t.parentNode.left===e||"CallExpression"===t.parentNode.type&&t.parentNode.callee===e||"NewExpression"===t.parentNode.type&&t.parentNode.callee===e||"UpdateExpression"===t.parentNode.type&&t.parentNode.argument===e||"UnaryExpression"===t.parentNode.type&&t.parentNode.argument===e&&"delete"===t.parentNode.operator)||(n=a._wrapIfMarkedForAutoLog(e,t,!1,[e.property]))&&(t.replacement=n))}),a._visitor.BinaryExpression.addForAutoLogOnly(function(e,t){var n;e.left&&(n=a._wrapIfMarkedForAutoLog(e.left,t))&&(e.left=n),e.right&&(n=a._wrapIfMarkedForAutoLog(e.right,t))&&(e.right=n)}),a._visitor.CallExpression.addForAutoLogOnly(function(e,t){if(e.arguments&&e.arguments.length)for(var n,r=0,o=e.arguments.length;r<o;r++)"SpreadElement"!==e.arguments[r].type&&(n=a._wrapIfMarkedForAutoLog(e.arguments[r],t))&&(e.arguments[r]=n);var i;e.callee&&!a._isInstrumented(e,t)&&(i=[e.callee],"MemberExpression"===e.callee.type&&e.callee.property&&i.push(e.callee.property),i=a._wrapIfMarkedForAutoLog(e,t,!1,i))&&(t.replacement=i)}),a._visitor.NewExpression.addForAutoLogOnly(function(e,t){if(e.arguments&&e.arguments.length)for(var n,r=0,o=e.arguments.length;r<o;r++)"SpreadElement"!==e.arguments[r].type&&(n=a._wrapIfMarkedForAutoLog(e.arguments[r],t))&&(e.arguments[r]=n)}),a._visitor.ArrayExpression.addForAutoLogOnly(function(e,t){if(e.elements&&e.elements.length)for(var n=0,r=e.elements.length;n<r;n++){var o=e.elements[n];o&&"SpreadElement"!==o.type&&(o=a._wrapIfMarkedForAutoLog(o,t))&&(e.elements[n]=o)}}),a._visitor.TemplateLiteral.addForAutoLogOnly(function(e,t){if(e.expressions&&e.expressions.length)for(var n=0,r=e.expressions.length;n<r;n++){var o=a._wrapIfMarkedForAutoLog(e.expressions[n],t);o&&(e.expressions[n]=o)}}),a._visitor.AwaitExpression.addForAutoLogOnly(function(e,t){e.argument&&(t=a._wrapIfMarkedForAutoLog(e.argument,t))&&(e.argument=t)}),a._visitor.SequenceExpression.addForAutoLogOnly(function(e,t){if(e.expressions&&e.expressions.length)for(var n=0,r=e.expressions.length;n<r;n++){var o=e.expressions[n],o=a._wrapIfMarkedForAutoLog(o,t);o&&(e.expressions[n]=o)}}),a._visitor.ConditionalExpression.addForAutoLogOnly(function(e,t){e.test&&(t=a._wrapIfMarkedForAutoLog(e.test,t))&&(e.test=t)}),a._visitor.AssignmentExpression.addForAutoLogOnly(function(e,t){var n;e.right&&("="!==e.operator?!a._getAutoLogHint(e.right)&&((n=[]).push(e.left),"MemberExpression"===e.left.type&&e.left.property&&n.push(e.left.property),n=a._wrapIfMarkedForAutoLog(e,t,!1,n))&&(t.replacement=n):(n=[e.left],"MemberExpression"===e.left.type&&e.left.property?n.push(e.left.property):"ArrayPattern"!==e.left.type&&"ObjectPattern"!==e.left.type||n.push(...a._findAllChildIdentifiersExceptComputedPropertyKeys(e.left)),(t=a._wrapIfMarkedForAutoLog(e.right,t,!1,n))&&(e.right=t)))}),a._visitor.UnaryExpression.addForAutoLogOnly(function(e,t){e.argument&&"delete"!==e.operator&&(t=a._wrapIfMarkedForAutoLog(e.argument,t))&&(e.argument=t)})}instrument(e){var t=this,n=(t._ranges=[],t._code=e,t._numberOfFunctions=0,t._totalRanges=0,t._logMarkerRangeMap={},t._testNames=[],t._parse(e)),e=(t._postInitializeIgnoreCoverageHints(),t._postInitializeAutoLogHints(e,n),t._change(n,t._visitor));let r;this._snaps&&this._snaps.length?r=this._processSnaps(e):this._appendComponentInstantiation(e);n=t._generate(e);return delete t._code,{code:n.code,map:n.map.toString(),ranges:t._ranges,numberOfFunctions:t._numberOfFunctions,testName:t._testName,testNames:t._testNames,esm:t._esm,includedTestFile:t._includedTestFile,excludedTestFile:t._excludedTestFile,hasIncludedTest:t._hasIncludedTest,matchSnapshotRanges:t._matchSnapshotRanges,loggedRanges:t._loggedRanges,notInstrumentedLogMarkers:t._logMarkers&&t._logMarkers.filter(e=>!e.instrumented),liveCommentLines:!_.isEmpty(t._liveCommentLines)&&t._liveCommentLines||void 0,logpointInfo:{overlappingLogpointsPresent:0!==t._outstandingLogpointCount},snaps:r,logMarkerRangeMap:t._logMarkerRangeMap}}_nodeEndsBeforeSelectionStart(e,t,n){return e.loc.end.line<t||e.loc.end.line===t&&e.loc.end.column<n}_findBestMatchingAutoLogNode(e,t,n,r,o,i){if(("File"===e.type||"Program"===e.type)&&t.loc.start.line===n)return t;var s=this._nodeEndsBeforeSelectionStart(e,n,r),n=this._nodeEndsBeforeSelectionStart(t,n,r);if(s&&!n)return t;if(n&&!s)return e;if(e.loc.start.column<=r&&t.loc.start.column>r)return e;if(t.loc.start.column<=r&&e.loc.start.column>r)return t;if(t.loc.start.column<=r&&e.loc.start.column<=r){if(e.loc.start.column>t.loc.start.column)return e;if(t.loc.start.column>e.loc.start.column)return t}else{if(e.loc.start.column<t.loc.start.column)return e;if(t.loc.start.column<e.loc.start.column)return t}n=i-1;return(e.loc.end.line>o||e.loc.end.line===o&&e.loc.end.column>=n)&&(t.loc.end.line<o||t.loc.end.line===o&&t.loc.end.column<n)?e:(t.loc.end.line>o||t.loc.end.line===o&&t.loc.end.column>=n)&&(e.loc.end.line<o||e.loc.end.line===o&&e.loc.end.column<n)?t:(e.loc.end.line>o||e.loc.end.line===o&&e.loc.end.column>=n)&&(t.loc.end.line>o||t.loc.end.line===o&&t.loc.end.column>=n)?e.loc.end.line<t.loc.end.line||e.loc.end.line===t.loc.end.line&&e.loc.end.column<t.loc.end.column?e:t:e.loc.end.line<t.loc.end.line||e.loc.end.line===t.loc.end.line&&e.loc.end.column<t.loc.end.column?t:e}_postInitializeIgnoreCoverageHints(){if(this._extractedComments&&this._extractedComments.ignoreComments)for(const e of this._extractedComments.ignoreComments)this._ignoreCoverageHints.push(e.index);this._ignoreCoverageHints.length||(this._nextHint=()=>{})}_postInitializeAutoLogHints(e,t){var n;const u=this;if(u._opts.recordValues){if(u._extractedComments&&u._extractedComments.liveComments)for(const a of u._extractedComments.liveComments)u._handleLiveComment(a.index,a.exp,e);if(u._logMarkers&&u._logMarkers.length){let p=-1;const d=new Map;for(const c of u._logMarkers){var r=c.range;r&&(r=r[0],p=Math.max(p,r),null!=(n=d.get(r))&&n.push(c)||d.set(r,[c]))}const l=this._getVisitor(),h=(l.ChainExpression=function(e,t,n){n(e.expression,t,"Expression")},new Set(["ClassDeclaration","ClassExpression","FunctionDeclaration","FunctionExpression","ArrowFunctionExpression"])),m=new Map;!function e(c,t,n){var r,n=n||c.type;c.loc.start.line<=p&&((r=d.get(c.loc.start.line))&&!t.has(c)&&(t.add(c),r.forEach(e=>{if(e.range){var[,t,n,r]=e.range;if(c.loc.start.column<=r||c.loc.start.line!==n||c.loc.end.line>c.loc.start.line||c.loc.end.line===c.loc.start.line&&c.loc.end.column>=t)if(e.logpoint&&!e.inlineLogpoint&&!e.synthetic&&h.has(c.type)){var o,i=c.loc.start.line+1,s=c.loc.end.line,a=e.changeId;for(let e=i;e<=s;e++){var l={range:[e,0,e,1/0],changeId:a,id:a,expanded:!1,new:!0,action:"show",logpoint:!0,synthetic:!0};null!=(o=d.get(e))&&o.push(l)||d.set(e,[l])}p=Math.max(p,s)}else"EmptyStatement"!==c.type&&"DebuggerStatement"!==c.type&&"ChainExpression"!==c.type&&((i=m.get(e))?m.set(e,u._findBestMatchingAutoLogNode(i,c,c.loc.start.line,t,n,r)):m.set(e,c))}})),r=l[n])&&r(c,t,e)}(t,new Set);for(const[g,f]of m.entries()){var o="VariableDeclarator"===(o=f).type&&o.init?o.init:"IfStatement"===o.type&&o.test?o.test:"RestElement"===o.type&&o.argument?o.argument:"AssignmentExpression"===o.type&&"="!==o.operator&&o.right?o.left:o,i=(g.logpoint&&this._outstandingLogpointCount++,u._autoLogHints[o.end]),s=null!=i&&i.isLiveComment?i:null==i?void 0:i.liveComment;i&&!s||(u._autoLogHints[o.end]={start:o.start,logMarker:g,liveComment:s},u._logMarkerRangeMap[[o.loc.start.line,o.loc.start.column,o.loc.end.line,o.loc.end.column].join(",")]=g.range.join(","))}}}}_getVisitor(){var e=t("./acornWalkJsxPlugin")(t("acorn-walk").base);return e.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),n(e.property,t,"Expression")},e.MethodDefinition=e.Property=function(e,t,n){e.computed?n(e.key,t,"Expression"):n(e.key,t,"Identifier"),n(e.value,t,"Expression")},e}_findAllChildIdentifiersExceptComputedPropertyKeys(e){var t=[];const o=this._getVisitor();return o.ObjectPattern=function(e,t,n){for(var r=0,o=e.properties;r<o.length;r+=1){var i=o[r];"Property"===i.type?(i.computed||i.method||n(i.key,t,"Identifier"),n(i.value,t,"Pattern")):"RestElement"===i.type&&n(i.argument,t,"Pattern")}},function e(t,n,r){r=r||t.type,"Identifier"===t.type&&n.indexOf(t)<0&&n.push(t),r=o[r];r&&r(t,n,e)}(e,t),t}_getNodesToCheckForAutoLogsInVariableDeclaration(e,t){e=[e];return"VariableDeclarator"===t.type&&t.id&&("Identifier"===t.id.type?e.push(t.id):"ObjectPattern"!==t.id.type&&"ArrayPattern"!==t.id.type||e.push(...this._findAllChildIdentifiersExceptComputedPropertyKeys(t.id))),e}_tryFindTestName(e,t){var n;this._containsChangePosition(e.body)&&t.parentContext&&(this._saveTestNameIfTestFunctionCall(t,e,t.parentNode)||this._tryFindTestNameFromWrappedFunction(e,t)||t.parentContext.parentContext&&(n=t.parentNode,!_.isArray(n)||n[0]!==e&&n[1]!==e||(e=(n=t.parentContext).parentNode)&&"CallExpression"===e.type&&n.parentContext&&this._tryFindTestNameFromWrappedFunction(t.parentContext.parentNode,t.parentContext.parentContext)))}_tryFindTestNameFromWrappedFunction(e,t){var n=t.parentNode;if(_.isArray(n)&&(n[0]===e||n[1]===e)){n=t.parentContext,e=n.parentNode;if(e&&"CallExpression"===e.type&&n.parentContext)return this._saveTestNameIfTestFunctionCall(n.parentContext,e,n.parentContext.parentNode)}}_createVisitor(){var n=[],r={removeVisitorsAddedForAutoLogHintsOnly:function(){_.each(n,function(e){r[e].clearAutoLogHintsActions()})},add:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].add(t)}};return _.each(o,function(t){var o=[],e=(r[t]=function(e,t){for(var n=0,r=o.length;n<r;n++)o[n](e,t)},r[t]);e.add=function(e){o.push(e)},e.addForAutoLogOnly=function(e){e.removeIfNoAutoLogHints=!0,n.push(t),o.push(e)},e.clearAutoLogHintsActions=function(){o=_.filter(o,function(e){return!e.removeIfNoAutoLogHints})},e.clear=function(){o.length=0}}),r}_change(e,t,n){var r,o,i;if(n=n||{},e.type){if(e.loc)if(t[e.type]){if(n.hinted||(n.hinted=this._nextHint(e)),n.hinted)return e;t[e.type](e,n)}if("Identifier"===e.type||"Literal"===e.type||"ThisExpression"===e.type||"DebuggerStatement"===e.type||"EmptyStatement"===e.type||"BreakStatement"===e.type||"ContinueStatement"===e.type)return}for(i in e)e.hasOwnProperty(i)&&"loc"!==i&&"type"!==i&&"start"!==i&&"end"!==i&&"name"!==i&&(r=e[i])&&_.isObject(r)&&(o={parentContext:n,parentNode:e,hinted:n.hinted},this._change(r,t,o),o.replacement)&&(e[i]=o.replacement);return e}_handleLiveComment(e,t,s){const a=this._autoLogHints[e]={exp:t,isLiveComment:!0};t=(e,t,n,r)=>{for(var o,i=e;0<=i;i--)if(o=s[i],!n.test(o)){i++;break}return i<t&&!this._autoLogHints[i]&&(this._autoLogHints[i]=a,r)&&r(i),i};t(t(e-1,e,/\s/)-1,e,/[\s,)}]/,e=>a.bracelessIndex=e)}_parse(o){var e,i=this,t={locations:!0,ecmaVersion:"latest",allowReturnOutsideFunction:!0,allowImportExportEverywhere:!0,allowAwaitOutsideFunction:!0,plugins:{jsx:!0,objectSpread:!0,dynamicImport:!0,topLevelAwait:!0,tolerance:!0}},s=[];return i._ignoreCoverageRegExp&&s.push(function(e,t,n,r){t&&t.match(i._ignoreCoverageRegExp)&&i._ignoreCoverageHints.push(r)}),i._ignoreFileCoverageRegExp&&s.push(function(e,t){!i._ignoreFileCoverage&&t&&t.match(i._ignoreFileCoverageRegExp)&&(i._ignoreFileCoverage=!0,i._wrapExpressionStatementExpressionIntoVisitor=function(e){return e},i._autoLogHints={})}),i._includeTestFileRegExp&&s.push(function(e,t){!i._includedTestFile&&t&&t.match(i._includeTestFileRegExp)&&(i._includedTestFile=!0)}),i._excludeTestFileRegExp&&s.push(function(e,t){!i._excludedTestFile&&t&&t.match(i._excludeTestFileRegExp)&&(i._excludedTestFile=!0)}),!i._opts.recordValues||!i._autoLogHintExpPrefix||i._ignoreFileCoverage||i._extractedComments&&i._extractedComments.liveComments||s.push(function(e,t,n){var r;t&&!i._ignoreFileCoverage&&(0===(r=t.indexOf(i._autoLogHintExpPrefix))||-1!==r&&0===t.substring(0,r).trim().length)&&(t=t.substr(i._autoLogHintExpPrefix.length+r).trim(),i._handleLiveComment(n,t,o))}),i._opts.preserveComments?(t.ranges=!0,t.onComment=[],t.onToken=[],e=a.parse(o,t),_.each(t.onComment,function(t){_.each(s,function(e){e("Block"===t.type,t.value,t.start,t.end,null==(e=t.loc)?void 0:e.start)})}),l.attachComments(e,t.onComment,t.onToken)):(s.length&&(t.onComment=function(t,n,r,o,i){_.each(s,function(e){e(t,n,r,o,i)})}),a.parse(o,t))}_nextHint(e,t){for(var n=this,r=e.start,o=e.end,e=(!t&&_.isNumber(n._ignoreCoverageHints.prevLastHintPosition)&&(n._ignoreCoverageHints.lastHintPosition=n._ignoreCoverageHints.prevLastHintPosition,delete n._ignoreCoverageHints.prevLastHintPosition),n._ignoreCoverageHints.lastHintPosition),i=n._ignoreCoverageHints.lastHintPosition+1,s=!1,a=!1,l=!1;i<n._ignoreCoverageHints.length;){var c=n._ignoreCoverageHints[i];if(c<=r||l&&c<o)s=!0,n._ignoreCoverageHints.lastHintPosition=i,i++,l=!0;else{if(!(t&&c<o))break;a=!0,n._ignoreCoverageHints.lastHintPosition=i,i++}}return a&&(n._ignoreCoverageHints.prevLastHintPosition=e),s}_generate(e){var t={sourceMap:this._opts.fileName||"original",sourceMapWithCode:!0};return this._opts.preserveComments&&(t.comment=!0),l.generate(e,t)}_wrapInBlock(e){return{type:"BlockStatement",body:e}}_instructionValueSequence(e,t,n,r){var o=e[1],o=this._wrapIfMarkedForAutoLog(o,t,!0,n,r);return o&&(e[1]=o),_.isEmpty(this._autoLogHints)&&(this._instructionValueSequence=_.bind(this._sequence,this),this._getNodesToCheckForAutoLogsInVariableDeclaration=()=>[]),this._sequence(e)}_wrapIfMarkedForAutoLog(t,n,r,o,i){if(t&&!n.hinted){let e=t;if(!(a=this._getAutoLogHint(t,i))&&o&&o.length)for(var s=0;s<o.length;s++){var a,l=o[s];if(a=this._getAutoLogHint(l)){e=l;break}}if(a&&(!t.tracerLog||"."===a.exp||a.logMarker&&"time"===a.logMarker.action))return r?this._wrapIntoVisitor(t,this._generateNodeContext(e),!1,a):this._generateUndefinedAutoLogNode(t,n,a)}}_isInstrumented(e,t){return t.parentNode&&(t.parentNode[5]===e||t.parentNode[6]===e)}_generateUndefinedAutoLogNode(e,t,n,r){let o=this._ranges.length-1;t=this._instruction(e,Object.assign(Object.assign({},t),{disallowValueLoggingInOrAfterCurrentDebuggerFrame:r}),"U",e=>{o=e}),r=this._wrapIntoVisitor(e,this._generateNodeContext(e),!1,n,()=>o);return this._sequence([t,r])}_getAutoLogHint(e,t){var n=e.end+(t||0),n=this._autoLogHints[n];n&&0<=n.start&&e.start!==n.start&&(n=void 0);try{return n?(n.bracelessIndex&&delete this._autoLogHints[n.bracelessIndex],n):t?n=this._getAutoLogHint(e):void 0}finally{n&&n.isLiveComment&&(this._liveCommentLines[e.loc.start.line]=e.loc.start.column)}}_sequence(e){return 2===e.length&&this._isUndefinedInstruction(e[0])?e[1]:{type:"SequenceExpression",expressions:e}}_literal(e){return{type:"Literal",value:e}}_delayedLiteral(e){return{type:"Literal",get value(){return _.isUndefined(this._value)&&(this._value=e()),this._value}}}_return(e){return{type:"ReturnStatement",argument:e}}_firstNode(e){return{type:"ExpressionStatement",expression:{type:"Literal",value:e&&e.expression&&e.expression.value||""}}}_handleSuperCall(e,t,n,r){var o=e[0],t=this._instructionStatement(o,t,"S");delete o.loc,delete o.expression.loc,e.splice(1,0,...[n,t].concat(r))}_replaceConsoleLog(e,t){var n=this;e&&!t.hinted&&n._captureConsoleLog&&("CallExpression"===e.type&&e.callee&&"MemberExpression"===e.callee.type&&e.callee.object&&"Identifier"===e.callee.object.type&&"console"===e.callee.object.name&&e.callee.property&&"Identifier"===e.callee.property.type&&"log"===e.callee.property.name?(e.tracerLog=!0,e.callee.object.name="$_$tracer",e.arguments||(e.arguments=[]),e.arguments.push(n._literal(n._generateNodeContext(e.arguments[0]))),e.arguments.push(n._literal(n._opts.file)),e.arguments.push(n._literal(n._ranges.length))):e.arguments&&e.arguments.length&&n._replaceConsoleLog(e.arguments[0],t))}_generateNodeContext(e){if(e&&"Literal"!==e.type)try{var t=_.truncate(l.generate(e,{}),40).toString().replace("$_$tracer.log","console.log").replace(/\s*;\s*$/,"").replace(/\r\n\s*/g," ").replace(/\n\s*/g," ");return~t.indexOf("$_$tracer")?"":t}catch(e){}return""}_replaceSequenceWithDiff(e){var t=this,n=e;if((e=n.expression)&&"SequenceExpression"===e.type&&e.expressions&&2===e.expressions.length){var r=e.expressions[0],e=e.expressions[1],o="";if(r&&"Literal"!==r.type)try{o=_.truncate(l.generate(r,{}),40).toString()+" vs "+_.truncate(l.generate(e,{}),40).toString()}catch(e){}return n.expression={type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"$_$tracer"},property:{type:"Identifier",name:"diff"}},arguments:[r,e,t._literal(o),t._literal(t._opts.file),t._literal(t._ranges.length)]},!0}}_needsToStayFirst(e){return e&&"ExpressionStatement"===e.type&&e.expression&&"Literal"===e.expression.type&&("use strict"===e.expression.value||"use babel"===e.expression.value||"ngInject"===e.expression.value)}_isSystemJsModule(e){return e&&"ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&"MemberExpression"===e.expression.callee.type&&e.expression.callee.object&&e.expression.callee.property&&"Identifier"===e.expression.callee.object.type&&"Identifier"===e.expression.callee.property.type&&"System"===e.expression.callee.object.name&&"register"===e.expression.callee.property.name&&e.expression.arguments}_isSuperCall(e){return e&&"ExpressionStatement"===e.type&&e.expression&&"CallExpression"===e.expression.type&&e.expression.callee&&"Super"===e.expression.callee.type}_isUndefinedInstruction(e){return e&&"Identifier"===e.type&&"undefined"===e.name}_instruction(r,e,o,t){var i=r.loc,n="",s=[];switch(o){case"PE":s=[this._literal(this._opts.file)];case"FE":n=o.toLowerCase();break;default:if(this._ignoreFileCoverage||e.hinted||this._nextHint(r,!0))return{type:"Identifier",name:"undefined"};n="";const l=()=>{var e,t,n=[i.start.line,i.start.column,i.end.line,i.end.column];"R"===o&&(e=1,r.argument&&"CallExpression"===r.argument.type&&r.argument.callee&&("Identifier"===(t="SequenceExpression"===(t=r.argument.callee).type&&t.expressions&&t.expressions.length?t.expressions[t.expressions.length-1]:t).type?e=this._isObjectSpread(t)?c:t.name:"MemberExpression"===t.type&&(t.property&&"Identifier"===t.property.type&&"createElement"===t.property.name&&t.object&&(this._isReactObject(t.object)||"MemberExpression"===t.object.type&&this._isReactObject(t.object.object))?e="Babel.React.createElement":t.object&&this._isObjectSpread(t.object)&&(e=c))),n.push(e)),this._ranges.push(n)};this._totalRanges++,"U"!==o?(s=[this._literal(this._opts.file),this._literal(this._ranges.length)],l(),s.push({type:"Identifier",name:"$_$c"})):(n="_",(s=[this._literal(this._opts.file),this._delayedLiteral(()=>{var e=this._ranges.length;return l(),t&&t(e),e})]).push({type:"Identifier",name:"$_$c"}),e.disallowValueLoggingInOrAfterCurrentDebuggerFrame&&s.push(this._literal(!0)))}var a=this._instructionCallExpression(n,s);return r.loc&&(a.loc=r.loc,a.callee.loc=r.loc),a}_isReactObject(e){return e&&"Identifier"===e.type&&e.name&&~e.name.toLowerCase().indexOf("react")}_isObjectSpread(e){return e&&"Identifier"===e.type&&e.name&&~e.name.toLowerCase().indexOf("objectspread")}_wrapExpressionStatementExpressionIntoVisitor(e,t){return e&&"Identifier"===e.type?(t=(t=this._getAutoLogHint(t))||this._getAutoLogHint(e),this._wrapIntoVisitor(e,void 0,{hasAutoLogHint:!!t},t||{exp:""})):e}_autoHintDetails(e,t){e=this._autoLogHintGlobalExp&&!e&&t.isLiveComment||this._autoLogHintGlobalExp&&e&&e.hasAutoLogHint;let n=(t.logMarker||t).exp;var r=(n=e?"":n)&&"?"===n[0],o=n&&("."===n[0]||".+"===n.substr(0,2)||"+."===n.substr(0,2)),i=n&&("+"===n[0]||".+"===n.substr(0,2)||"+."===n.substr(0,2));return r&&(n=n.substr(1).trim()),o&&(n=n.substr(1).trim()),i&&(n=n.substr(1).trim()),t.logMarker&&(i=t.logMarker.expanded),{hasGlobalExp:e,exp:n,isProxyExp:r,isTimeDiffExp:o,isAutoExpandExp:i}}_wrapIntoVisitor(t,n,r,o,i,s){var a=this;let{hasGlobalExp:l,exp:c,isProxyExp:p,isTimeDiffExp:u,isAutoExpandExp:d}=this._autoHintDetails(r,o);var h=o.logMarker&&"time"!==o.logMarker.action&&o.logMarker;let m=o.logMarker&&"time"===o.logMarker.action&&o.logMarker;m&&(o.liveComment?((g=this._autoHintDetails(r,o.liveComment)).isTimeDiffExp&&(m.instrumented=!0,m=void 0),l=g.hasGlobalExp,c=g.exp,p=g.isProxyExp,u=g.isTimeDiffExp,d=g.isAutoExpandExp):u=!0);var g=a._ranges.length-(r?0:1),f=[a._literal(a._opts.file)];if(i?(f.push(a._delayedLiteral(()=>{var e=i();return a._loggedRanges[e]=!0,e})),f.push(a._delayedLiteral(()=>a._opts.file+","+i()))):(a._loggedRanges[g]=!0,f.push(a._literal(g)),f.push(a._literal(a._opts.file+","+g))),f.push({type:"Identifier",name:"$_$c"}),u&&!c)return f.push(a._literal(n||t.name||"")),f.push(a._tracerMethodCall("_time")),f.push(t),f.push(a._tracerMethodCall("_time")),m&&(g={type:"ObjectExpression",properties:[]},m.traceId&&g.properties.push(a._propertyNode("traceId",m.traceId)),m.changeId&&g.properties.push(a._propertyNode("changeId",m.changeId)),(m.traceId||m.changeId)&&f.push(g),m.instrumented=!0),this._tracerMethodCall("_logTime",f);{f.push(a._literal(c?_.truncate(c,40):n||t.name||"")),m?(delete(g=Object.assign({},m)).liveComment,f.push(a._wrapIntoVisitor(t,n,!!r,{exp:".",logMarker:g}))):u?f.push(a._wrapIntoVisitor(t,n,!!r,{exp:"."})):f.push(t),l?f.push(a._evalExpressionNode(a._autoLogHintGlobalExp)):this._logpointsNotAvailableExpression&&o.logMarker&&o.logMarker.logpoint?f.push(a._evalExpressionNode(this._logpointsNotAvailableExpression)):f.push(c?a._evalExpressionNode(c):a._literal("$_$ne")),f.push(a._literal(!r||a._autoLogHintExpPrefix&&r&&r.hasAutoLogHint?0:1));let e=0;if(d&&(e|=1),p&&(e|=2),f.push(a._literal(e)),h){g={type:"ObjectExpression",properties:[]};const s=o.liveComment&&""===o.liveComment.exp||!o.liveComment&&r;return s&&g.properties.push(a._propertyNode("permanent",1)),h.traceId&&g.properties.push(a._propertyNode("traceId",h.traceId)),h.changeId&&(g.properties.push(a._propertyNode("changeId",h.changeId)),this._outstandingLogpointCount--),(h.traceId||h.changeId||s)&&f.push(g),h.instrumented=!0,!s&&o.liveComment?a._wrapIntoVisitor(a._instructionCallExpression("v",f),n,r,o.liveComment,i,!0):a._instructionCallExpression("v",f)}return s&&f.push({type:"ObjectExpression",properties:[a._propertyNode("permanent",1)]}),a._instructionCallExpression("v",f)}}_propertyNode(e,t){return{type:"Property",key:{type:"Identifier",name:e},value:{type:"Literal",value:t}}}_tracerMethodCall(e,t){return{type:"CallExpression",callee:{type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"$_$tracer"},property:{type:"Identifier",name:e}},arguments:t||[]}}_evalExpressionNode(e){return{type:"FunctionExpression",params:[{type:"Identifier",name:"$"}],body:{type:"BlockStatement",body:[{type:"TryStatement",block:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"CallExpression",callee:{type:"Identifier",name:"eval"},arguments:[{type:"Literal",value:e}]}}]},handler:{type:"CatchClause",param:{type:"Identifier",name:"__e"},body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"Literal",value:"✗"}}]}}}]},generator:!1,expression:!1}}_instructionCallExpression(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"$_$w"+e},arguments:t}}_selfExecutingAsyncFunction(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"ArrowFunctionExpression",expression:!1,generator:!1,async:!0,params:[],body:{type:"BlockStatement",body:e}},arguments:[],optional:!1}}}_selfExecutingAsyncSnapFunction(e,t,n){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"FunctionExpression",id:{type:"Identifier",name:"snapRootStackTraceMarker_"+e},expression:!1,generator:!1,async:!1,params:[],body:{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"FunctionExpression",id:{type:"Identifier",name:t},expression:!1,generator:!1,async:!0,params:[],body:n},arguments:[],optional:!1}}]}},arguments:[],optional:!1}}}_svelteInstanceFuncCall(){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"instance"},arguments:[{type:"ObjectExpression",properties:[{type:"Property",key:{type:"Identifier",name:"$$"},value:{type:"ObjectExpression",properties:[{type:"Property",key:{type:"Identifier",name:"on_destroy"},value:{type:"ArrayExpression",elements:[]}}]}}]},{type:"ObjectExpression",properties:[]},{type:"ArrowFunctionExpression",expression:!1,generator:!1,async:!1,params:[],body:{type:"BlockStatement",body:[]}}]}}}_vueSfcSetupFuncCall(){return{type:"ExpressionStatement",expression:{type:"LogicalExpression",operator:"&&",left:{type:"LogicalExpression",operator:"&&",left:{type:"LogicalExpression",operator:"&&",left:{type:"BinaryExpression",operator:"!==",left:{type:"UnaryExpression",operator:"typeof",argument:{type:"Identifier",name:"_sfc_main"}},right:{type:"Literal",value:"undefined"}},right:{type:"Identifier",name:"_sfc_main"}},right:{type:"MemberExpression",object:{type:"Identifier",name:"_sfc_main"},property:{type:"Identifier",name:"setup"}}},right:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"_sfc_main"},property:{type:"Identifier",name:"setup"}},arguments:[{type:"ObjectExpression",properties:[]},{type:"ObjectExpression",properties:[{type:"Property",key:{type:"Identifier",name:"expose"},value:{type:"ArrowFunctionExpression",expression:!1,generator:!1,async:!1,params:[],body:{type:"BlockStatement",body:[]}},kind:"init",computed:!1,method:!1,shorthand:!1}]}]}}}}_appendComponentInstantiation(e){var t;!this._opts.vue&&!this._opts.svelte||null!=(t=this._opts.snaps)&&t.onlyMode||(e=(t=e.body).pop(),t.push(this._opts.svelte?this._svelteInstanceFuncCall():this._vueSfcSetupFuncCall()),t.push(e))}_processSnaps(n){var e,t=this._snaps,r=this._snapScopes,o={type:"Identifier",name:"e"},i={type:"EmptyStatement"};let s=n.body;if(null!=(h=this._opts.snaps)&&h.onlyMode){var a=[];for(let t=0;t<n.body.length;t++){var l=n.body[t];if("ImportDeclaration"===l.type){var c=[],p=l.source.value,u=l.specifiers||[];if(u.length){var d=u.find(e=>"ImportNamespaceSpecifier"===e.type);let e=void 0;for(const y of u)y!==d&&(e=e||{type:"ObjectPattern",properties:[]}).properties.push({type:"Property",key:"ImportDefaultSpecifier"===y.type?{type:"Identifier",name:"default"}:y.imported,value:y.local,kind:"init"});d&&c.push(this._variableDeclaration(d.local,this._dynamicImport(p))),e&&c.push(this._variableDeclaration(e,d?d.local:this._dynamicImport(p)))}else c.push({type:"ExpressionStatement",expression:this._dynamicImport(p)});let e=this._tracerMethodCall("reportSnapsImportError",[{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[{type:"MemberExpression",object:o,property:{type:"Identifier",name:"message"}}]}]);e.loc=l.loc,e=this._instructionValueSequence([this._instruction(e,{}),e],{}),n.body[t]=this._wrapIntoTryCatch(c,o,[{loc:l.loc,type:"ExpressionStatement",expression:e}])}else"ExportDefaultDeclaration"===l.type?(l.declaration&&("FunctionDeclaration"===l.declaration.type||"ClassDeclaration"===l.declaration.type&&!l.declaration.superClass)&&a.push(l.declaration),n.body[t]=i):"ExportNamedDeclaration"===l.type?l.declaration?"FunctionDeclaration"===l.declaration.type||"ClassDeclaration"===l.declaration.type&&!l.declaration.superClass?(a.push(l.declaration),n.body[t]=i):(n.body[t]=l.declaration,"VariableDeclaration"===l.declaration.type&&(l.declaration.kind="var")):n.body[t]=i:"ExportAllDeclaration"===l.type?n.body[t]=i:"VariableDeclaration"===l.type?l.kind="var":"FunctionDeclaration"!==l.type&&("ClassDeclaration"!==l.type||l.superClass)||(a.push(l),n.body[t]=i)}var h=this._wrapIntoTryCatch(n.body,o,[{type:"ExpressionStatement",expression:this._tracerMethodCall("reportSnapsProgramScopeError",[o])}]);const m=s.pop();(s=[h,m]).unshift(...a),n.body=null!=(h=this._opts.snaps)&&h.asyncWrap?[this._selfExecutingAsyncFunction(s)]:s}const m=s.pop();try{const v=new Map;for(const b of r.keys()){const S=r.get(b);if(null!=(e=this._opts.snaps)&&e.onlyMode){var g=[];for(let e=0;e<S.source.body.length;e++){var f=S.source.body[e];"VariableDeclaration"===f.type?f.kind="var":"FunctionDeclaration"!==f.type&&("ClassDeclaration"!==f.type||f.superClass)||(g.push(f),S.source.body[e]=i)}var _=[];S.source.body=[this._wrapIntoTryCatch(S.source.body,o,[{type:"ExpressionStatement",expression:this._tracerMethodCall("reportSnapsProgramScopeError",[o])}],_)],S.source.body.unshift(...g),v.set(b,_)}else v.set(b,{push:e=>{S.source.body.splice(S.source.body.length-1,0,e)}});s.push(S.call)}const x=1===t.length;return t.map((e,t)=>{let n,r;var o;return e.empty||(o=e.body.body[0],n=o.body[0].loc.start,r=o.body[o.body.length-1].loc.end),(e.scope&&v.has(e.scope)?v.get(e.scope):s).push(this._selfExecutingAsyncSnapFunction(t,"quokka_snap"+(x?"":"_"+(t+1)),e.body.body[0])),e.body.body=[],{empty:e.empty,body:{range:[e.body.loc.start.line,e.body.loc.start.column,e.body.loc.end.line,e.body.loc.end.column],fallbackRange:e.empty?void 0:[n.line,n.column,r.line,r.column]},output:e.output&&{range:[e.output.loc.start.line,e.output.loc.start.column,e.output.loc.end.line,e.output.loc.end.column],content:e.outputContent,lines:e.outputLines}}})}finally{s.push(m)}}_wrapIntoTryCatch(e,t,n,r){return{type:"TryStatement",block:{type:"BlockStatement",body:e},handler:{type:"CatchClause",param:t,body:{type:"BlockStatement",body:n}},finalizer:r?{type:"BlockStatement",body:r}:void 0}}_variableDeclaration(e,t){return{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:e,init:t}],kind:"var"}}_dynamicImport(e){return{type:"AwaitExpression",argument:{type:"ImportExpression",source:{type:"Literal",value:e}}}}_getFunctionParameterLogInstructions(e,o){const i=[],s=this;return e.params.forEach(e=>{if("Identifier"===e.type){var t=s._getAutoLogHint(e);t&&e.name&&i.push(s._generateUndefinedAutoLogNode(e,o,t))}else if("AssignmentPattern"===e.type&&e.left&&e.right&&e.left.name){t=[s._getAutoLogHint(e.left),s._getAutoLogHint(e.right),s._getAutoLogHint(e)].find(e=>e);t&&i.push(s._generateUndefinedAutoLogNode(e.left,o,t))}else if("ObjectPattern"===e.type&&e.properties){const n=s._getAutoLogHint(e);e.properties.forEach(e=>{var t;e&&e.key&&e.value&&e.value.name&&(t=[s._getAutoLogHint(e.value),s._getAutoLogHint(e.key),s._getAutoLogHint(e),n].find(e=>e))&&i.push(s._generateUndefinedAutoLogNode(e.value,o,t))})}else if("ArrayPattern"===e.type&&e.elements){const r=s._getAutoLogHint(e);e.elements.forEach(e=>{var t;e&&e.name&&(t=[s._getAutoLogHint(e),r].find(e=>e))&&i.push(s._generateUndefinedAutoLogNode(e,o,t))})}else"RestElement"===e.type&&e.argument&&e.argument.name&&(t=s._getAutoLogHint(e))&&i.push(s._generateUndefinedAutoLogNode(e.argument,o,t))}),i.map(e=>({type:"ExpressionStatement",expression:e}))}_instructionStatement(e,t,n){return{type:"ExpressionStatement",expression:this._instruction(e,t,n)}}_scopeStartVariableDeclaration(e,t){return{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"$_$c"},init:{type:"CallExpression",callee:{type:"Identifier",name:"$_$w"+e.toLowerCase()},arguments:t?[this._literal(this._opts.file),...t]:[this._literal(this._opts.file)]}}]}}_saveTestNameIfTestFunctionCall(t,n,r){if(_.isArray(r)&&2<=r.length&&r[1]===n&&r[0]){let e;if("Literal"===r[0].type)e=r[0].value;else{if("TemplateLiteral"!==r[0].type)return;n=r[0];if(n.expressions&&n.expressions.length)return;if(!n.quasis||1!==n.quasis.length)return;r=n.quasis[0];if(!r||!r.value)return;e=r.value.cooked}n=t.parentContext.parentNode;if(n&&"CallExpression"===n.type){r=n.callee;if((r="SequenceExpression"===r.type&&r.expressions&&"SequenceExpression"===(r=r.expressions[r.expressions.length-1]).type&&r.expressions?r.expressions[r.expressions.length-1]:r)&&("it"===r.name||"test"===r.name||"asyncTest"===r.name||r.property&&"Identifier"===r.property.type&&("it"===r.property.name||"test"===r.property.name||"asyncTest"===r.property.name||"default"===r.property.name&&"import_node_test"===(null==(t=r.object)?void 0:t.name))))return this._testName=e,this._testNames.push(e),!0}}}}n.default=function(e,t){return new s(t).instrument(e)}},{"./acornImportAttributesAssertionsPlugin":1,"./acornImportMetaPlugin":2,"./acornLogicalAssignment":3,"./acornNumericSeparatorPlugin.js":4,"./acornTolerancePlugin":5,"./acornTopLevelAwaitPlugin":6,"./acornWalkJsxPlugin":7,acorn:void 0,"acorn-jsx":void 0,"acorn-walk":void 0,"escodegen-wallaby":void 0}],11:[function(e,t,n){const a=e("util"),r=new(e("lru-cache"))({max:5242880,length:e=>e.length});let o=0;const l={add(e){r.set(o++,e)},values(){var e=r.values();return e.reverse(),e}};let c=process.env.WALLABY_DEBUG_ENABLED||!1,i=process.env.WALLABY_TRACE_ENABLED||!1;const s={};s.log=function(e){return process.stdout.write(e)},s.formatArgs=function(e){var t=this["namespace"];e[0]=function(){if(s.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+t+" "+e[0]},s.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{depth:25,maxArrayLength:100,breakLength:200});d=s,((u.debug=u).default=u).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},u.instances=[],Object.keys(d).forEach(e=>{u[e]=d[e]}),u.formatters={};const p=u;function u(e,t){let n;function s(...o){if(s.enabled){const i=s;var e=Number(new Date),t=e-(n||e);i.diff=t,i.prev=n,i.curr=e,n=e,o[0]=u.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");let r=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(e,t)=>{var n;return"%%"!==e&&(r++,"function"==typeof(t=u.formatters[t]))&&(n=o[r],e=t.call(i,n),o.splice(r,1),r--),e}),u.formatArgs.call(i,o);t=a.format(...o)+"\n";(!i.isDebug||(l.add(t),c))&&u.log.call(i,t)}}return s.isDebug="debug"===t,s.isTrace="trace"===t,s.namespace=e,s.enabled=s.isTrace&&i||s.isDebug,u.instances.push(s),s}var d,e=p["formatters"];e.o=function(e){return a.inspect(e,s.inspectOpts).replace(/\s*\n\s*/g," ")},e.O=function(e){return a.inspect(e,s.inspectOpts)},t.exports={create(e){return{debug:p(e,"debug"),trace:p(e,"trace")}},enableDebug(){c||(process.env.WALLABY_DEBUG_ENABLED="true",c=!0,l.values().forEach(e=>{s.log(e)}))},getDebugLog(){return l.values()},enableTrace(){i||(process.env.WALLABY_TRACE_ENABLED="true",i=!0,p.instances.forEach(e=>{e.isTrace&&(e.enabled=!0)})),this.enableDebug()}}},{"lru-cache":void 0,util:void 0}],12:[function(S,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const $=S("fs"),E=S("path"),r=S("util").inspect,C=S("node:module")["register"],L=S("node:url")["pathToFileURL"],{MessageChannel:I,isMainThread:f}=S("node:worker_threads"),w=S("./utils").default,T=global;var n=S("./utils/remapComments").default;w.remapComments=n;function F(e){let t="";"string"!=typeof(e=e||"")?(t=e.stack||e.message||e.toString&&e.toString()||"",e.message&&!~t.indexOf(e.message)&&(t=e.message+"\n"+t)):t=e,a(""+i+t+s)}function k(e){e&&l(""+i+e+s)}function P(){~process.listeners("uncaughtException").indexOf(c)||process.on("uncaughtException",c)}const o=JSON.stringify,i="###wms###",s="###wme###",a=process.stderr.write.bind(process.stderr),l=process.stdout.write.bind(process.stdout),R=(global.emitDiagnostic=function(e){e._diagnostic=1,e._p="###wpm###",k(o(e))},{send:function(e){k(e)}}),A=[],c=function(e,t){e&&"object"==typeof e&&e[r.custom]&&0===Object.keys(e).length&&(e=new Error(r(e))),A.length&&A[A.length-1]();if("string"==typeof e)F(e);else{var n="";e||F("");try{global.$_$tracer&&(e.stack||e.message)&&(n=o(global.$_$tracer.setAssertionData({actual:e.actual,expected:e.expected,showDiff:!0},{message:e.message,stack:e.stack,_p:"###wpm###"})))}catch(e){}"[object Object]"===(n=n||e&&(e.stack||e.message||e.diagnosticText||e.toString&&e.toString()||o(e))||"")&&e&&(n="Runtime error: "+o(e)),F(n||"")}};n=S("internal/util");const p=n.emitExperimentalWarning;n.emitExperimentalWarning=function(e){"Snapshot testing"!==e&&p.apply(this,arguments)};n=S("internal/options");const u=n.getOptionValue;n.getOptionValue=function(e){return"--experimental-test-snapshots"===e||("--test-update-snapshots"===e?T.$_$tracer.canUpdateSnapshots():"--test-only"===e?T.$_$tracer.hasIncludedTest:u.apply(this,arguments))};n=S("internal/test_runner/snapshot");n.SnapshotManager.prototype.emitExperimentalWarning=function(){};const d=n.SnapshotManager.prototype.createAssert;n.SnapshotManager.prototype.createAssert=function(){const o=this,i=d.apply(this,arguments);return function(){var e,t,n,r;return o.resolveSnapshotFile(),T.$_$tracer._expectedMatchSnapshotCall&&([e,t]=T.$_$tracer._expectedMatchSnapshotCall,delete T.$_$tracer._expectedMatchSnapshotCall,T.$_$tracer._matchSnapshotCalls||(T.$_$tracer._matchSnapshotCalls=[]),r=(r=this.fullName)+" "+(null!=(r=o.nameCounts.get(r))?r:1),n=w.normalizePath(E.relative(T.wallaby.localProjectRoot,o.snapshotFile)),T.$_$tracer._matchSnapshotCalls.push({fileId:e,snapshotCallRangeId:t,snapshotKey:r,snapshotPath:n})),i.apply(this,arguments)}},t.default=function(){if(f){const r=$.readFileSync,o=JSON.parse(r(process.env.WALLABY_TEST_RUN_DATA_FILE).toString()),u=S("./instrumentor").default,i=(P(),process.once("beforeExit",()=>{T.$_$tracer.complete(),T.$_$inspectorSession&&T.$_$inspectorSession.post("Profiler.stop",async(e,{profile:t})=>{e?F(JSON.stringify({type:"uncaughtException",err:e})):k(JSON.stringify({type:"profile",data:t}))})}),T.$_$receiver={onopen:()=>{},close:()=>{},send:e=>{k(e)}},T.$_$reuseableTracer=!0,S("./tracer"),T.$_$tracer._utils=w,Object.keys(o.globals).forEach(e=>{T[e]=o.globals[e]}),Object.keys(o.tracer).forEach(e=>{T.$_$tracer[e]=o.tracer[e]}),w.normalizePath(E.dirname(T.wallaby._localNodeModules))),s=w.normalizePath(T.wallaby._originalCacheRoot),a=e=>{-1!==e.indexOf("?")&&(e=e.substr(0,e.indexOf("?")));let t=w.normalizePath(w.normalizePath(e).replace(i,"").replace(s,""));return t="/"===t[0]?t.substr(1):t},l=process.argv[process.argv.length-1],d=a(l);var t=T.wallaby.tests.findIndex(e=>e===l)+1;T.$_$childSession=t,T.$_$entryFile=T.$_$testFiles.find(e=>e.path===l).id,T.$_$initialSpecId=1e5*T.$_$entryFile,T.$_$tracer._handleUncaughtException=P,T.$_$tracer._highPriorityReceiver=R,T.$_$tracer._beforeMatchSnapshot=(e,t)=>{T.$_$tracer._expectedMatchSnapshotCall=[e,t]},o.reportUnhandledPromises&&process.on("unhandledRejection",function(e){throw e});const y=[],v=[];let f=T.$_$tracer.initialSpecId();T.$_$tracer.nodeNativeEvent=(e,t)=>{switch(e){case"before:it":case"before:test":case"before:only":var n;3===t.length&&((n=t[1])&&n.skip?e="before:skip":n&&n.todo&&(e="before:todo"))}switch(e){case"before:suite":case"before:describe":return y.push(t[0]),t;case"after:suite":case"after:describe":return y.pop(),t;case"before:it":case"before:test":case"before:only":{const p=[...t];var r=p.findIndex(e=>"function"==typeof e);if(-1!==r){const u=p[r],d=t=>{const n=t.test;return t.test=(...e)=>{e=T.$_$tracer.nodeNativeEvent("before:test",[...e]);return n.apply(t,e)},{specId:f++,testPath:t.fullName.split(" > ")}},h=e=>0<v.length||!T.$_$tracer.hasSpecFilter()||T.$_$tracer.specFilter(e),m=(e,t,n)=>{var r=T.$_$tracer._spec,o=T.$_$tracer._specName,i=T.$_$tracer._specRangeStart,n=(T.$_$tracer.specStart(e,t.name,T.$_$entryFile,n,0<v.length),T.$_$tracer.specSyncStart(),(new T.$_$tracer._Date).getTime());return y.push(t.name),v.push(e),A.push(()=>{}),{previousSpec:r,previousSpecName:o,previousSpecRangeStart:i,startTime:n}},g=(e,t,n,r,o,i)=>{T.$_$tracer.specSyncEnd();var s=T.$_$tracer.specEnd();A.pop(),v.pop(),y.pop(),T.$_$tracer.result({id:e,timeRange:s,name:p[0],suite:[...t].slice(0,-1),status:"executed",time:(new T.$_$tracer._Date).getTime()-n,log:[],testFile:T.$_$tracer.entryFile(),parentTests:v}),T.$_$tracer._spec=r,T.$_$tracer._specName=o,T.$_$tracer._specRangeStart=i};2===u.length?p[r]=function(e,t){const{specId:n,testPath:r}=d(e);if(h(r)){const{previousSpec:i,previousSpecName:s,previousSpecRangeStart:a,startTime:l}=m(n,e,r);var o=e=>{t(e),g(n,r,l,i,s,a)};return A[A.length-1]=o,u.apply(this,[e,o])}k(JSON.stringify({id:n,type:"filteredTest",parentTests:v})),t()}:p[r]=async function(e){var{specId:t,testPath:n}=d(e);if(h(n)){var{previousSpec:r,previousSpecName:o,previousSpecRangeStart:i,startTime:s}=m(t,e,n);try{return await u.apply(this,[e])}finally{g(t,n,s,r,o,i)}}else k(JSON.stringify({id:t,type:"filteredTest",parentTests:v}))}}return p}case"before:todo":case"before:skip":var o,i,s,a,l,r=t[0],c=[...y,r];return(0<v.length||!T.$_$tracer.hasSpecFilter()||T.$_$tracer.specFilter(c))&&(o=f++,i=T.$_$tracer._spec,s=T.$_$tracer._specName,a=T.$_$tracer._specRangeStart,T.$_$tracer.specStart(o,r,T.$_$tracer.entryFile()||T.$_$entryFile,c,0<v.length),l=T.$_$tracer.specEnd(),T.$_$tracer.result({id:o,timeRange:l,name:r,suite:c.slice(0,-1),status:"before:skip"===e?"skipped":"todo",time:l,log:[],testFile:T.$_$tracer.entryFile()||T.$_$entryFile,parentTests:v}),T.$_$tracer._spec=i,T.$_$tracer._specName=s,T.$_$tracer._specRangeStart=a),t}return t};const{port1:c,port2:p}=new I,h=e=>T.$_$tracer._filePathToFileData[a(e)],m=function(r,o){r=h(r);if(r&&r.instrument){var e=Object.assign({},T.$_$tracer._hints);!r.test||e.allowIgnoringCoverageInTests||(delete e.ignoreCoverage,delete e.ignoreCoverageForFile),delete e.testFileSelection;let n;var i={code:o,map:w.getSourceMapFromCode(o)},s=(i.map&&(r.changeStart||r.logMarkers&&r.logMarkers.length||r.extractedComments&&!r.extractedComments.isCoverageIgnored||r.test)&&(n=new w.SourceMapConsumer(i.map)),w.mapTextPosition(r.changeStart&&r.changePosition,n)),a=r.logMarkers||[];let t;try{t=u(o,{file:r.id,test:r.test,fileName:E.basename(r.path),testFileChangeStart:s,hints:e,recordValues:global.$_$tracer._autoConsoleLog,captureConsoleLog:global.$_$tracer._captureConsoleLog,recordMatchSnapshotRanges:!0,preserveComments:global.$_$tracer._preserveComments,automaticTestFileSelection:r.test,logMarkers:a.map(e=>({originalRange:e.range,range:w.mapOriginalRangeToTransformed(n,e.range),changeId:e.id,traceId:e.traceId,expanded:e.expanded,new:e.new,exp:e.exp,action:e.action,logpoint:e.logpoint,inlineLogpoint:e.inlineLogpoint})),extractedComments:w.remapComments(r.extractedComments,o,n)})}catch(e){throw w.formatInstrumentationError(e,o,r.path)}d===r.path&&(T.$_$tracer.hasIncludedTest=t.hasIncludedTest),t.liveCommentLines&&null!==i&&i.map?(n=n||new w.SourceMapConsumer(i.map),t.liveCommentLines=Object.keys(t.liveCommentLines).map(e=>({line:parseInt(e,10),column:t.liveCommentLines[e]+1})).map(({line:e,column:t})=>w.mapTransformedRangeToOriginal(n,[e,t,e,t])).filter(e=>e&&e.length).map(e=>e[0])):t.liveCommentLines&&(t.liveCommentLines=Object.keys(t.liveCommentLines).map(e=>parseInt(e,10)).filter(e=>e).map(e=>e)),T.$_$tracer.sendTransformedFile({id:r.id,transformed:_.omit(i,"code"),instrumented:_.omit(t,"code","map"),lineMap:w.updateFileMap({},i.map?[i.map,t.map]:[t.map]),ts:r.ts,originalTs:r.originalTs,runnerCacheKey:r.runnerCacheKey,matchSnapshotRanges:t.matchSnapshotRanges&&t.matchSnapshotRanges.length&&n?t.matchSnapshotRanges.map(e=>w.mapTransformedRangeToOriginal(n,e)):t.matchSnapshotRanges,transformedTime:(new Date).toISOString(),usedLogpoints:a.filter(e=>e.logpoint).map(e=>e.id)}),t.testName=t.testNames[0],t.numberOfFunctions!==r.numberOfFunctions&&delete t.testName,!r.test||T.$_$traceContext&&T.$_$traceContext.test||(t.testName&&r.allowedToRunSingleTestOnly?("*"===T.$_$tests&&(T.$_$tests={}),(T.$_$tests[":?"]=T.$_$tests[":?"]||{})[":"+t.testName]="*"):T.$_$tests&&T.$_$tests[":?"]&&(T.$_$tests="*"));for(var s=w.docBlockComment(i.code).replace(/\r?\n|\r/g," "),l=(s&&(t.code=s+t.code),T.$_$coverage[r.id]||[]),c=T.$_$coverage[r.id]=[],p=0;p<t.ranges.length;p++)c[p]=l[p]||{};return t.code}};c.addEventListener("message",t=>{switch(t.data.type){case"load":try{var e=m(t.data.url,t.data.source);u||c.postMessage({type:"loadResult",error:void 0,idx:t.data.idx,result:{format:t.data.format,shortCircuit:!0,source:t.data.source}}),c.postMessage({type:"loadResult",error:void 0,idx:t.data.idx,result:{format:t.data.format,shortCircuit:!0,source:e}})}catch(e){c.postMessage({type:"loadResult",error:e,idx:t.data.idx,result:void 0})}break;case"log":console.log(t.data)}}),C(o.esmHook,{parentURL:L(__filename),data:{testRunData:o,port:p},transferList:[p]}),c.unref(),p.unref(),$.readFileSync=function(e){e=h(e);return null!=e&&e.inOriginalFilesCache?r(E.join(T.wallaby._originalCacheRoot,e.path),"utf8"):r.apply(this,arguments)};var t=S("module"),n=t.prototype;const g=n.require,x=(n.require=function(e){const n=g.call(this,...arguments);if("node:test"!==e)return n;{T.$_$profileRun&&n.before(async()=>{var e=await Promise.resolve().then(()=>S("inspector"));T.$_$inspectorSession=new e.Session,T.$_$inspectorSession.connect(),await new Promise(e=>{T.$_$inspectorSession.post("Profiler.enable",()=>{T.$_$inspectorSession.post("Profiler.start",()=>{e()})})})});var t,r;const o={};for([t,r]of Object.entries(n))o[t]="function"==typeof r?((n,r)=>function(...e){var t=global.$_$tracer.nodeNativeEvent("before:"+n,e);try{return r(...t)}finally{global.$_$tracer.nodeNativeEvent("after:"+n,e)}})(t,r):r;return["test","it"].forEach(e=>{var t=o[e];for(const e of Object.keys(n))t[e]=o[e]}),o.test}},w.patchModulesCode([{files:["@cspotcode/source-map-support/source-map-support.js"],replacements:[{from:"exports.install = function(options) {",to:"exports.install = function(options) { return;",optional:!0}]}]),t.prototype._compile);t.prototype._compile=function(e,t){var n=m(t,e);n&&(e=n);try{return x.call(this,e,t)}catch(e){throw!t.endsWith(".ts")||4!==T.wallaby.preloadModules.length||T.wallaby.swcPath||T.wallaby.tsNodePath||T.wallaby.tsxPath||T.wallaby.esbuildRegisterPath||(e.message="TypeScript compilation failed.\n\nTry installing `@swc-node/register`, `ts-node`, `tsx` or `esbuild-register` as a project dependency.\n\n"+e.message),e}},T.$_$receiver.onopen(),T.$_$tracer.initLoadingPhase();let e=!1;for(const b of T.wallaby.preloadModules)switch(b){case"@swc-node/register":!e&&T.wallaby.swcPath&&(S(E.join(T.wallaby.swcPath,"index.js")),e=!0);break;case"ts-node/register":!e&&T.wallaby.tsNodePath&&(S(E.join(T.wallaby.tsNodePath,"register/index.js")),e=!0);break;case"tsx/cjs":!e&&T.wallaby.tsxPath&&(process.env.ESBUILD_WORKER_THREADS="0",S(E.join(T.wallaby.tsxPath,"dist/cjs/api/index.cjs")).register(),e=!0);break;case"esbuild-register":!e&&T.wallaby.esbuildRegisterPath&&(process.env.ESBUILD_WORKER_THREADS="0",S(E.join(T.wallaby.esbuildRegisterPath,"dist/node.js")).register(),e=!0);break;default:w.tryRequireModuleWithPathFrom(T.wallaby.localProjectRoot,b)}T.$_$tracer.start(()=>{})}else{n=(new I)["port1"];n.addEventListener("message",e=>{})}}},{"./instrumentor":10,"./tracer":14,"./utils":15,"./utils/remapComments":16,fs:void 0,inspector:void 0,"internal/options":void 0,"internal/test_runner/snapshot":void 0,"internal/util":void 0,module:void 0,"node:module":void 0,"node:url":void 0,"node:worker_threads":void 0,path:void 0,util:void 0}],13:[function(e,t,n){const r=e("fs"),o=e("path");try{Error.stackTraceLimit=80}catch(e){}process.env&&process.env.NODE_MODULES_OVERRIDE&&(console.warn(" ---- Using node modules from: "+process.env.NODE_MODULES_OVERRIDE+" ---- "),e("../../../../lib//utils").default.nodeModulesLookup(function(e){e.unshift(process.env.NODE_MODULES_OVERRIDE)})),function e(t){var n=o.join(t,"node_modules",".pnpm","node_modules"),n=(r.existsSync(n)&&(process.env.NODE_PATH?-1===process.env.NODE_PATH.indexOf(n)&&(process.env.NODE_PATH+=("win32"===process.platform?";":":")+n):process.env.NODE_PATH=n),o.dirname(t));n!==t&&e(n)}(process.cwd()),process.env&&(process.env.WALLABY_ENTRY=!0),process.env.WALLABY_ENV=!0,e("../../../../lib/nodeNativeInitializer").default()},{"../../../../lib//utils":15,"../../../../lib/nodeNativeInitializer":12,fs:void 0,path:void 0}],14:[function(e,t,n){for(var r,b=function(){return this}()||global,o=["alert","confirm","prompt"],i=0;i<o.length;i++){var s=o[i];b[s]&&~b[s].toString().indexOf("[native code]")&&(b[s]=function(){})}b.addEventListener&&(b.addEventListener("beforeunload",function(){if(!(b.$_$tracer&&b.$_$tracer._finished||b.navigator&&b.navigator.userAgent&&!/PhantomJS/.test(b.navigator.userAgent)&&!/Electron/.test(b.navigator.userAgent)&&!b.$_$tracer._startRequested)&&b.$_$throwOnBeforeunload)throw new Error("One of your tests is trying to unload window object.")}),b.$_$reportUnhandledPromises)&&b.addEventListener("unhandledrejection",function(e){var t;if(e&&e.reason)throw t=new Error,e.reason.stack&&(t.stack=e.reason.stack),t.message="Unhandled promise rejection: "+(e.reason.message||e.reason),t});try{b.Error.stackTraceLimit=80}catch(e){}function a(){var n=this;n._noOp=function(){},n._maxLogEntrySize=b.$_$maxLogEntrySize||16384,n._maxTraceSteps=b.$_$maxTraceSteps||999999,n._maxTraceStepsForWatchExpressionPrefetch=void 0!==b.$_$maxTraceStepsForWatchExpressionPrefetch?b.$_$maxTraceStepsForWatchExpressionPrefetch:10,n._evaluatedExpressionPerRangeLimit=1e4,n._evaluatedProxyExpressionPerRangeLimit=1e4,n._undefined=b.undefined,n._setTimeout=b.setTimeout,n._Date=b.Date,n._Error=b.Error,n._Symbol=b.Symbol,n._JSONStringify=JSON.stringify,n._XMLHttpRequest=b.XMLHttpRequest,n._regExpToString=RegExp.prototype.toString,n._dateToString=Date.prototype.toString,n._HTMLAllCollection=b.HTMLAllCollection,n._getOwnPropertyNames=Object.getOwnPropertyNames,n._getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,n._pauseAfterSingleTestExecution=b.navigator&&b.navigator.userAgent&&/PhantomJS/.test(b.navigator.userAgent),n._seq=0,n._replacedConsoleLog=b.console.log=function(){n._suppressConsoleLog||n._doWhenReceiverIsReady(function(e){n._log.apply(n,e)},arguments)},b.console.warn=function(){n._doWhenReceiverIsReady(function(e){n._warn.apply(n,e)},arguments)},b.console.error=function(){n._doWhenReceiverIsReady(function(e){n._error.apply(n,e)},arguments)},b.console.dir=function(){n._doWhenReceiverIsReady(function(e){n._dir.apply(n,e)},arguments)},b.console.debug=function(){n._doWhenReceiverIsReady(function(e){n._debug.apply(n,e)},arguments)},b.console.info=function(){n._doWhenReceiverIsReady(function(e){n._info.apply(n,e)},arguments)},n._receiver=b.$_$receiver||new b.WebSocket("ws://"+(b.$_$receiverHost||"127.0.0.1")+":"+b.$_$receiverPort),n._onReceiverReady=[function(){n._receiverReady=!0}],n._receiver.onopen=function(){for(var t=0,e=n._onReceiverReady.length;t<e;t++)try{n._onReceiverReady[t]()}catch(e){if(b.$_$reuseableTracer||void 0===n._onStartIndex||!(t<n._onStartIndex))throw e;n._globalBrowserError(e.message,void 0,void 0,void 0,e)}},n._receiver.onerror=function(e){throw new Error("Sandbox receiver error: "+e.message)},n.reset()}var S,d,l,c,p=/%[sdjc%]/g,u=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/,h=/^(0|[1-9][0-9]*)$/,m=/'([^\\']|\\')*'/;"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){function t(){return r.apply(this instanceof o?this:e||{},n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),r=this,o=function(){};return o.prototype=this.prototype||{},t.prototype=new o,t}),a.prototype={setGlobalErrorHandler:function(){var e=this;b.$_$reuseableTracer||(b.onerror=function(){e._globalBrowserError.apply(e,arguments)})},_globalBrowserError:function(){var t=this;t._doWhenReceiverIsReady(function(e){t._sendBrowserGlobalError.apply(t,e)},arguments)},reportDeclarationError:function(){var t=this;t._doWhenReceiverIsReady(function(e){t._sendDeclarationError.apply(t,e)},arguments)},reportHighPriorityGlobalErrorObject:function(e){var t=this;t._doWhenReceiverIsReady(function(){t._sendWithHighPriority("globalError",e)})},reportGlobalErrorObject:function(){var t=this;t._doWhenReceiverIsReady(function(e){t._sendGlobalErrorObject.apply(t,e)},arguments)},reportSnapsImportError:function(e){var t=this;t._doWhenReceiverIsReady(function(e){t._sendGlobalErrorObject.apply(t,e)},[{message:e.message,stack:e.stack,keepSessionActive:!0}])},reportSnapsProgramScopeError:function(e){var t=this;t._doWhenReceiverIsReady(function(e){t._sendGlobalErrorObject.apply(t,e)},[{message:e.message,stack:e.stack,keepSessionActive:!0}])},sendTransformedFile:function(){var t=this;t._doWhenReceiverIsReady(function(e){t._sendTransformedFile.apply(t,e)},arguments)},_sendTransformedFile:function(e){this._send("transformedFile",e)},sendFileChange:function(){var t=this;t._doWhenReceiverIsReady(function(e){t._sendFileChange.apply(t,e)},arguments)},_sendFileChange:function(e){this._send("fileChange",e)},initialSpecId:function(){return b.$_$initialSpecId},setInitializeResult:function(e){this._initializeResult=e},start:function(e){var t,n=this;!e&&(n._delayStart||n._startRequested&&!b.$_$reuseableTracer)||(n.reset(),e?(n._onStart=e,n._patchFrameworks()):(t=function(){if(e)n._onStart=e,n._patchFrameworks();else{if(!n._onStart)throw new Error("Missing tracer start subscription");n._startRequested=!0,n._receiverReady?n._onStart():(n._onReceiverReady.push(n._onStart),n._onStartIndex=n._onReceiverReady.length-1)}},n._initializeResult&&n._initializeResult instanceof Promise?(n._initializeResult.then(t).catch(function(e){e.message="Uncaught Error in Wallaby `setup` function: "+e.message,n._globalBrowserError(e.message,void 0,void 0,void 0,e)}),delete n._initializeResult):t()))},isInitialized:function(){return!!b.$_$coverage},statement:function(e,t){b.$_$coverage[e][t][this._spec]=r++},scopeStart:function(e){this._fileEncounter[e]||(this._fileEncounterSequence.push(e),this._fileEncounter[e]=1)},programScopeStartLoading:function(e){this._testFileIds[e]&&(this._resetFileData(),b.$_$traceContext)&&b.$_$traceContext.test&&(e===b.$_$traceContext.test[0]?this._setTraceRecordMode():this._resetTracerMode()),this.scopeStart(e)},programScopeEndLoading:function(e){this._testFileIds[e]&&(this._saveCurrentTestLoadingSequence(),this._resetFileData())},_saveCurrentTestLoadingSequence:function(){this._fileEncounterSequence.length&&this._testLoadingSequence.push(this._fileEncounterSequence.slice())},entryFile:function(){return this._fileEncounterSequence[0]},started:function(e){(e=e||{}).loadingSequence=this._testLoadingSequence.slice(),this._resetLoadingData(),this._resetFileData(),b.$_$wp=this._original_$_$wp,b.$_$wpe=this._original_$_$wpe,this._send("started",e)},specFileTests:function(e){this._send("specFileTests",e)},specStart:function(e,t,n,r,o){var i=this,s="string"==typeof t?t:i._inspect(t,2,10);this._doWhenReceiverIsReady(function(){i._sendWithHighPriority("preTest",{specName:s,specFileId:n,path:r})}),this._spec=e,this._specName=s,o||this._resetFileData(),b.$_$trace&&(b.$_$trace.tests[e]={start:b.$_$trace.sequence.length})},specSyncStart:function(){var e;this._specRangeStart=r,b.$_$trace&&this._spec&&(e=b.$_$trace.tests[this._spec])&&(e.start=b.$_$trace.sequence.length)},specSyncEnd:function(){this._specRangeEnd=r-1},specEnd:function(){b.$_$trace&&(e=b.$_$trace.tests[this._spec])&&(e.end=Math.max(b.$_$trace.sequence.length-1,e.start),e.start>b.$_$trace.sequence.length-1)&&delete b.$_$trace.tests[this._spec],this._spec=0,delete this._specName;var e=this._specRangeStart,t=this._specRangeEnd;return this._specRangeStart=0,this._specRangeEnd=0,[e,t||r]},needToNotifySingleTestRun:function(){if(this._paused||this._onResumed||!this.hasSpecFilter()||b.$_$reuseableTracer||!this._pauseAfterSingleTestExecution)return!1;for(var e=b.$_$tests;"*"!==e;){var t=Object.keys(e);if(1!=t.length)return!1;e=e[t[0]]}return!0},notifySingleTestAfterEach:function(e){this._paused||this._onResumed||b.$_$reuseableTracer?e():(this._paused=!0,this._onResumed=e,this._send("resume"))},resume:function(){this._paused&&(this._paused=!1,this._onResumed)&&(this._onResumed(),delete this._onResumed)},paused:function(){return this._paused},hasSpecFilter:function(){return!!b.$_$tests&&"*"!==b.$_$tests},specFilter:function(e){var t=b.$_$tests[":?"];if(t&&t[":"+e[e.length-1]])return!0;for(var n=b.$_$tests,r=0,o=e.length;r<o;r++){if(!(n=n[":"+e[r]]))return!1;if("*"===n)return!0}return!1},globalSetupComplete:function(e){this._send("globalSetupComplete",e)},complete:function(e){b.$_$coverage&&(this._sendCoverageAndTimeMeasures(),b.$_$trace&&(b.$_$trace.values={},this._send("trace",{trace:b.$_$trace}),delete b.$_$trace,this._resetTracerMode()),this._send("complete",e),b.$_$reuseableTracer||(this._receiver.close(),this._finished=!0))},intermediateComplete:function(){this._sendCoverageAndTimeMeasures()},_sendCoverageAndTimeMeasures:function(){if(b.$_$coverage){for(var e=0,t=b.$_$coverage.length;e<t;e++){var n=b.$_$coverage[e];n&&n.length&&this._send("coverage",{id:e,ranges:n})}var r=Object.keys(S._autoTimeHits);for(e=0,t=r.length;e<t;e++){var o,i,s,a,l,c,p,u=S._autoTimeHits[r[e]];u.fileId&&(u.logMarkerContext&&(o=u.logMarkerContext.changeId,i=u.logMarkerContext.traceId,s=u.logMarkerContext.traceStep,a=u.logMarkerContext.permanent,l=u.logMarkerContext.preciseTraceStep,c=u.logMarkerContext.initialTraceId),(i||o||a)&&(p=p||{},a)&&(p.permanent=a),(i||o)&&(i&&(p.traceId=i),o&&(p.changeId=o),p.traceStep=s,p.preciseTraceStep=l,p.initialTraceId=c),this._sendLog("autoLog",{content:u.value?this._formatTime(u.value)+"ms":"Σ "+this._formatTime(u.total)+"ms, μ "+this._formatTime(u.total/u.n)+"ms, ⋀ "+this._formatTime(u.min)+"ms, ⋁ "+this._formatTime(u.max)+"ms",format:"raw"},u.context,u.fileId,u.rangeId,p))}}},_formatTime:function(e){return e.toFixed(3)},result:function(e){e.files=this._fileEncounterSequence,e.matchSnapshotCalls=this._matchSnapshotCalls,delete this._matchSnapshotCalls,b.$_$reuseableTracer&&this._sendWithHighPriority("postTest"),this._send("test",e)},_patchFrameworks:function(){var e,t,r,n,o,i,s,a=this;a._patchedFrameworks||b.$_$reuseableTracer||(a._patchedFrameworks=!0,e=b.requirejs&&"function"==typeof b.requirejs.load,t=b.System&&(b.System.fetch||b.System.import),a._shouldReportProgramScope=a._shouldReportProgramScope||e||t,e&&(r=b.requirejs.load,b.requirejs.load=function(e,t,n){return r.call(this,e,t,a._urlWithFileData(n))}),t&&(n=b.System.fetch,b.System.fetch=function(){var e=arguments[0]&&arguments[0].address;return e&&(arguments[0].address=a._urlWithFileData(e)),n.apply(this,arguments)},(o=b.fetch)&&(b.fetch=function(){var e=arguments[0];return e&&(arguments[0]=a._urlWithFileData(e)),o.apply(this,arguments)}),i=b.System.import,b.System.import=function(){var e=arguments[0];return e&&(arguments[0]=a._urlWithFileData(e)),i.apply(this,arguments)}),a._XMLHttpRequest&&(s=a._XMLHttpRequest.prototype.open,a._XMLHttpRequest.prototype.open=function(e,t){arguments[1]=a._urlWithFileData(t),s.apply(this,arguments)}),a._Error&&!a._Error.captureStackTrace&&b.navigator&&b.navigator.userAgent&&/PhantomJS\/2/.test(b.navigator.userAgent)&&(a._Error.captureStackTrace=function(){}))},_urlWithFileData:function(e){if(!e||!~e.indexOf("wallabyFileId")){for(var t=[],n=e.replace(/\\/g,"/").split("/"),r=0;r<n.length;r++)"."!==n[r]&&(".."===n[r]&&t.length&&".."!==t[t.length-1]?t.pop():t.push(n[r]));e=t.join("/"),e=this._appendFileData(e)}return e},_appendFileData:function(e){var t="/"===e.charAt(0)?e.substr(1):e,n=b.location&&b.location.host&&e.indexOf(b.location.host),n=(0<=n&&(t=t.substr(n+b.location.host.length+1)),e.lastIndexOf("?")),t=(t=0<=n?t.substring(0,n):t)&&this._getFileMetadata(t);return t?e+(~n?"&":"?")+t.ts+"&wallabyFileId="+t.id:e},_getFileMetadata:function(e){return b.$_$files[e]||b.$_$files[e.split("\\").join("/")]},_doWhenReceiverIsReady:function(e,t){var n=this,r=Date.now();n._receiverReady?(n.receiverReadyScheduleTime=r,e(t),delete n.receiverReadyScheduleTime):n._onReceiverReady.push(function(){n.receiverReadyScheduleTime=r,e(t),delete n.receiverReadyScheduleTime})},_log:function(){this._sendLog("log",this._format.apply(this,arguments),void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime,this._currentStack())},_warn:function(){this._sendLog("warn",this._format.apply(this,arguments),void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime)},_error:function(){this._sendLog("error",this._format.apply(this,arguments),void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime)},_dir:function(e){this._sendLog("dir",{content:this._inspect(e),format:"raw"},void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime)},_debug:function(e){this._sendLog("debug",{content:this._inspect(e),format:"raw"},void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime)},_info:function(e){this._sendLog("info",this._format.apply(this,arguments),void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime)},_debugLog:function(){this._sendLog("debugLog",this._format.apply(this,arguments),void 0,void 0,void 0,void 0,void 0,void 0,this.receiverReadyScheduleTime)},_sendBrowserGlobalError:function(e,t,n,r,o){e=e&&e.toString()||"",t=t&&t.toString()||"",(n=n&&n.toString()||"")&&(r=0<=r&&r.toString()||"")&&(n+=":"+r),this._send("globalError",{message:e,stack:o&&o.stack?o.stack:e+"\nat "+t+":"+n})},_sendDeclarationError:function(e){this._send("globalError",{message:e.message,stack:e.stack,declaration:!0})},_sendRunnerError:function(e){this._send("globalError",{message:e.message,stack:e.stack,runner:!0})},_sendGlobalErrorObject:function(e){this._send("globalError",e)},setEnvGlobal:function(e){this._envGlobal=e},resetEnvGlobal:function(){delete this._envGlobal},debugLog:function(){var t=this;t._doWhenReceiverIsReady(function(e){t._debugLog.apply(t,e)},arguments)},log:function(){var g,f,_=this,e=(b.$_$trace&&b.$_$traceContext&&(g="*",f=b.$_$trace.sequence.length>_._maxTraceSteps?void 0:b.$_$trace.sequence.length-1),_._replacedConsoleLog!==b.console.log);if(e||_._envGlobal){for(var t=[],n=arguments.length-3,r=0;r<n;r++)t.push(arguments[r]);_._suppressConsoleLog=!0,_._envGlobal&&_._envGlobal.console.log.apply(_._envGlobal.console,t),e&&b.console.log.apply(console,t),_._suppressConsoleLog=!1}_._doWhenReceiverIsReady(function(e){_._loggingValue=!0;for(var t=[],n=e.length-3,r=0;r<n;r++)t.push(e[r]);var o,i,s=e[n],a=e[1+n],l=e[2+n],c=a+","+l,p=_._rangeHits(c),u=p.rangeConsoleHits,p=p.rangeConsoleHitsOfSpec,d=u.count,h=p.count,m=1<t.length?t:t[0];d<_._evaluatedExpressionPerRangeLimit?(i=_._formattingOpts(c,{depth:b.$_$logLimits.inline.depth,elements:b.$_$logLimits.inline.elements,resolveGetters:b.$_$resolveGetters}),o=_._evaluateExpressions(_._expressionId(a,c,h,d),m,s,void 0,void 0,void 0,void 0,i)):d===_._evaluatedExpressionPerRangeLimit&&(i=_._formattingOpts(c,{depth:b.$_$logLimits.inline.depth,elements:b.$_$logLimits.inline.elements,resolveGetters:b.$_$resolveGetters}),o=_._evaluateExpressions(_._expressionId(a,c,h,d),m,s,new Error("Only the first "+d+" values are evaluated"),void 0,void 0,void 0,i)),u.count++,p.count++,o&&g&&(o.traceId=g,o.traceStep=f),o&&_._sendLog("log",{},s,a,l,o),_._loggingValue=!1},arguments)},_rangeHits:function(e){var t=this._consoleHits[e],e=(t||(this._consoleHits[e]=t={count:0,specHits:{}}),t.specHits[this._spec]);return e||(t.specHits[this._spec]=e={count:0}),{rangeConsoleHits:t,rangeConsoleHitsOfSpec:e}},canUpdateSnapshots:function(){return this._updateSnapshotsRun},_expressionId:function(e,t,n,r,o){var i=(this.entryFile()||"").toString(),t=t+","+r+(i===(e=e.toString())?"":","+i);return o&&(t+="#"+o.overallHitCount),t},_expressionIdV2:function(e,t,n,r,o){var i=(this.entryFile()||"").toString(),t=t+","+n+(i===(e=e.toString())?"":","+i);return o&&(t+="#"+o.specHitCount),t},inspectAssertionValue:function(e){return this._inspect(e,8,1e3,!0,!0,!0)},setAssertionData:function(e,t){try{e.actual||e.expected||!e.matcherResult||((e=e.matcherResult).showDiff="toEqual"===e.name);var n=Object.prototype.toString.call(e.actual);!0===e.showDiff&&n==Object.prototype.toString.call(e.expected)&&void 0!==e.expected&&"[object Boolean]"!==n&&"[object Number]"!==n&&"[object Function]"!==n&&("string"!=typeof e.actual&&(e.actual=this.inspectAssertionValue(e.actual),e.expected=this.inspectAssertionValue(e.expected)),t.actual=e.actual,t.expected=e.expected),"UnexpectedError"===e.name&&e.getErrorMessage&&(t.formattedDiff=e.getErrorMessage("ansi").toString()),e.actual&&e.actual.stack&&"string"==typeof e.actual.stack&&(t.stack=t.stack||"",t.stack+="\nFrom actual error object:\n"+e.actual.stack)}catch(e){}return t},diff:function(t,n,r,o,i){var s=this;return s._doWhenReceiverIsReady(function(){var e=s.setAssertionData({showDiff:!0,expected:t,actual:n},{});s._sendLog("diff",{content:""},r,o,i,void 0,e.expected,e.actual)},arguments),n},_sendLog:function(e,t,n,r,o,i,s,a,l,c){var p=t.content?t.content.length:0;t.content&&p>this._maxLogEntrySize&&(t.content=t.content.slice(0,this._maxLogEntrySize)+"...\n(truncated, total length: "+p+")",t.format="raw"),this._send("console",{type:e,text:t.content,format:t.format,prefix:t.prefix,valueBag:i,spec:this._spec,file:r,range:o,context:n,expected:s,actual:a,time:l||Date.now(),stack:c})},_send:function(e,t){this._receiver.send(this._JSONStringify(this._createMessage(e,t)))},_createMessage:function(e,t){return this._seq++,{type:e,data:t,session:b.$_$session,childSession:b.$_$childSession,seq:this._seq}},_sendWithHighPriority:function(e,t){var n;this._highPriorityReceiver?((n=this._createMessage(e,t))._p="###wpm###",this._highPriorityReceiver.send(this._JSONStringify(n)+"\n")):this._send(e,t)},_resetLoadingData:function(){this._testLoadingSequence=this._safeObject([])},_resetFileData:function(){this._fileEncounterSequence=this._safeObject([]),this._fileEncounter=this._safeObject([])},reset:function(){var e=this;r=1,e._consoleHits={},e._consoleProxyHits={},delete e._proxyCache,e._autoTimeHits={},e._logStats={},e._spec=0,delete e._specName,e._specRangeStart=0,e._specRangeEnd=0,e._stackDepth=0,e._functionCallId=0,e._resetFileData()},_safeObject:function(e){return e.toJSON=this._undefined,e},_format:function(e){var t=b.$_$logLimits.inline.depth,n=b.$_$logLimits.inline.elements,r=b.$_$resolveGetters;if("string"!=typeof e){for(var o=[],i=0;i<arguments.length;i++)o.push(this._inspect(arguments[i],t,n,!1,!1,r));return{content:o.join(" ")}}i=1;for(var s=arguments,a=s.length,l=1===a?e:String(e).replace(p,function(e){if("%%"===e)return"%";if(a<=i)return e;switch(e){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":return JSON.stringify(s[i++]);case"%c":return i++&&"";default:return e}}),c=s[i];i<a;c=s[++i])l+=null===c||"object"!=typeof c?" "+c:" "+this._inspect(c,t,n);return{content:"'"+(l||"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",format:"raw"}},_inspect:function(e,t,n,r,o,i){r={seen:[],showHidden:!1,hideTypes:r,depth:t||b.$_$logLimits.inline.depth,stylize:function(e){return e},maxElementsPerLevel:n||b.$_$logLimits.inline.elements,customInspect:b.$_$reuseableTracer&&this._nodeUtil,sortProperties:!!o,resolveGetters:!!i};return this._formatValue(r,e,r.depth)},_maybeCustomInspect:function(e){var t;return!b.$_$reuseableTracer||!this._nodeUtil||"function"!=typeof(t=(t=this._nodeUtil.inspect&&this._nodeUtil.inspect.custom&&e[this._nodeUtil.inspect.custom])||e.inspect===this._nodeUtil.inspect||"function"!=typeof e.inspect?t:e.inspect)||t===this._nodeUtil.inspect||e.constructor&&e.constructor.prototype===e?void 0:t},_customInspect:function(e,t,n){var r=this._maybeCustomInspect(t);if(r){r=r.call(t,n,e);if(r!==t)return"string"!=typeof r?this._formatValue(e,r,n):r}},_formatValue:function(t,n,r){var o=this,e=this._formatPrimitive(t,n);if(e)return e;e=this._customInspect(t,n,r);if(e)return e;var e=Object.keys(n),i=this._arrayToHash(e),s=(t.showHidden&&(e=Object.getOwnPropertyNames(n)),t.sortProperties&&e.sort(),this._getOwnPropertySymbols(n));if(s.length&&(t.showHidden||"function"!=typeof n.propertyIsEnumerable||(s=s.filter(function(e){return n.propertyIsEnumerable(e)})),e=e.concat(s)),0===e.length){if("function"==typeof n)return s=n.name?": "+n.name:"",t.stylize("[λ"+s+"]","special");if(this._isRegExp(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(this._isDate(n))return t.stylize(Date.prototype.toString.call(n),"date");if(this._isBigInt(n))return n.toString()+"n";if(this._isError(n))return this._formatError(n)}var a,s="",l=!1,c=!1,p=!1,u=["{","}"],d=n&&n.constructor&&"string"==typeof n.constructor.name&&n.constructor.name||void 0;if("Object"!==d&&!t.hideTypes||(d=void 0),this._isArray(n)?(l=!(d=void 0),u=["[","]"]):this._isSet(n)?c=!0:this._isMap(n)&&(p=!0),"function"==typeof n&&(s=" [λ"+(n.name?": "+n.name:"")+"]"),this._isRegExp(n)&&(s=" "+RegExp.prototype.toString.call(n)),this._isDate(n)&&(s=" "+Date.prototype.toUTCString.call(n)),""===(s=this._isError(n)?" "+this._formatError(n):s)&&d&&(u[0]=d+("String"!==d&&"Number"!==d&&"Boolean"!==d||"function"!=typeof n.valueOf?"":" "+this._formatPrimitive(t,n.valueOf()))+" "+u[0]),l||p||c||(this._isGenerator(n)?s=" [Generator] ":this._isIterator(n)&&(s=" [Iterator] ")),this._nodeUtil&&this._nodeUtil.inspect&&this._looksLikePromise(n))return this._nodeUtil.inspect(n);if(!(0!==e.length||l&&0!==n.length||c||p))return u[0]+s+u[1];if(r<0)return this._isRegExp(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);d=!1;e.length>t.maxElementsPerLevel&&(e.length=t.maxElementsPerLevel,l&&(n=n&&n.slice(0,t.maxElementsPerLevel)),d=!0);try{a=l?this._formatArray(t,n,r,i,e):c?this._formatSet(t,n,r,i,e,d):p?this._formatMap(t,n,r,i,e,d):e.map(function(e){return o._formatProperty(t,n,r,i,e,l)})}catch(e){a=[]}return d&&a.push("..."),t.seen.pop(),this._reduceToSingleString(a,s,u)},_isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===this._objectToString(e)},_isSet:function(e){return!!(e&&b.Set&&"[object Set]"===this._objectToString(e)&&e.forEach)},_isMap:function(e){return!!(e&&b.Map&&"[object Map]"===this._objectToString(e)&&e.forEach)},_isIterator:function(e){return!!(e&&b.Symbol&&b.Symbol.iterator&&"function"==typeof e[b.Symbol.iterator])},_isGenerator:function(e){return!!(e&&b.Symbol&&b.Symbol.toStringTag&&"Generator"===e[b.Symbol.toStringTag])},_isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===this._objectToString(e)},_isDate:function(e){return"object"==typeof e&&"[object Date]"===this._objectToString(e)},_isBigInt:function(e){return"bigint"==typeof e},_isError:function(e){return"object"==typeof e&&("[object Error]"===this._objectToString(e)||e instanceof Error)},_objectToString:function(e){return Object.prototype.toString.call(e)},_isNegativeZero:function(e){return 1/e===Number.NEGATIVE_INFINITY},_reduceToSingleString:function(e,t,n){return 60<e.reduce(function(e,t){return e+t.length+1},0)?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]},_formatPrimitive:function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return!t&&this._isNegativeZero(t)?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return this._Symbol&&this._Symbol.prototype.toString.call(t)}if(null===t)return e.stylize("null","null")},_formatError:function(e){return"["+Error.prototype.toString.call(e)+"]"},_formatSet:function(t,e,n,r,o,i){var s=this,a=[];e.forEach(function(e){a.length>t.maxElementsPerLevel||(e=s._formatValue(t,e,null===n?null:n-1),a.push(e))}),!i&&a.length>t.maxElementsPerLevel&&a.push("...");for(var l=0;l<o.length;l++)a.push(s._formatProperty(t,e,n,r,o[l],!1));return a},_formatMap:function(r,e,o,t,n,i){var s=this,a=[];e.forEach(function(e,t){var n;a.length>r.maxElementsPerLevel||(n=s._formatValue(r,t,t=null===o?null:o-1),n=(n+=" => ")+s._formatValue(r,e,t),a.push(n))}),!i&&a.length>r.maxElementsPerLevel&&a.push("...");for(var l=0;l<n.length;l++)a.push(s._formatProperty(r,e,o,t,n[l],!1));return a},_formatArray:function(t,n,r,o,e){for(var i=this,s=[],a=0,l=n.length;a<l;++a)this._hasOwnProperty(n,String(a))?s.push(this._formatProperty(t,n,r,o,String(a),!0)):s.push("");return e.forEach(function(e){e.toString().match(/^\d+$/)||s.push(i._formatProperty(t,n,r,o,e,!0))}),s},_formatProperty:function(e,t,n,r,o,i){var s,a,t=!e.resolveGetters&&Object.getOwnPropertyDescriptor(t,o)||{value:t[o]};if(t.get?a=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(a=e.stylize("[Setter]","special")),this._hasOwnProperty(r,o)||(s="["+o.toString()+"]"),a||(e.seen.indexOf(t.value)<0?-1<(a=null===n?this._formatValue(e,t.value,null):this._formatValue(e,t.value,n-1)).indexOf("\n")&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),void 0===s){if(i&&o.match(/^\d+$/))return a;s=this._propertyName(o),s=e.stylize(s,"string")}return s+": "+a},_arrayToHash:function(e){var t={};return e.forEach(function(e){t[e]=!0}),t},_hasOwnProperty:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_getOwnPropertySymbols:function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]},_propertyName:function(e){return e.match(/^\d+$/)?e:(e=JSON.stringify(""+e)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?e.substr(1,e.length-2):e.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")},_evaluate:function(e,t,n,r,o,i){var s={};try{var a,l,c=n||{};c.props=c.props!==this._undefined?c.props:100,c.sortProps=c.sortProps!==this._undefined&&c.sortProps,c.elements=(c.elements!==this._undefined?c:b.$_$logLimits.inline).elements,c.depth=(c.depth!==this._undefined?c:b.$_$logLimits.inline).depth,c.strLength=c.strLength!==this._undefined?c.strLength:b.$_$logLimits.values.default.stringLength,c.expId=c.expId||r,c.rootExpression=t,c.autoExpand=c.autoExpand!==this._undefined&&c.autoExpand,c.autoExpandPreviousObjects=[],c.autoExpandPropertyCount=0,c.autoExpandLimit=c.autoExpandLimit!==this._undefined?c.autoExpandLimit:b.$_$logLimits.values.autoExpand.elements,c.autoExpandMaxDepth=c.autoExpandMaxDepth!==this._undefined?c.autoExpandMaxDepth:b.$_$logLimits.values.autoExpand.depth,c.resolveGetters=c.autoExpand||b.$_$resolveGetters,c.node={current:this._undefined,parent:this._undefined,index:0},c.level=0,c.maxLogEntryStringSize=this._maxLogEntrySize,c.estimatedLogEntryStringSize=0,o?(a={error:o.message},this._processTreeNodeResult(a,c),s.data=a):(s.data=this._traverseObject({},e,c,c.expressionsToEvaluate||{}),this._isPrimitiveType(this._type(e))||this._isUndefined(e)||null===e||!this._maybeCustomInspect(e)||(s.data.customInspect=this._inspect(e)),this._suppressCallStackEval||!(s.data.expandable&&s.data.props&&s.data.props.length)&&s.data.expandable||(l={id:s.data.id+",cs",expandable:!0,callStackNode:!0,label:{name:"Call Stack"},disallowToCopyPath:!0,disallowToCopyData:!0,queryPath:s.data.queryPath.slice().concat(["_s_."])},s.data.expandable||(s.data.expandable=!0,s.data.props=[]),s.data.props.unshift(l),c.expressionsToEvaluate&&c.expressionsToEvaluate["_s_."]&&(l.callStack={stack:this._currentStack(),replaceFirstEntryLine:!c.proxyValue})),this._specName&&!c.proxyValue&&s.data&&s.data.label&&s.data.label.value&&(s.data.label.value+=" ("+this._specName+")"))}catch(e){c.node=c.node||{};n={error:'Error while evaluating "'+t+'": '+(e&&e.message||"")};this._processTreeNodeResult(n,c),s.data=n}return s},_addProperty:function(o,i,s,a,l,c,p,u){var d=this;return function(e){var t=l.node.current,n=l.node.index,r=l.node.parent;l.node.parent=t,l.node.index="number"==typeof a?a:e,o.push(d._property(i,s,a,l,c,p,u)),l.node.parent=r,l.node.index=n}},_addObjectProperty:function(o,e,i,s,a,l,c,p,u){var d=this;return e["_p_"+a.toString()]=!0,function(e){var t=l.node.current,n=l.node.index,r=l.node.parent;l.node.parent=t,l.node.index=e,o.push(d._property(i,s,a,l,c,p,u)),l.node.parent=r,l.node.index=n}},_traverseObject:function(t,o,i,e){var s=this,n=i.autoExpand;try{i.level++,i.autoExpand&&i.autoExpandPreviousObjects.push(o);var r,a,l,c,p=[],u=[],d=this._type(o),h="array"===d,m=this._isMap(o),g=!("array"===d||"Error"===d),f=!1,_="function"===d,y=this._isPrimitiveType(d),v=this._isPrimitiveWrapperType(d),x=y||v,b={},S=0,$=!1,E=/^(([1-9]{1}[0-9]*)|0)$/;if(i.depth){if(h){var C=o.length,L=e.ranges||i.ranges;if(L&&L.length===C)f=!0,p=L.props,this._traverseRanges(p,function(e,t,n){for(F=t;F<=n;F++)u.push(s._addProperty(e.props,o,d,F,i,void 0,m,g))});else if(C>i.elements){f=!0,r=0,a=C-1,t.cappedElements=!0;var I=s._createRanges(r,a,i);I.length&&(p=p.concat(I),I[0].props=!0,s._traverseRanges([I[0]],function(e,t,n){var r=Math.min(i.elements-1,n);for(r!==n&&(I[0].cappedRange=!0),F=t;F<=r;F++)u.push(s._addProperty(e.props,o,d,F,i,void 0,m,g))}))}else for(a=C,F=r=0;F<a;F++)u.push(s._addProperty(p,o,d,F,i,void 0,m,g));i.autoExpandPropertyCount+=u.length}if("null"!==d&&"undefined"!==d&&!y&&"String"!==d&&"Buffer"!==d&&"bigint"!==d){var w=e.props||i.props;if(this._isSet(o)?(F=0,o.forEach(function(e){var t;S++,i.autoExpandPropertyCount++,w<S||!i.isExpressionToEvaluate&&i.autoExpand&&i.autoExpandPropertyCount>i.autoExpandLimit?$=!0:u.push(s._addProperty(p,o,"Set",F++,i,(t=e,function(){return t}),m,g))})):m&&o.forEach(function(e,t){var n;S++,i.autoExpandPropertyCount++,w<S||!i.isExpressionToEvaluate&&i.autoExpand&&i.autoExpandPropertyCount>i.autoExpandLimit?$=!0:(100<(t=s._inspect(t,2,10).replace(/\r?\n|\r/g," ").replace(/\s\s+/g," ")).length&&(t=t.slice(0,100)+"..."),u.push(s._addProperty(p,o,"Map",t,i,(n=e,function(){return n}),m,g)))}),!f){try{for(l in o)if(!(h&&E.test(l)||this._blacklistedProperty(o,l))){if(S++,i.autoExpandPropertyCount++,w<S){$=!0;break}if(!i.isExpressionToEvaluate&&i.autoExpand&&i.autoExpandPropertyCount>i.autoExpandLimit){$=!0;break}u.push(s._addObjectProperty(p,b,o,d,l,i,void 0,m,g))}}catch(e){}if(b._p_length=!0,_&&(b._p_name=!0),!$){var T=this._getOwnPropertyNames(o).concat(this._getOwnPropertySymbols(o)),F=0;for(C=T.length;F<C;F++)if(l=T[F],!(h&&E.test(l.toString())||this._blacklistedProperty(o,l)||b["_p_"+l.toString()])){if(S++,i.autoExpandPropertyCount++,w<S){$=!0;break}if(!i.isExpressionToEvaluate&&i.autoExpand&&i.autoExpandPropertyCount>i.autoExpandLimit){$=!0;break}u.push(s._addObjectProperty(p,b,o,d,l,i,void 0,m,g))}}}}}if(t.type=d,x?(t.value=o.valueOf(),this._capIfString(d,t,i,e)):"date"===d?t.value=this._dateToString.call(o):"bigint"===d?t.value=o.toString():"RegExp"===d?t.value=this._regExpToString.call(o):"symbol"===d&&this._Symbol?t.value=this._Symbol.prototype.toString.call(o):i.depth||"null"===d||"undefined"===d||(delete t.value,t.capped=!0),$&&(t.cappedProps=!0),c=i.node.current,i.node.current=t,this._treeNodePropertiesBeforeFullValue(t,i),u.length)for(F=0,C=u.length;F<C;F++)u[F](F);p.length&&(t.props=p)}catch(e){t.type="unknown",t.error=e.message,c=i.node.current,i.node.current=t,this._treeNodePropertiesBeforeFullValue(t,i)}return this._additionalMetadata(o,t),this._treeNodePropertiesAfterFullValue(t,i),i.node.current=c,i.level--,i.autoExpand=n,i.autoExpand&&i.autoExpandPreviousObjects.pop(),t},_blacklistedProperty:function(e,t){if((e===b||e===this._envGlobal)&&"wallaby"===t||t.indexOf&&0===t.indexOf("$_$"))return!0},_createRanges:function(e,t,n,r){r=r||{index:0};for(var o=n.elements,i=[],s=Math.max(Math.ceil((t-e+1)/o),o),a=e;a<t;a+=s){var l=a,c=Math.min(a+s-1,t),l={rangeNode:!0,name:l+" - "+(c=t<=c+o/2?t:c),props:2*o<c-l+1&&1<o?this._createRanges(l,c,n,r):[]};if(this._setNodeId(l,n),this._setNodeLabel(l,n),this._setNodeExpandableState(l,n),this._setNodePermissions(l,n),l.id+=" r "+r.index++,i.push(l),c===t)break}return i},_traverseRanges:function(e,t){for(var n=0,r=e.length;n<r;n++){var o,i=e[n];i.rangeNode=!0,i.props&&(i.props.length?this._traverseRanges(i.props,t):!0===i.props&&(o=i.name.split("-"),i.props=[],t(i,parseInt(o[0],10),parseInt(o[1],10))))}},_capIfString:function(e,t,n,r){r=r.strLength||n.strLength;("string"===e||"String"===e)&&t.value&&t.value.length>r&&(t.capped=t.value.substr(0,r),delete t.value)},_property:function(e,t,n,r,o,i,s){var a=this,l=(o=o||function(e,t){return e[t]},n.toString()),c=r.expressionsToEvaluate||{},p=r.depth,u=r.isExpressionToEvaluate;try{var d,h=l,m=(i&&"'"===h[0]&&(h=h.substr(1,h.length-2)),r.expressionsToEvaluate=c["_p_"+h]),g=(m&&(r.depth=r.depth+1),r.isExpressionToEvaluate=!!m,"symbol"==typeof n),f={name:g||i?l:this._propertyName(l)};if(g&&(f.symbol=!0),s){var _=this._getOwnPropertyDescriptor(e,n);if(_&&(_.set&&(f.setter=!0),_.get)&&!m&&!r.resolveGetters)return f.getter=!0,this._processTreeNodeResult(f,r),f}try{d=o(e,n)}catch(e){return f={name:l,type:"unknown",error:e.message},this._processTreeNodeResult(f,r),f}var y,v,x,b=this._type(d),S=this._isPrimitiveType(b);return f.type=b,S?this._processTreeNodeResult(f,r,d,function(){f.value=d.valueOf(),m||a._capIfString(b,f,r,{})}):(y="function"===b,v=r.autoExpand&&r.level<r.autoExpandMaxDepth&&r.autoExpandPreviousObjects.indexOf(d)<0&&!y&&r.autoExpandPropertyCount<r.autoExpandLimit,x=r.estimatedLogEntryStringSize>r.maxLogEntryStringSize,v||r.level<p&&!x&&!y||m?(this._traverseObject(f,d,r,m||{}),this._additionalMetadata(d,f)):this._processTreeNodeResult(f,r,d,function(){"null"!==b&&"undefined"!==b&&(delete f.value,f.capped=!0)})),f}finally{r.expressionsToEvaluate=c,r.depth=p,r.isExpressionToEvaluate=u}},_processTreeNodeResult:function(e,t,n,r){this._treeNodePropertiesBeforeFullValue(e,t),r&&r(),this._additionalMetadata(n,e),this._treeNodePropertiesAfterFullValue(e,t)},_treeNodePropertiesBeforeFullValue:function(e,t){this._setNodeId(e,t),this._setNodeQueryPath(e,t),this._setNodeExpressionPath(e,t),this._setNodePermissions(e,t)},_treeNodePropertiesAfterFullValue:function(e,t){this._setNodeLabel(e,t),this._setNodeExpandableState(e,t),t.sortProps&&this._sortProps(e,t),this._addFunctionsNode(e,t),this._addLoadNode(e,t),this._cleanNode(e,t)},_additionalMetadata:function(e,t){try{e&&"number"==typeof e.length&&(t.length=e.length)}catch(e){}if("number"===t.type||"Number"===t.type)if(isNaN(t.value))t.nan=!0,delete t.value;else switch(t.value){case Number.POSITIVE_INFINITY:t.positiveInfinity=!0,delete t.value;break;case Number.NEGATIVE_INFINITY:t.negativeInfinity=!0,delete t.value;break;case 0:this._isNegativeZero(t.value)&&(t.negativeZero=!0)}else"function"===t.type&&"string"==typeof e.name&&e.name&&t.name&&e.name!==t.name&&(t.funcName=e.name)},_setNodeId:function(e,t){e.id=t.node.parent?t.node.parent.id+" "+t.node.index:t.expId},_sortProps:function(e){e.props&&e.props.length&&"array"!==e.type&&"Map"!==e.type&&"Set"!==e.type&&e.props.sort(function(e,t){e=e.name.toLowerCase(),t=t.name.toLowerCase();return e<t?-1:t<e?1:0})},_addFunctionsNode:function(e,t){if(e.props&&e.props.length){for(var n,r=[],o=[],i=0,s=e.props.length;i<s;i++){var a=e.props[i];("function"===a.type?r:o).push(a)}!o.length&&t.autoExpand&&(e.capped=!0),!o.length||r.length<=1||(e.props=o,n={functionsNode:!0,props:r},t.autoExpand&&(n.capped=!0),this._setNodeId(n,t),this._setNodeLabel(n,t),this._setNodeExpandableState(n,t),this._setNodePermissions(n,t),n.id+=" f",e.props.unshift(n))}},_addLoadNode:function(e,t){var n;e.props&&e.props.length&&e.cappedProps&&"string"!==e.type&&!t.nonExpandable&&(this._setNodeId(n={loadActionNode:!0},t),this._setNodeQueryPath(n,t),this._setNodeLabel(n,t),this._setNodeExpandableState(n,t),this._setNodePermissions(n,t),n.id+=" l",e.props.push(n))},_setNodeExpandableState:function(e,t){((e.capped||e.cappedProps||e.functionsNode||e.loadActionNode||e.rangeNode||e.getter)&&!t.nonExpandable||this._isArray(e.props))&&(e.expandable=!0)},_setNodePermissions:function(e,t){var t=t.node.parent,n=((e.symbol||t&&t._hasSymbolPropertyOnItsPath)&&(e._hasSymbolPropertyOnItsPath=!0),t&&t._hasSetOnItsPath),t=t&&t._hasMapOnItsPath,r=("Set"!==e.type&&!n||(e._hasSetOnItsPath=!0),"Map"!==e.type&&!t||(e._hasMapOnItsPath=!0),!(e.functionsNode||e.loadActionNode||e.rangeNode||e.error));(!r||e._hasSymbolPropertyOnItsPath||n||t)&&(e.disallowToCopyPath=!0),r&&!e.getter&&"function"!==e.type&&"symbol"!==e.type&&"Set"!==e.type&&"Map"!==e.type||(e.disallowToCopyData=!0)},_cleanNode:function(e){e._hasSymbolPropertyOnItsPath=void 0,e._hasSetOnItsPath=void 0,e._hasMapOnItsPath=void 0},_setNodeExpressionPath:function(e,t){t.node.parent?e.expressionPath=t.node.parent.expressionPath.concat([this._propertyAccessor(e.name)]):e.expressionPath=[t.rootExpression]},_propertyAccessor:function(e){return e?e.match(h)?"["+e+"]":e.match(u)?"."+e:e.match(m)?"["+e+"]":"['"+e+"']":""},_setNodeQueryPath:function(e,t){var n;t.node.parent?e.loadActionNode?e.queryPath=t.node.current.queryPath.slice():((n=e.name)&&"'"===n[0]&&(n=n.substr(1,n.length-2)),e.queryPath=t.node.parent.queryPath.concat(["_p_"+n])):e.queryPath=[e.id]},_setNodeLabel:function(e,t){e.rangeNode?e.label={name:e.name}:e.loadActionNode?e.label={name:"..."}:e.functionsNode?e.label={name:"Functions"}:this._setNodeLabelValue(e,t)},_setNodeLabelValue:function(e,t){e.label={},e.label.name=e.name,e.label.type=this._formatNodeType(e,t),e.label.value=this._formatNodeValue(e,t),t.estimatedLogEntryStringSize+=(e.label.name&&e.label.name.length||0)+(e.label.type&&e.label.type.length||0)+(e.label.value&&e.label.value.length||0)+18},_setNodeLabelValueV2:function(e,t){t.estimatedLogEntryStringSize+=(e.name?e.name.length:0)+10+(null==(t=e.type)?void 0:t.toLowerCase())==="string"?e.length:27},_formatNodeValue:function(e,t,n){if(e.rangeNode)return e.name;if(e.error)return e.error;if(e.getter)return"(...)";if("number"===e.type.toLowerCase()){if(e.nan)return"NaN";if(e.positiveInfinity)return"Infinity";if(e.negativeInfinity)return"-Infinity";if(e.negativeZero)return"-0"}return"null"===e.type||"undefined"===e.type?e.type:"string"===e.type.toLowerCase()?"'"+(e.capped?e.capped+"...":e.value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'"+(e.capped?" (total length: "+e.length+")":""):(this._isUndefined(e.value)?this._formatCompactObjectView(e,t,n):e.value)+(e.funcName?":"+e.funcName:"")},_formatCompactObjectView:function(e,t,n){if("function"===e.type)return"λ";var r="array"===e.type&&0===e.length,o=["array"===e.type?"[":"{","","array"===e.type?"]":"}"];if(n||e.capped||e.ranges)o[1]=r?"":"...";else if(e.props){for(var i=[],s=[],a=0;a<e.props.length&&s.length<=5;a++){var l=e.props[a];("function"===l.type||l.getter?i:s).push("array"===e.type?this._formatNodeValue(l,t,!0):l.name+": "+this._formatNodeValue(l,t,!0))}s.length<5&&(s=s.concat(i)),o[1]=s.join(", "),5<e.props.length&&(o[1]+=", ...")}return o.join("")},_formatNodeType:function(e){if(this._isDisplayableType(e.type))return e.error?"":"date"===e.type?"Date":"array"===e.type?e.length?"Array("+e.length+")":"":e.type},_isUndefined:function(e){return e===this._undefined},_isDisplayableType:function(e){return!("boolean"===e||"Boolean"===e||"symbol"===e||"string"===e||"String"===e||"number"===e||"Number"===e||"object"===e||"Object"===e||"function"===e||"null"===e||"undefined"===e)},_type:function(e){var t=typeof e;return"object"===t?"[object Array]"===this._objectToString(e)?t="array":"[object Date]"===this._objectToString(e)?t="date":"[object BigInt]"===this._objectToString(e)?t="bigint":null===e?t="null":e.constructor&&(t=e.constructor.name||t):"undefined"===t&&this._HTMLAllCollection&&e instanceof this._HTMLAllCollection&&(t="HTMLAllCollection"),t},_isPrimitiveType:function(e){return"boolean"===e||"string"===e||"number"===e},_isPrimitiveWrapperType:function(e){return"Boolean"===e||"String"===e||"Number"===e},initLoadingPhase:function(){var n=this;this._resetLoadingData(),this._testFileIds=this._safeObject({}),this._seq=0,(b.$_$testFiles||[]).forEach(function(e){n._testFileIds[e.id]=1}),n._original_$_$wp=b.$_$wp,n._original_$_$wpe=b.$_$wpe,b.$_$wp=function(e,t){return n._initializeCoverage(e,t),n._reportProgramScope("programScopeStart",e),n.programScopeStartLoading(e),n._executionContext()},b.$_$wpe=function(e){n._reportProgramScope("programScopeEnd",e),n.programScopeEndLoading(e)},!b.$_$traceContext||b.$_$traceContext.test?n._resetTracerMode():b.$_$traceContext.test||n._setTraceRecordMode(),b.$_$profileRun?n._setProfileMode():n._resetTracerMode()},_resetTracerMode:function(){b.$_$w=S.$_$w,b.$_$w_=S.$_$w_,b.$_$wv=S.$_$wv,b.$_$wf=S.$_$wf,this._envGlobal&&(this._envGlobal.$_$w=b.$_$w,this._envGlobal.$_$w_=b.$_$w_,this._envGlobal.$_$wv=b.$_$wv,this._envGlobal.$_$wf=b.$_$wf)},_setProfileMode:function(){b.$_$wf=b.$_$w_=b.$_$w=function(){},b.$_$wv=function(e,t,n,r,o,i){return i},this._envGlobal&&(this._envGlobal.$_$w=b.$_$w,this._envGlobal.$_$w_=b.$_$w_,this._envGlobal.$_$wf=b.$_$wf,this._envGlobal.$_$wv=b.$_$wv)},_setTraceRecordMode:function(){b.$_$trace||(b.$_$trace={sequence:[],tests:{},values:{}}),b.$_$traceContext.allowRecordingValuesAttributtedToCurrentFrame=!0,b.$_$traceContext.allowRecordingValues=!0,b.$_$traceContext.currentFrame=b.$_$traceContext.currentFrame||0,b.$_$traceContext.stepsToRecordWatchExpressionsAt=b.$_$traceContext.stepsToRecordWatchExpressionsAt||{},b.$_$traceContext.allowedNumberOfStepsToRecordWatchExpressionsAfterCurrentStep=S._maxTraceStepsForWatchExpressionPrefetch,b.$_$w=function(e,t,n){S.$_$w(e,t),S._recordTrace(e,t,n[0]),S._recordTraceValues(e,t,n[1]),S._recordCallStack()},b.$_$wv=function(e,t,n,r,o,i,s,a,l,c){if(b.$_$trace){var p=S._expressionId(e,n,0,0);if(!c||!c.traceId||c.permanent){var u,d={};for(u in c||{})d[u]=c[u];d.traceId="*",d.traceStep=b.$_$trace.sequence.length>S._maxTraceSteps?void 0:b.$_$trace.sequence.length-1;var h=S.$_$wv(e,t,n,r,o,i,s,a,l,d);if(!d.permanent)return h}c.permanent&&delete c.permanent,b.$_$trace.values[p]={fileId:e,rangeId:t,fileRangeId:n,context:o,val:i,exp:s,singleHit:a,evalOpts:l,logMarkerContext:c},S._recordTraceValues(e,t,r[1],!0)}return i},b.$_$w_=function(e,t,n,r){S.$_$w_(e,t),b.$_$traceContext.allowRecordingValuesAttributtedToCurrentFrame&&r&&b.$_$traceContext.currentFrame<=b.$_$trace.sequence.length-1&&(b.$_$traceContext.allowRecordingValuesAttributtedToCurrentFrame=!1)},b.$_$wf=function(e){return S.scopeStart(e),S._executionContext()},this._envGlobal&&(this._envGlobal.$_$w=b.$_$w,this._envGlobal.$_$wv=b.$_$wv,this._envGlobal.$_$wf=b.$_$wf)},_executionContext:function(){return[++this._stackDepth,++this._functionCallId]},_recordCallStack:function(){b.$_$trace&&b.$_$traceContext.captureCallStackFrame===b.$_$trace.sequence.length-1&&(b.$_$trace.callStack={},b.$_$trace.callStack[b.$_$traceContext.captureCallStackFrame]={stack:S._currentStack()})},_recordTraceValues:function(e,t,n,r){var o,i,s,a,l,c;b.$_$traceContext.allowRecordingValues&&b.$_$trace&&(o=b.$_$trace.sequence.length-1,i=(s=b.$_$traceContext.currentFrame<o&&!b.$_$traceContext.currentFrameFunctionCallId)||n<b.$_$traceContext.currentFrameFunctionCallId,s=s||n<=b.$_$traceContext.currentFrameFunctionCallId,a=b.$_$traceContext.currentFrameFunctionCallId&&n===b.$_$traceContext.currentFrameFunctionCallId,l=o<b.$_$traceContext.currentFrame&&b.$_$traceContext.stepsToRecordWatchExpressionsAt[o],(c=b.$_$traceContext.currentFrame===o)&&!r&&(b.$_$traceContext.currentFrameFunctionCallId=n),b.$_$traceContext.allowRecordingValuesAttributtedToCurrentFrame&&(c||r&&a)?S._recordCapturedTraceValues(b.$_$traceContext.currentFrame):l?S._recordCapturedTraceValues(o):a&&(--b.$_$traceContext.allowedNumberOfStepsToRecordWatchExpressionsAfterCurrentStep<0?this._stopTraceValueRecording():S._recordCapturedTraceValues(o)),s&&(b.$_$traceContext.allowRecordingValuesAttributtedToCurrentFrame=!1),i)&&this._stopTraceValueRecording()},_recordTrace:function(e,t,n){b.$_$trace.sequence.length>this._maxTraceSteps||(b.$_$trace._stackDepth!==n&&(b.$_$trace._stackDepth=n),b.$_$trace.sequence.push([e,t,n]))},_recordCapturedTraceValues:function(i){var s;Object.keys(b.$_$trace.values).length&&(s=b.$_$trace.values,S._doWhenReceiverIsReady(function(){for(var e=Object.keys(s),t=0,n=e.length;t<n;t++){var r=e[t],r=s[r],o={changeId:r.logMarkerContext.changeId,traceId:"*",traceStep:i,preciseTraceStep:!0,initialTraceId:r.logMarkerContext.traceId};S._autoLogImmediateValue(r.fileId,r.rangeId,-1*i,-1*i,r.context,r.val,r.exp,r.singleHit,r.evalOpts,o)}}))},_clearCapturedTraceValues:function(){b.$_$trace.values={}},_stopTraceValueRecording:function(){S._clearCapturedTraceValues(),b.$_$traceContext.allowRecordingValues=!1},_currentStack:function(){try{throw new Error("stack trace")}catch(e){return e.stack}},_initializeCoverage:function(e,t){if(t){void 0===b.$_$coverage[e]&&(b.$_$coverage[e]=[]);var n=b.$_$coverage[e];if(n.length!==t){this.debugLog("Range mismatch (fileId: "+e+", calculated: "+n.length+", actual: "+t+")");for(var r=n.length;r<t;r++)n[r]={}}}},_reportProgramScope:function(e,t){var n=this;this._shouldReportProgramScope&&this._doWhenReceiverIsReady(function(){n._sendWithHighPriority(e,t)})},_looksLikePromise:function(e){return e&&e.constructor&&"Promise"===e.constructor.name&&"function"==typeof e.then&&"function"==typeof e.catch&&(b.Promise||{}).prototype!==e},_looksLikeObservable:function(e){return e&&e.constructor&&e.constructor.name&&"string"==typeof e.constructor.name&&~e.constructor.name.indexOf("Observable")&&"function"==typeof e.forEach},_looksLikeBuffer:function(e){return e&&e.constructor&&"Buffer"===e.constructor.name&&"function"==typeof e.toString&&(b.Buffer||{}).prototype!==e},_autoLogValue:function(t,n,r,o,i,e,s,a,l,c,p){var u=this,d=b.$_$session;this._loggingValue=!0,u._looksLikePromise(e)?(this._loggingValue=!1,e.then(function(e){b.$_$session===d&&u._autoLogResolvedValue(t,n,r,o,i,"then ",u._valueToFormat(e,s),a,l,c,p)}).catch(function(e){b.$_$session===d&&u._autoLogResolvedValue(t,n,r,o,i,"catch ",(e||"<No Reason Provided>").toString(),a,l,c,p)})):u._looksLikeObservable(e)?(this._loggingValue=!1,e.forEach(function(e){b.$_$session===d&&u._autoLogResolvedValue(t,n,r,o,i,"",u._valueToFormat(e,s),a,l,c,p)})):u._autoLogImmediateValue(t,n,r,o,i,e,s,a,l,c,p),this._loggingValue=!1},_createProxy:function(s,a){a=a||{path:[]};var o,e=s.val,l=this;if(!l._loggingValue)return l._proxyCache||(l._proxyCache=new b.WeakMap),o=function(e,t,n){var r,o,i;if(!l._loggingValue)return t=(t||"").toString(),!(i="function"==typeof e)&&"object"!=typeof e||"get"!==n||(r=l._proxyCache.get(e))||((o={}).path=a.path.slice(),t&&o.path.push(t),r=l._createProxy({fileId:s.fileId,rangeId:s.rangeId,specHitCount:s.specHitCount,overallHitCount:s.overallHitCount,context:s.context,val:e,exp:s.exp,singleHit:s.singleHit,evalOpts:s.evalOpts,logMarkerContext:s.logMarkerContext},o),l._proxyCache.set(e,r)),i||((o={}).path=a.path.slice().concat(t?[t]:[]),o.trap=n,i=l._expressionId(s.fileId,s.rangeId,s.specHitCount,s.overallHitCount),(t=l._consoleProxyHits[i])||(l._consoleProxyHits[i]=t={count:0,specHits:{}}),(n=t.specHits[l._spec])||(t.specHits[l._spec]=n={count:0}),o.specHitCount=n.count,o.overallHitCount=t.count,l._autoLogValue(s.fileId,s.rangeId,s.specHitCount,s.overallHitCount,s.context,e,s.exp,s.singleHit,s.evalOpts,s.logMarkerContext,o),t.count=o.overallHitCount+1,n.count=o.specHitCount+1),r},new b.Proxy(e,{get:function(e,t,n){e=Reflect.get(e,t,n);return o(e,t,"get")||e},set:function(e,t,n,r){return o(n,t,"set"),Reflect.set(e,t,n,r)},apply:function(e,t,n){e=Reflect.apply(e,t,n);return o(e,void 0,"call"),e},deleteProperty:function(e,t){return o(Reflect.get(e,t,e),t,"delete"),Reflect.deleteProperty(e,t)}})},_valueToFormat:function(e,t){return"$_$ne"===t?e:t(e)},_autoLogImmediateValue:function(e,t,n,r,o,i,s,a,l,c,p){this._isBigInt(i)&&(i=i.toString()+"n"),this._autoLogResolvedValue(e,t,n,r,o,"",this._valueToFormat(this._looksLikeBuffer(i)?i.toString():i,s),a,l,c,p)},_autoLogResolvedValue:function(e,t,n,r,o,i,s,a,l,c,p){c&&(u=c.changeId,d=c.traceId,h=c.traceStep,m=c.permanent,g=c.preciseTraceStep,f=c.initialTraceId),this._loggingValue=!0;var u,d,h,m,g,f,_,y,c=e+","+t;!i&&2&l&&(i="⚑ "),r<this._evaluatedExpressionPerRangeLimit?(_=this._formattingOpts(c,{elements:a?50:this._undefined,resolveGetters:b.$_$resolveGetters||1&l||this._autoExpandAllLogs,depth:a?2:this._undefined}),p&&p.overallHitCount===this._evaluatedProxyExpressionPerRangeLimit?y=this._evaluateExpressions(this._expressionId(e,c,n,r,p),s,o,new Error("Only the first "+p.overallHitCount+" values are evaluated"),l,d,!!p,_):(!p||p.overallHitCount<this._evaluatedProxyExpressionPerRangeLimit)&&(y=this._evaluateExpressions(this._expressionId(e,c,n,r,p),s,o,void 0,l,d,!!p,_))):r===this._evaluatedExpressionPerRangeLimit&&(_=this._formattingOpts(c,{elements:a?50:this._undefined,resolveGetters:b.$_$resolveGetters||1&l||this._autoExpandAllLogs,depth:a?2:this._undefined}),y=this._evaluateExpressions(this._expressionId(e,c,n,r,p),s,o,new Error("Only the first "+r+" values are evaluated"),l,d,!!p,_)),(d||u||m)&&(y=y||{},m)&&(y.permanent=m),(d||u)&&(d&&(y.traceId=d),u&&(y.changeId=u),y.traceStep=h,y.preciseTraceStep=g,y.initialTraceId=f),p&&y&&y.data&&(y.data.proxyData=p),this._sendLog("autoLog",{prefix:i,format:i?"raw":void 0},o,e,t,y),this._loggingValue=!1},_formattingOpts:function(e,t){var n=this._time(),r=this._logStats,o=r[e];return!o||100<d(n,o.ts)&&o.count&&o.time/o.count<50?(r[e]=o={count:0,time:0,ts:n},r.hits={}):50<d(n,r.hits.ts)&&r.hits.count&&r.hits.time/r.hits.count<50&&(r.hits={}),o.reduceLimits||r.hits.reduceLimits?{depth:2,props:5,elements:5,strLength:256,autoExpandLimit:30,autoExpandMaxDepth:2,logPointHits:o,startTime:n}:(t.logPointHits=o,t.startTime=n,t)},_evaluateExpressions:function(e,t,n,r,o,i,s,a){var l=this._expressionsToEvaluate&&this._expressionsToEvaluate[e],a=a||{},l=(a.expressionsToEvaluate=l,s&&(a.proxyValue=!0),1&o||this._autoExpandAllLogs),s=(l&&(a.autoExpand=!0,a.depth=1,a.strLength=b.$_$logLimits.values.autoExpand.stringLength),this._evaluate(t,n,a,e,r,i)),o=(s.data&&(s.data.id=e,s.data.autoExpand=!!l),a.logPointHits),t=a.startTime;return o&&t&&(n=this._logStats,r=this._time(),o.count++,o.time+=d(t,r),o.ts=r,n.hits.count++,n.hits.time+=d(t,r),n.hits.ts=r,(50<o.count||20<o.time)&&(o.reduceLimits=!0),500<n.hits.count||200<n.hits.time)&&(n.hits.reduceLimits=!0),s},initV2:function(){this._expressionId=this._expressionIdV2.bind(this),this._setNodeLabelValue=this._setNodeLabelValueV2.bind(this),this._setNodeExpressionPath=function(){},this._setNodePermissions=function(){},this._setNodeId=function(e,t){e.id=t.node.parent?t.node.index+"":t.expId},this.v2=!0}},b.$_$doNotInit?b.$_$Tracer=a:((S=new a).setGlobalErrorHandler(),d=function(e,t){return t-e},b.performance?S._time=function(){return b.performance.now()}:b.process&&b.process.hrtime?(S._time=function(){return b.process.hrtime()},d=function(e,t){return 1e3*(t[0]-e[0])+(t[1]-e[1])/1e6}):S._time=function(){return+new Date},S._logTime=function(t,n,r,o,i,s,e,a,l){var c,p,u=this;return u._looksLikePromise(e)?(c=b.$_$session,e.then(function(e){b.$_$session===c&&u._logTime(t,n,r,o,i,s,e,u._time(),l)}).catch(function(e){b.$_$session===c&&u._logTime(t,n,r,o,i,s,e,u._time(),l)})):(a=d(s,a),(p=S._autoTimeHits[r])?(p.value&&(p.n=1,p.min=p.value,p.max=p.value,p.total=p.value,delete p.value),p.min=Math.min(p.min,a),p.max=Math.max(p.max,a),p.total+=a,p.n+=1):S._autoTimeHits[r]={value:a,context:i,fileId:t,rangeId:n,logMarkerContext:l}),e},S.$_$w=S.$_$w_=b.$_$w=b.$_$w_=function(e,t){S.statement(e,t)},b.$_$wp=function(e,t){return S._initializeCoverage(e,t),S._reportProgramScope("programScopeStart",e),S.scopeStart(e),S._executionContext()},b.$_$wpe=function(e){S._reportProgramScope("programScopeEnd",e)},S.$_$wf=b.$_$wf=function(e){S.scopeStart(e)},S.$_$wv=b.$_$wv=function(e,t,n,r,o,i,s,a,l,c){var p,u,d,h,m,g,f,_=S._rangeHits(n),y=_.rangeConsoleHits,_=_.rangeConsoleHitsOfSpec,v=y.count,x=_.count;return a?S._identifierExpressionAutoLogHitLimit?v<S._identifierExpressionAutoLogHitLimit?S._doWhenReceiverIsReady(function(){S._autoLogValue(e,t,x,v,o,i,s,a,l,c)},arguments):v===S._identifierExpressionAutoLogHitLimit&&S._doWhenReceiverIsReady(function(){S._sendLog("log",{content:"Only the first "+S._identifierExpressionAutoLogHitLimit+" values are automatically logged, use console.log("+(o||"...")+") for the full output",format:"raw"},o,e,t)},arguments):v||S._doWhenReceiverIsReady(function(){S._autoLogValue(e,t,x,v,o,i,s,a,l,c)},arguments):!S._logLimit||v<S._logLimit?S._doWhenReceiverIsReady(function(){S._autoLogValue(e,t,x,v,o,i,s,a,l,c)},arguments):v===S._logLimit&&(p=c&&c.changeId,u=c&&c.traceId,d=c&&c.traceStep,h=c&&c.permanent,m=c&&c.preciseTraceStep,g=c&&c.initialTraceId,(u||p||h)&&(f={},h&&(f.permanent=h),u&&(f.traceId=u),p&&(f.changeId=p),u||p)&&(f.traceStep=d,f.preciseTraceStep=m,f.initialTraceId=g),S._doWhenReceiverIsReady(function(){S._sendLog("log",{content:"Only the first "+S._logLimit+" values are automatically logged. Increase this limit with the `logLimit` setting.",format:"raw"},o,e,t,f)},arguments)),y.count++,_.count++,!(2&l&&"object"==typeof i&&b.Proxy&&b.WeakMap)||c&&c.traceId?i:S._createProxy({fileId:e,rangeId:t,specHitCount:x,overallHitCount:v,context:o,val:i,exp:s,singleHit:a,evalOpts:l,logMarkerContext:c})},b.$_$tracer=S,b.$_$coverage=b.$_$coverage||[],b.$_$reuseableTracer||(b.$_$tracer._expressionsToEvaluate=b.$_$expressionsToEvaluate||{}),b.$_$noLogThrottling&&(b.$_$tracer._formattingOpts=function(e,t){return t}),b.$_$v2&&b.$_$tracer.initV2(),c=function(e){return e.path},l=b.$_$testFiles&&(b.$_$testFiles||[]).map(c).map(function(e){return e&&e.replace(/\\/g,"/")}),c=b.$_$testFiles&&b.$_$testFiles.filter(function(e){return e.loaded}).map(c),S.initLoadingPhase(),b.wallaby={delayStart:function(){S._patchFrameworks(),S._delayStart=!0},start:function(){S._delayStart=!1,S.start()},_startWhenReceiverIsReady:function(e){S._shouldReportProgramScope=!0,S._doWhenReceiverIsReady(function(){e()})},tests:l,loadedTests:c,baseDir:b.$_$baseDir,slowTestThreshold:b.$_$slow||75})},{}],15:[function(m,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const g=m("path"),a=m("fs");var n=m("./extension/shared/utils");const r=m("util"),o=n.default["normalizePath"],i=m("module")["Module"],s=m("source-map").SourceMapConsumer,l=m("source-map").SourceMapGenerator,c=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,p=/^\s*/,u=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g,d=/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,h=/(^[\s]*?(fit|fdescribe)[\s]*?|[^.\w\s][\s]*?(fit|fdescribe)[\s]*?|(test|test\.concurrent|it|describe)[\s]*?\.[\s]*?only[\s]*?)((\.each[\s]*?(`[^`]*?`[\s]*?)*?)?\([\s]*?[^)\s])/gm;n=/[#@] sourceMappingURL=([^\s'"]*)/;const f=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+n.source+")\\s*\\*/|//(?:"+n.source+"))\\s*","g"),y=/data:application\/json[^,]+base64,/;let v=void 0;const x=/\s?<!doctype html>|(<html\b[^>]*>|<body\b[^>]*>|<x-[^>]+>)+/i;let b=/<\/?[a-z][\s\S]*>/i;try{b=new RegExp(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].map(function(e){return"<"+e+"\\b[^>]*>"}).join("|"),"i")}catch(e){}function S(){if(void 0===v){let t;try{a.statSync("/.dockerenv"),t=!0}catch(e){t=!1}let n;try{n=a.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){n=!1}v=t||n}return v}const $=(t,e)=>"js"===t||"jsx"===t||"es6"===t||"es7"===t||"mjs"===t||"cjs"===t||e&&e.find(e=>t===e),E=e=>"ts"===e||"tsx"===e||"cts"===e||"mts"===e,C=e=>"vue"===e,L=e=>"svelte"===e,I=(e,t)=>"coffee"===e||/\.(litcoffee|coffee\.md)$/.test(t||""),w={},T={},F=("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){w[e]=t,T[t]=e}),"_$_$w_id"),k="Expected to find some snaps in the file, but no snaps were found.",P="Expected to find some snaps with code in the file, but only empty snaps were found.",R="Found some snaps with code in the file, but not allowed to run them.";t.default={wallabyRandomIdCommentPostfix:F,randomIdLength:5,selectedTestRegExp:h,snapsNotFoundError:k,snapsAreEmptyError:P,snapsFoundButNoAutoRunError:R,SourceMapConsumer:s,wallabyRandomIdCommentPrefix(e){return".coffee"===g.extname(e)?"\n#":"\n//"},isSnapsNotFoundError(e){return e&&e.message&&e.message.endsWith(k)},isSnapsAreEmptyError(e){return e&&e.message&&e.message.endsWith(P)},isSnapsFoundButNoAutoRunError(e){return e&&e.message&&e.message.endsWith(R)},requireResolve:function(e,t){return i._resolveFilename(e,null,!1,t)},randomId:function(){return Math.random().toString(36).substr(2,5)},addWallabyRandomIdCommentToFileContent:function(e,t,n){return t+this.wallabyRandomIdCommentPrefix(e)+(n||this.randomId())+F},hasWallabyRandomIdComment:function(e){return e.endsWith(F)},removeWallabyRandomIdCommentFromFileContent:function(e,t){return _.endsWith(t,F)?t.slice(0,-(this.wallabyRandomIdCommentPrefix(e).length+5+F.length)):t},addOrReplaceWallabyRandomIdComment(e,t){return this.addWallabyRandomIdCommentToFileContent(e,this.removeWallabyRandomIdCommentFromFileContent(e,t))},noopTrue:function(){return!0},noopTruePromise:function(){return Q.fcall(this.noopTrue)},isPatch:function(e){return e&&2<e.length&&"@"===e[0]&&"@"===e[1]},isLevelUpRelativePath:function(e){return!!e&&"."===e[0]&&"."===e[1]},docBlockComment:function(e){e=e.match(c);return e&&e[0].replace(p,"")||""},normalizePath:function(e){return e&&e.replace("win32"===process.platform?"file:///":"file://","").split(g.sep).join("/")},fileUrl:function(e){e=g.resolve(e).replace(/\\/g,"/");return"/"!==e[0]&&(e="/"+e),encodeURI("file://"+e)},trimSlashes(e){return e&&e.replace(/^\/|\/$/g,"")},platformDependentPath:function(e){return!e||"win32"!==process.platform||~e.indexOf(g.sep)?e:e.split("/").join(g.sep)},getSourceMapFromCode:function(e){for(f.lastIndex=0;null!==(t=f.exec(e));){var t=t?t[1]||t[2]||"":null;if(t)if(y.test(t))return t=t.slice(t.indexOf(",")+1),Buffer.from(t,"base64").toString()}},makeRe:function(e,t){return"string"==typeof e?m("micromatch").makeRe(e,t,!1,!0):e},pathMatchesPattern:function(e,t,n){if(e)return"string"==typeof t?(0,m("micromatch").isMatch)(e,t,n):(e=this.platformDependentPath(n&&n.absolute?"":"./")+this.platformDependentPath(e)).match(t)},escapePathForRegex:function(e){return"\\"===g.sep&&(e=e.replace(/\\/g,"/")),this.replacePathSepForRegex(this.escapeRegExp(e))},escapeRegExp:function(e){return e.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")},replacePathSepForRegex:function(e){return"\\"===g.sep?e.replace(/(\/|(.)?\\(?![[\]{}()*+?.^$|\\]))/g,(e,t,n)=>n&&"\\"!==n?n+"\\\\":"\\\\"):e},displayTestName:function(e){return e.replace(/\r?\n|\r/g," ").replace(/\s\s+/g," ")},getOriginalLineByGeneratedLine(e,t,n){var r=e[t];if(r){if(0<(r=this._decodeMapping(r)))return r;n&&(n-=1);for(let e=0;e<r.length;e++){if(r[e].column===n)return r[e].line;if(n<r[e].column)return(0===e?r[0]:r[e-1]).line}return r[r.length-1].line}},_decodeMapping(t){if(_.isUndefined(t)||_.isObject(t))return t;if(_.isNumber(t))return t;var n=[];let r=0,o=0,i;for(let e=0;e<t.length;e+=1){var s=w[t[e]],a=32&s;s&=31,o+=s<<r,a?r+=5:(s=1&o,o>>>=1,a=s?0===o?-2147483648:-o:o,i=0<=i?void n.push({line:i,column:a}):a,o=r=0)}return n},_encodeMapping(e,t,n){e=e[t];if(!_.isObject(e))return e;const r=Object.values(e);if(n&&1===r.length&&0===r[0].originalColumn&&0===r[0].generatedColumn&&n[t])return n[t];if(1!==r.length&&r.find(e=>e.originalLine!==r[0].originalLine)){r.sort((e,t)=>e.generatedColumn-t.generatedColumn);let t="",n=(t=(t+=this._encodeInteger(r[0].originalLine))+this._encodeInteger(r[0].generatedColumn),0);for(let e=1;e<r.length;e++)if(r[e].originalLine!==r[e-1].originalLine){if(2e3<++n)return r[0].originalLine;t=(t+=this._encodeInteger(r[e].originalLine))+this._encodeInteger(r[e].generatedColumn)}return t}return r[0].originalLine},_encodeInteger(t){let n="";t<0?t=-t<<1|1:t<<=1;do{let e=31&t;0<(t>>>=5)&&(e|=32),n+=T[e]}while(0<t);return n},generateLineMappings:function(t,n){const r={};return Object.keys(t).forEach(e=>{r[e]=this._encodeMapping(t,e,n)}),r},_previousLineMapNextGreaterThanOrEqualTo(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){var i=parseInt((n+r)/2,10);e[i].column<t?n=i+1:(o=i,r=i-1)}return o=-1===(o=0===o?1:o)?e.length:o},_previousLineMapNextGreaterThan(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){var i=parseInt((n+r)/2,10);e[i].column<=t?n=i+1:(o=i,r=i-1)}return o=-1===(o=0===o?1:o)?e.length:o},updateFileMap:function(t,e){var i=_.extend({},t);return _.each(e,e=>{var e=new s(e),r={},o=_.isEmpty(i);e.eachMapping(e=>{var t,n;e.originalLine&&e.generatedLine&&(o?(r[e.generatedLine]||(r[e.generatedLine]={}),r[e.generatedLine][e.generatedColumn]&&!e.name||(r[e.generatedLine][e.generatedColumn]=Object.assign({},e))):!i[e.originalLine]||r[e.generatedLine]&&r[e.generatedLine][e.generatedColumn]&&!e.name||(t=i[e.originalLine]=this._decodeMapping(i[e.originalLine]))&&(0<t?(r[e.generatedLine]||(r[e.generatedLine]={}),r[e.generatedLine][e.generatedColumn]=Object.assign(Object.assign({},e),{originalLine:t,originalColumn:0})):(n=this._previousLineMapNextGreaterThan(t,e.originalColumn),r[e.generatedLine]||(r[e.generatedLine]={}),r[e.generatedLine][e.generatedColumn]=Object.assign(Object.assign({},e),{originalLine:t[n-1].line,originalColumn:t[n-1].column}))))}),i=this.generateLineMappings(r,t)}),i},formatInstrumentationError:function(e,t,n,r,o){e=(e&&(e.stack||e.message))+"";let i=this.textLines(e),s=i[0];var a,e=s.match(/^SyntaxError.*\((\d+):(\d+)\)$/);return e&&(a=parseInt(e[1],10),e=parseInt(e[2],10),i=r&&o&&(r=this.mapTransformedRangeToOriginal(r,[a,e,a,e]))?(s=s.replace(/\((\d+):(\d+)\)$/,`(${r[0]}:${r[1]})`),[this.codeFrame(o,r[0],r[1]+1,s)]):[this.codeFrame(t,a,e+1,s)]),Error("Failed to instrument "+n+"\n"+i.join("\n"))},combineSourceMaps:function(e,t){var n,r,o;return e?t?(n=new s(t),r=new s(e),o=new l,n.eachMapping(e=>{var t;null!=e.originalLine&&null!=(t=r.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&o.addMapping({original:{line:t.line,column:t.column},generated:{line:e.generatedLine,column:e.generatedColumn},source:t.source,name:t.name||e.name})}),[r,n].forEach(n=>{n.sources.forEach(e=>{o._sources.add(e);var t=n.sourceContentFor(e);null!=t&&o.setSourceContent(e,t)})}),o._sourceRoot=e.sourceRoot,o._file=e.file,JSON.parse(o.toString())):e:t},mapTextPosition:function(e,t){let n;var r;return n=e?t?((r={line:e.line,column:e.column}).source=t.sources&&t.sources[0]||".",r.bias=2,t.generatedPositionFor(r)):e:n},textIndexPosition:function(e,t,n){e=this.textLines(e,t,n);return{line:e.length,column:e[e.length-1].length}},mapTransformedRangeToOriginal:function(e,t){var n,r,o,t={start:{line:t[0],column:t[1]},end:{line:t[2],column:t[3]}},i=(i=e,r=t.start.line,n=t.start.column,null===(o=i.originalPositionFor({line:r,column:n,bias:1})).source?i.originalPositionFor({line:r,column:n,bias:2}):o);r=t.end;let s=null===(r=(n=e).originalPositionFor({line:r.line,column:r.column-1})).source?null:null===(o=n.generatedPositionFor({source:r.source,line:r.line,column:r.column+1,bias:2})).line||n.originalPositionFor(o).line!==r.line?{source:r.source,line:r.line,column:1/0}:n.originalPositionFor(o);return!(i&&s&&i.source&&s.source&&i.source===s.source&&null!==i.line&&null!==i.column&&null!==s.line&&null!==s.column)?null:(i.line===s.line&&i.column===s.column&&((s=e.originalPositionFor({line:t.end.line,column:t.end.column,bias:2})).column=s.column-1),[i.line,i.column,s.line,s.column])},mapOriginalRangeToTransformed:function(e,[t,n,r,o]){if(!e)return[t,n,r,o];t={line:t,column:n},t.source=e.sources&&e.sources[0]||".",n=e.generatedPositionFor(t),t={line:r,column:o},t.source=e.sources&&e.sources[0]||".",t.bias=2,r=e.generatedPositionFor(t);if(n&&r&&null!==n.line&&null!==n.column){if(null===r.line||null===r.column){if(null===n.line||null===n.column)return;r.source=n.source,r.line=n.line,r.column=1/0}return r.line<n.line&&(r.line=n.line),n.line===r.line&&r.column<n.column&&(r.column=1/0),null===n.column&&(n.column=0),null===r.column&&(r.column=0),[n.line,n.column,r.line,r.column]}},mapSnapRanges:function(c,e,t){const d=this.textLines(t),h=(e,t)=>{e=d[e-1];if(e)return e[t]},i=(e,t,n)=>h(e,t)===n,p=(e,t,n,r,o=0)=>{for(;-1<e[n];){if(i(e[t],e[n]-o,r))return e;--e[n]}},u=(e,t,n)=>{let r=!(e=[...e]),o=!1;for(;0<e[0];){for(;0<=e[1];){if(h(e[0],e[1])===t){if(r){o=!0;break}r=!0}e[1]--}if(o)break;var i;e[0]--,0<e[0]&&(i=d[e[0]-1],e[1]=i?i.length-1:0)}let s=!1,a=!1;for(;e[2]<d.length;){for(var l=d[e[2]-1];l&&e[3]<=l.length;){if(h(e[2],e[3])===n){if(s){a=!0;break}s=!0}e[3]++}if(a)break;e[2]++,e[3]=0}if(o&&a)return e[3]+=1,e},m=(e,t,n,r,o)=>{let i=e[2],s=e[3],a=!1;for(;i<d.length;){const c=d[i-1];for(;c&&s<=c.length;){if(h(i,s)===t){a=!0;break}s++}if(a)break;i++,s=0}var e=o||(r?this.textLines(r,void 0,"\n").length:1),l=i+(e-1);const c=d[l-1];let p=c&&c.length?c.length-1:0,u=!1;for(;0<=p;){if(h(l,p)===n){u=!0;break}p--}if(a&&u)return[i,s,l,p+1]},r=(e,t,n,r,o,i)=>{var s=n===r;let a=this.mapTransformedRangeToOriginal(c,e),l=!1;if(a||(e[3]+=1,(a=this.mapTransformedRangeToOriginal(c,e))?(null===a[2]&&(a[2]=a[0],l=!0),a[3]<0&&(a[3]=a[1],l=!0)):t&&(s?a=m(t,n,r,o,i):(i=this.mapTransformedRangeToOriginal(c,t))&&(i[3]=Math.min(i[3],d[i[2]-1].length),a=u(i,n,r)))),!a)throw new Error(`Unable to map snaps${s?" output":""} ranges`);if(l=l||s&&!isFinite(a[3]),a[3]=Math.min(a[3],d[a[2]-1].length),!(a=p(a,0,1,n)))throw new Error(`Unable to map snap${s?" output":""} range start`);if(!(a=p(a,2,3,r,1)))throw new Error(`Unable to map snap${s?" output":""} range end`);if(a[0]>a[2])throw new Error(`Unable to map snap${s?" output":""} range lines correctly`);if(a[0]===a[2]){if(a[1]>a[3]||!s&&a[1]===a[3])throw new Error(`Unable to map snap${s?" output":""} range columns correctly`);if(a[1]===a[3]||l){t=o?o.split("\n").length-1:e[2]-e[0],i=a[0]+t,o=d[i-1].lastIndexOf(r)+1;if(0===o)throw new Error("Unable to map snap output range end correctly");a[2]=i,a[3]=o}if(a[0]===a[2]){e=a[3]-a[1];if((!s&&e<4||s&&e<2)&&(--a[1],!(a=p(a,0,1,n))))throw new Error(`Unable to map snap${s?" output":""} range start`)}}return a};return e.map(e=>{var t=e.body.range,n=e.body.fallbackRange;return e.body.range=r(t,n,"{","}"),e.output&&(t=e.output.range,e.output.range=r(t,e.body.range,"`","`",e.output.content,e.output.lines),delete e.output.content,delete e.output.lines),e}).filter(e=>e.body.range)},textLines:function(e,t,n,r){return(e=_.isUndefined(t)||t===e.length-1?e:e.substr(0,t)).split(_.isUndefined(n)?/\r\n|\r|\n/:n,r)},instrumentableRange:function(e,n){let[r,o,i,s]=n;if(500<i-r)return n;if(!(i<r||i===r&&s<o)){var a=e.value;if(r===i&&o===s&&0<r&&0<=o&&r<=a.length&&o<a[r-1].length+1)return n;r<1&&(r=1),i>a.length&&(i=a.length),o<0&&(o=0);let t=!1;for(let e=r;e<=i;e++){var l=a[e-1],c=(r=e)===i&&s<=l.length?s:l.length;for(let e=o;e<=c;e++)if(o=e,l.charAt(e).trim().length){t=!0;break}if(t)break;o=0}if(t){for(let e=i;e>=r;e--){var p=a[e-1],u=(i!==e&&(i=e,s=p.length),e===r&&0<=r?o:0);let t=!1;for(let e=s;e>=u;e--){if(p.charAt(e).trim().length){t=!0;break}s=e}if(t)break}return[r,o,i,s]}}},instrumentableLogpointRange(e,t){var[n,r,o,i]=t;if(n===o){o=e.value[n-1];if(void 0===o||""===o.trim())return;if(r===i)return i=o.trimEnd().length-1,0===r||i<=r?[n,1+i,n,1+i]:o[r].trim().length?[n,r,n,r]:(i=o.substring(0,r).trimEnd().length)?[n,i-1,n,i-1]:[n,i=o.length-o.substring(r).trimStart().length,n,i]}return this.instrumentableRange(e,t)},verifyLocalOrigin:function(e,t){if(!e)return!0;var n=!1;try{var r=m("url").parse(e).hostname,n="localhost"===r||"0.0.0.0"===r||"127.0.0.1"===r||"::1"===r}catch(e){}return n||t||emitDiagnostic({name:"genericError",message:"wallaby.js refused to accept connection from "+e}),n},patchModule:function(t,n){var e=m("module").Module.prototype,r=e.require;e.require=function(e){return e===t?n(r.bind(this)):r.call(this,e)}},patchModulesCode:function(e,o){const i={},t=(e.forEach(t=>{t.files.forEach(e=>{i[e]=(i[e]||[]).concat(t.replacements)})}),"node_modules/"),s=a.readFileSync;a.readFileSync=function(n){let r=s.apply(this,arguments);var e=(e=n)?(e=(e="string"!=typeof e?"file://"===e.protocol?e.pathname||"":e.toString():e).replace(/\\/g,"/")).substr(e.lastIndexOf(t)+t.length):"",e=i[e];return e&&(r=r.toString(),e.forEach(e=>{var t=r;if(r=r.split(e.from).join(e.to),!e.optional&&r===t){if(process.env.WALLABY_INTEGRATION_TEST_RUN)throw new Error(`${o||"Possibly incompatible/unsupported"} (${n})`);emitDiagnostic({name:"possiblyIncompatiblePatch",message:`${o||"Possibly incompatible/unsupported"} (${n})`})}})),r}},requireModuleFrom:function(t,n){try{return m(g.join(t,"node_modules",n))}catch(e){var r=m("module"),o=new r(".",null);return o.filename=g.join(t,"wallaby.js"),o.paths=r._nodeModulePaths(t),r._load(n,o,!1)}},resolveModulePathFrom:function(e,t){var n=m("module"),r=new n(".",null);return r.filename=g.join(e,"wallaby.js"),r.paths=n._nodeModulePaths(e),n._resolveFilename(t,r,!1)},tryRequireModuleWithPathFrom:function(t,n,r){try{var o=m("module"),i=new o(".",null),s=(i.filename=g.join(t,"wallaby.js"),i.paths=o._nodeModulePaths(t),o._resolveFilename(n,i,!1));let e;return{module:(e=process.env.WALLABY_INTEGRATION_TEST_RUN||process.env.WALLABY_UNIT_TEST_RUN?m(s):o._load(n,i,!1))&&e.default||e,moduleExports:e,path:s}}catch(e){if(r)throw e}},nodeModulesLookup:function(n,t){var e=m("module").Module,r=e.prototype,o=e._nodeModulePaths,i=r.require;e._nodeModulePaths=function(e){var t=o.call(this,e);return n(t,e,o,this),t},t&&(r.require=function(e){return i.call(this,t(e))})},nodeModulePaths:function(e){return m("module")._nodeModulePaths(e)},patchBabelResolve:function(e){const r=this.nodeModulePaths(e);this.patchModule("resolve",e=>{e=e("resolve");const n=e.sync;return e.sync=function(e,t){return~e.indexOf("babel")&&t&&(t.paths=(t.paths||[]).concat(r)),n.apply(this,arguments)},e})},hasAnsi:function(e){return e&&"string"==typeof e&&e.match(u)},removeAnsi:function(e){return e&&"string"==typeof e?e.replace(u,""):e},maybeHtml:function(e){return e=e.trim().slice(0,500),x.test(e)||b.test(e)},copyToClipboard:function(e){var t=e=>e&&emitDiagnostic({name:"genericWarning",message:"May have failed to copy to clipboard. "+("linux"===process.platform?'Linux/Ubuntu environments require "xclip" to be installed. ':"")+(e&&e.message)});try{m("copy-paste").copy(e,t)}catch(e){t(e)}},testFileSelection:function(e,t,n,r){if(_.isString(t)){const c=t;t={test:e=>!!~e.indexOf(c)}}if(_.isString(n)){const p=n;n={test:e=>!!~e.indexOf(p)}}let o=!1,i=!1,s;var a={};for(d.lastIndex=0;null!==(s=d.exec(e));){var l=s.index+s[0].length;for(let e=s.index;e<l;e++)a[e]=1;o=o||t.test(s[0]),i=i||n.test(s[0])}if(!o&&r)for(h.lastIndex=0;null!==(s=h.exec(e));)if(!a[s.index]){o=!0;break}return{includedTestFile:o,excludedTestFile:i}},codeFrame:function(e,t,n,s){e=this.textLines(e),n={start:{column:n,line:t}};const{start:a,end:r,markerLines:l}=function(e,t,n){var r=Object.assign({column:0,line:-1},e.start),e=Object.assign(Object.assign({},r),e.end),{linesAbove:n=2,linesBelow:o=3}=n||{},i=r.line,s=r.column,r=e.line,a=e.column;let l=Math.max(i-(n+1),0),c=Math.min(t.length,r+o);-1===i&&(l=0),-1===r&&(c=t.length);var p=r-i,u={};if(p)for(let e=0;e<=p;e++){var d,h=e+i;s?0===e?(d=t[h-1].length,u[h]=[s,d-s]):e===p?u[h]=[0,a]:(d=t[h-e].length,u[h]=[0,d]):u[h]=!0}else u[i]=s===a?!s||[s,0]:[s,a-s];return{start:l,end:c,markerLines:u}}(n,e);t=n.start&&"number"==typeof n.start.column;const c=String(r).length;let o=e.slice(a,r).map((t,n)=>{var r,n=a+1+n,o=` ${(" "+n).slice(-c)} | `,i=l[n],n=!l[n+1];if(i){let e="";return Array.isArray(i)&&(r=t.slice(0,Math.max(i[0]-1,0)).replace(/[^\t]/g," "),i=i[1]||1,e=["\n ",o.replace(/\d/g," "),r,"^".repeat(i)].join(""),n)&&s&&(e+=" "+s),[">",o,t,e].join("")}return" "+o+t}).join("\n");return o=t?o:""+" ".repeat(c+1)+s+`
`+o},loadJest:async function(t,e,n){let r,o=!1;try{var i=m(g.resolve(t,"package.json")),s=i&&i.scripts,a=i&&i.devDependencies||{},l=i&&i.dependencies||{};o=!!a.jest||!!l["react-scripts"]||!!l.jest,s&&s.test&&-1!==s.test.indexOf("react-app-rewired")?(this.tryRequireModuleWithPathFrom(t,"react-app-rewired/scripts/test"),this.tryRequireModuleWithPathFrom(t,"react-scripts/config/env"),r=this.tryRequireModuleWithPathFrom(t,"react-scripts/scripts/utils/createJestConfig")):!(s&&s.test&&-1!==s.test.indexOf("react-scripts")||!a)&&a.jest||s&&s.test&&-1!==s.test.indexOf("jest")&&-1===s.test.indexOf("react-scripts")||(r=this.tryRequireModuleWithPathFrom(t,"react-scripts/scripts/utils/createJestConfig"),this.tryRequireModuleWithPathFrom(t,"react-scripts/config/env"))}catch(e){r=void 0}let c,p;e=e&&(g.isAbsolute(e)?e:g.resolve(g.join(t,e)));i=(c=e?this.tryRequireModuleWithPathFrom(e,"jest"):r?this.tryRequireModuleWithPathFrom(r.path,"jest"):this.tryRequireModuleWithPathFrom(t,"jest"))?c.path:t;let u,d="x.x.x";const h=this.tryRequireModuleWithPathFrom(i,"jest-cli");if(!h)throw new Error(`Module jest-cli is not found in '${t}'.`);l=h.module.getVersion?()=>h.module.getVersion():c&&c.module.getVersion?()=>c.module.getVersion():void 0;if(!l)throw new Error("Cannot find compatible jest-cli module.");{let e=0;try{d=l(),e=parseInt(d.split(".")[0])}catch(e){throw new Error(`Cannot detect/parse jest-cli module version: ${e.message}.`)}if(e<24)throw new Error(`Only Jest v24.x or higher is supported, but found v${d} at '${h.path}'.`)}if(p=this.tryRequireModuleWithPathFrom(h.path,"jest-config"))try{n=n&&(g.isAbsolute(n)?n:g.resolve(g.join(t,n))),(u=await p.module.readConfigs(n?{config:n}:r?{config:JSON.stringify(r.module(e=>g.resolve(r.path,"../../..",e)))}:{},[t])).globalConfig=Object.assign({},u.globalConfig),u.configs=(u.configs||[]).filter(e=>"jest-runner"===e.runner||~this.normalizePath(e.runner||"").indexOf("node_modules/jest-runner/")||"jest-runner-groups"===e.runner||~this.normalizePath(e.runner||"").indexOf("node_modules/jest-runner-groups/")).map(e=>Object.assign({},e))}catch(e){throw new Error(`Failed to read Jest configuration from '${t}': `+(e.stack||"unknown."))}if(!u)throw new Error(`Failed to read Jest configuration from '${t}'.`);if(u.configs.length)return{jestConfig:u,jestCLI:h,jestConfigLoader:p,isDirectDependency:o,version:d};throw new Error(`Can not find any Jest runner configurations in '${t}'.`)},serializeRegExp:function(e){if(_.isRegExp(e))return"__REGEXP "+e.toString();if(_.isString(e))return e;throw new Error("Must pass a string or a regular expression")},deserializeRegExp:function(e){var t;return 0===e.indexOf("__REGEXP ")?(t=e.split("__REGEXP ")[1].match(/\/(.*)\/(.*)?/),new RegExp(t[1],t[2]||"")):e},generateNodeModulesExcludesForIncludePatterns:function(e){e=e.map(e=>e.split("/")).filter(e=>"node_modules"===e[0]).reduce((e,t)=>{let n=e;for(let e=0;e<t.length;e++)n.has(t[e])||n.set(t[e],new Map),n=n.get(t[e]);return e},new Map);if(0===e.size)return["node_modules/**"];const r=(t,n)=>{var e=Array.from(t.keys());return 0===e.length?[]:[`${n}/!(${e.join("|")})/**`,...e.map(e=>r(t.get(e),n+"/"+e)).reduce((e,t)=>e.concat(t),[])]};return r(e.get("node_modules"),"node_modules")},isJavaScript:$,isTypeScript:E,isVue:C,isSvelte:L,isCoffeeScript:I,isCoverable:(e,t,n)=>!!($(e,n)||E(e)||C(e)||I(e,t)||L(e)),quickHash:function(e){var t,n,r=0;if(0<e.length)for(t=0,n=e.length;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r},isDocker:S,isWsl:()=>{var e=m("os");if("linux"!==process.platform)return!1;if(e.release().toLowerCase().includes("microsoft"))return!S();try{return!!a.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!S()}catch(e){return!1}},wslHostIpAddress:()=>{var e=a.readFileSync("/etc/resolv.conf").toString().split("\n").map(e=>e.split(" ")).filter(e=>"nameserver"===e[0]).map(e=>1<e.length&&e[1]);return 1<=e.length?e[0]:"127.0.0.1"},lazyLoadDependencyReplacement:(e,t,{doubleQuotes:n,dependencyOverride:r,replaceBothDependencyAndDependencyOverride:o,varType:i}={})=>{n=n?`require("${t}")`:`require('${t}')`,t=r||n,r=[{from:""+e,to:e+"()",optional:!0},{from:(i=i||"var")+` ${e}() = ${t};`,to:`var ${e} = function() { const data = ${t}; ${e} = function() { return data; }; return data; }`,optional:!0}];return o&&r.push({from:i+` ${e}() = ${n};`,to:`var ${e} = function() { const data = ${n}; ${e} = function() { return data; }; return data; }`,optional:!0}),r},findFirstFileMatchingContentInDirectory(e,i){return a.existsSync(e)?o(function e(t){for(const o of a.readdirSync(t)){var n=g.resolve(g.join(t,o));if(a.statSync(n).isDirectory()){var r=e(n);if(r)return r}else if((o.endsWith(".js")||o.endsWith(".mjs"))&&-1!==a.readFileSync(n,"utf8").indexOf(i))return n}}(e)):""},mergeDeep(e,...t){return _.merge(e,...t)},jestTsNodePatch:function(){return{files:["jest-config/build/readConfigFileAndSetRootDir.js","jest-config/build/index.js"],replacements:[{from:"const tsNode = await import('ts-node');",to:`const tsNode = require('${o(g.join(g.dirname(process.mainModule.filename),"node_modules","ts-node","dist","index.js"))}');`,optional:!0},{from:"compilerOptions: {",to:`swc: false, transpileOnly: true, transpiler: [ '${o(g.join(g.dirname(process.mainModule.filename),"node_modules","ts-node","dist","transpilers","swc.js"))}', { swc: '${o(g.join(g.dirname(process.mainModule.filename),"node_modules","@swc","wasm"))}' }], compilerOptions: { experimentalDecorators: false, esModuleInterop: true, `,optional:!0}]}},formatWithoutColors(...e){return(0,r.formatWithOptions)({colors:!1},...e)}}},{"./extension/shared/utils":8,"copy-paste":void 0,fs:void 0,micromatch:void 0,module:void 0,os:void 0,path:void 0,"source-map":void 0,url:void 0,util:void 0}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("../../lib/global");const _=e("../../lib/utils");n.default=function(e,o,n){if(e){if(e.isCoverageIgnored)return{isCoverageIgnored:!0};var r={},i={},s=_.default.textLines(o,void 0,"\n");let t=0;for(let e=0;e<s.length;e++){var a=s[e].length;i[e+1]={index:t,length:a},t+=a+1}if(e.liveComments){var l=[];for(const g of e.liveComments){let t=_.default.mapTextPosition(g.position,n),r=!1;if(null===t.line&&g.position){let e=g.position.column;for(;0<e;)if(e--,null!==(t=_.default.mapTextPosition({line:g.position.line,column:e},n)).line){r=!0;break}}var c=i[t.line];if(c){const n=t.column>c.length-1?c.index+c.length-1:c.index+t.column;if(!r||t.column>c.length-1)l.push({index:n,exp:g.exp});else{var p=/[\s;]/,u=c.index+c.length-1;let t=!1;for(let e=n;e<u;e++)if(p.test(o[e])){l.push({index:e,exp:g.exp}),t=!0;break}t||l.push({index:u,exp:g.exp})}}}r.liveComments=l.length?l:void 0}if(e.ignoreComments){var d=[];for(const f of e.ignoreComments){var h=_.default.mapTextPosition(f.position,n),m=i[h.line];if(m){const e=h.column>m.length-1?m.length-1:m.index+h.column;d.push({index:e})}}r.ignoreComments=d.length?d:void 0}return r}}},{"../../lib/global":9,"../../lib/utils":15}]},{},[13]);
/*
 * wallaby-core
 * https://wallabyjs.com
 * Copyright (c) 2014-2024 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of wallaby-core and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye={exports:{}};(function(K,L){(function(ee,Q){K.exports=Q()})(Je,()=>{return ee={770:function(te,M,o){var k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(M,"__esModule",{value:!0}),M.setDefaultDebugCall=M.createOnigScanner=M.createOnigString=M.loadWASM=M.OnigScanner=M.OnigString=void 0;const y=k(o(418));let u=null,C=!1;class A{static _utf8ByteLength(d){let m=0;for(let I=0,h=d.length;I<h;I++){const l=d.charCodeAt(I);let r=l,e=!1;if(l>=55296&&l<=56319&&I+1<h){const n=d.charCodeAt(I+1);n>=56320&&n<=57343&&(r=65536+(l-55296<<10)|n-56320,e=!0)}m+=r<=127?1:r<=2047?2:r<=65535?3:4,e&&I++}return m}constructor(d){const m=d.length,I=A._utf8ByteLength(d),h=I!==m,l=h?new Uint32Array(m+1):null;h&&(l[m]=I);const r=h?new Uint32Array(I+1):null;h&&(r[I]=m);const e=new Uint8Array(I);let n=0;for(let i=0;i<m;i++){const t=d.charCodeAt(i);let s=t,a=!1;if(t>=55296&&t<=56319&&i+1<m){const _=d.charCodeAt(i+1);_>=56320&&_<=57343&&(s=65536+(t-55296<<10)|_-56320,a=!0)}h&&(l[i]=n,a&&(l[i+1]=n),s<=127?r[n+0]=i:s<=2047?(r[n+0]=i,r[n+1]=i):s<=65535?(r[n+0]=i,r[n+1]=i,r[n+2]=i):(r[n+0]=i,r[n+1]=i,r[n+2]=i,r[n+3]=i)),s<=127?e[n++]=s:s<=2047?(e[n++]=192|(1984&s)>>>6,e[n++]=128|(63&s)>>>0):s<=65535?(e[n++]=224|(61440&s)>>>12,e[n++]=128|(4032&s)>>>6,e[n++]=128|(63&s)>>>0):(e[n++]=240|(1835008&s)>>>18,e[n++]=128|(258048&s)>>>12,e[n++]=128|(4032&s)>>>6,e[n++]=128|(63&s)>>>0),a&&i++}this.utf16Length=m,this.utf8Length=I,this.utf16Value=d,this.utf8Value=e,this.utf16OffsetToUtf8=l,this.utf8OffsetToUtf16=r}createString(d){const m=d._omalloc(this.utf8Length);return d.HEAPU8.set(this.utf8Value,m),m}}class c{constructor(d){if(this.id=++c.LAST_ID,!u)throw new Error("Must invoke loadWASM first.");this._onigBinding=u,this.content=d;const m=new A(d);this.utf16Length=m.utf16Length,this.utf8Length=m.utf8Length,this.utf16OffsetToUtf8=m.utf16OffsetToUtf8,this.utf8OffsetToUtf16=m.utf8OffsetToUtf16,this.utf8Length<1e4&&!c._sharedPtrInUse?(c._sharedPtr||(c._sharedPtr=u._omalloc(1e4)),c._sharedPtrInUse=!0,u.HEAPU8.set(m.utf8Value,c._sharedPtr),this.ptr=c._sharedPtr):this.ptr=m.createString(u)}convertUtf8OffsetToUtf16(d){return this.utf8OffsetToUtf16?d<0?0:d>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[d]:d}convertUtf16OffsetToUtf8(d){return this.utf16OffsetToUtf8?d<0?0:d>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[d]:d}dispose(){this.ptr===c._sharedPtr?c._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}M.OnigString=c,c.LAST_ID=0,c._sharedPtr=0,c._sharedPtrInUse=!1;class p{constructor(d,m){var I,h;if(!u)throw new Error("Must invoke loadWASM first.");const l=[],r=[];for(let a=0,_=d.length;a<_;a++){const v=new A(d[a]);l[a]=v.createString(u),r[a]=v.utf8Length}const e=u._omalloc(4*d.length);u.HEAPU32.set(l,e/4);const n=u._omalloc(4*d.length);u.HEAPU32.set(r,n/4),this._onigBinding=u,this._options=(I=m?.options)!==null&&I!==void 0?I:[10];const i=this.onigOptions(this._options),t=this.onigSyntax((h=m?.syntax)!==null&&h!==void 0?h:0),s=u._createOnigScanner(e,n,d.length,i,t);this._ptr=s;for(let a=0,_=d.length;a<_;a++)u._ofree(l[a]);u._ofree(n),u._ofree(e),s===0&&function(a){throw new Error(a.UTF8ToString(a._getLastOnigError()))}(u)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(d,m,I){let h=C,l=this._options;if(Array.isArray(I)?(I.includes(25)&&(h=!0),l=l.concat(I)):typeof I=="boolean"&&(h=I),typeof d=="string"){d=new c(d);const r=this._findNextMatchSync(d,m,h,l);return d.dispose(),r}return this._findNextMatchSync(d,m,h,l)}_findNextMatchSync(d,m,I,h){const l=this._onigBinding,r=this.onigOptions(h);let e;if(e=I?l._findNextOnigScannerMatchDbg(this._ptr,d.id,d.ptr,d.utf8Length,d.convertUtf16OffsetToUtf8(m),r):l._findNextOnigScannerMatch(this._ptr,d.id,d.ptr,d.utf8Length,d.convertUtf16OffsetToUtf8(m),r),e===0)return null;const n=l.HEAPU32;let i=e/4;const t=n[i++],s=n[i++];let a=[];for(let _=0;_<s;_++){const v=d.convertUtf8OffsetToUtf16(n[i++]),x=d.convertUtf8OffsetToUtf16(n[i++]);a[_]={start:v,end:x,length:x-v}}return{index:t,captureIndices:a}}onigOptions(d){return d.map(m=>this.onigOption(m)).reduce((m,I)=>m|I,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(d){switch(d){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(d){switch(d){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}M.OnigScanner=p;let w=!1,g=null;M.loadWASM=function(S){if(w)return g;let d,m,I,h;if(w=!0,function(l){return typeof l.instantiator=="function"}(S))d=S.instantiator,m=S.print;else{let l;(function(r){return r.data!==void 0})(S)?(l=S.data,m=S.print):l=S,d=function(r){return typeof Response<"u"&&r instanceof Response}(l)?typeof WebAssembly.instantiateStreaming=="function"?function(r){return e=>WebAssembly.instantiateStreaming(r,e)}(l):function(r){return async e=>{const n=await r.arrayBuffer();return WebAssembly.instantiate(n,e)}}(l):function(r){return e=>WebAssembly.instantiate(r,e)}(l)}return g=new Promise((l,r)=>{I=l,h=r}),function(l,r,e,n){(0,y.default)({print:r,instantiateWasm:(i,t)=>{if(typeof performance>"u"){const s=()=>Date.now();i.env.emscripten_get_now=s,i.wasi_snapshot_preview1.emscripten_get_now=s}return l(i).then(s=>t(s.instance),n),{}}}).then(i=>{u=i,e()})}(d,m,I,h),g},M.createOnigString=function(S){return new c(S)},M.createOnigScanner=function(S){return new p(S)},M.setDefaultDebugCall=function(S){C=S}},418:te=>{var M=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(o={}){var k,y,u=o;u.ready=new Promise((f,b)=>{k=f,y=b});var C,A=Object.assign({},u);typeof read<"u"&&read,C=f=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(f));let b=read(f,"binary");return typeof b=="object"||x(O),b;var O},typeof clearTimeout>"u"&&(globalThis.clearTimeout=f=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=f=>typeof f=="function"?f():x()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var c,p,w=u.print||console.log.bind(console),g=u.printErr||console.error.bind(console);Object.assign(u,A),A=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&u.quit,u.wasmBinary&&(c=u.wasmBinary),u.noExitRuntime,typeof WebAssembly!="object"&&x("no native wasm support detected");var S,d,m,I,h,l,r,e,n=!1;function i(){var f=p.buffer;u.HEAP8=S=new Int8Array(f),u.HEAP16=m=new Int16Array(f),u.HEAPU8=d=new Uint8Array(f),u.HEAPU16=I=new Uint16Array(f),u.HEAP32=h=new Int32Array(f),u.HEAPU32=l=new Uint32Array(f),u.HEAPF32=r=new Float32Array(f),u.HEAPF64=e=new Float64Array(f)}var t=[],s=[],a=[],_=0,v=null;function x(f){u.onAbort&&u.onAbort(f),g(f="Aborted("+f+")"),n=!0,f+=". Build with -sASSERTIONS for more info.";var b=new WebAssembly.RuntimeError(f);throw y(b),b}var T,F;function z(f){return f.startsWith("data:application/octet-stream;base64,")}function J(f){if(f==T&&c)return new Uint8Array(c);if(C)return C(f);throw"both async and sync fetching of the wasm failed"}function j(f,b,O){return function(N){return Promise.resolve().then(()=>J(N))}(f).then(N=>WebAssembly.instantiate(N,b)).then(N=>N).then(O,N=>{g(`failed to asynchronously prepare wasm: ${N}`),x(N)})}z(T="onig.wasm")||(F=T,T=u.locateFile?u.locateFile(F,""):""+F);var V=f=>{for(;f.length>0;)f.shift()(u)},ie=void 0,H=f=>{for(var b="",O=f;d[O];)b+=ie[d[O++]];return b},$={},X={},Y=void 0,ce=f=>{throw new Y(f)},R=void 0,ne=(f,b,O)=>{function N(W){var B=O(W);B.length!==f.length&&(se=>{throw new R(se)})("Mismatched type converter count");for(var D=0;D<f.length;++D)U(f[D],B[D])}f.forEach(function(W){});var P=new Array(b.length),G=[],E=0;b.forEach((W,B)=>{X.hasOwnProperty(W)?P[B]=X[W]:(G.push(W),$.hasOwnProperty(W)||($[W]=[]),$[W].push(()=>{P[B]=X[W],++E===G.length&&N(P)}))}),G.length===0&&N(P)};function U(f,b,O={}){if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(N,P,G={}){var E=P.name;if(N||ce(`type "${E}" must have a positive integer typeid pointer`),X.hasOwnProperty(N)){if(G.ignoreDuplicateRegistrations)return;ce(`Cannot register type '${E}' twice`)}if(X[N]=P,$.hasOwnProperty(N)){var W=$[N];delete $[N],W.forEach(B=>B())}}(f,b,O)}function he(){this.allocated=[void 0],this.freelist=[]}var oe=new he,we=()=>{for(var f=0,b=oe.reserved;b<oe.allocated.length;++b)oe.allocated[b]!==void 0&&++f;return f},me=f=>(f||ce("Cannot use deleted val. handle = "+f),oe.get(f).value),fe=f=>{switch(f){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return oe.allocate({refcount:1,value:f})}};function _e(f){return this.fromWireType(h[f>>2])}var ye=(f,b)=>{switch(b){case 4:return function(O){return this.fromWireType(r[O>>2])};case 8:return function(O){return this.fromWireType(e[O>>3])};default:throw new TypeError(`invalid float width (${b}): ${f}`)}},be=(f,b,O)=>{switch(b){case 1:return O?N=>S[N>>0]:N=>d[N>>0];case 2:return O?N=>m[N>>1]:N=>I[N>>1];case 4:return O?N=>h[N>>2]:N=>l[N>>2];default:throw new TypeError(`invalid integer width (${b}): ${f}`)}};function Se(f){return this.fromWireType(l[f>>2])}var pe,ue=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ie=(f,b,O)=>{for(var N=b+O,P=b;f[P]&&!(P>=N);)++P;if(P-b>16&&f.buffer&&ue)return ue.decode(f.subarray(b,P));for(var G="";b<P;){var E=f[b++];if(128&E){var W=63&f[b++];if((224&E)!=192){var B=63&f[b++];if((E=(240&E)==224?(15&E)<<12|W<<6|B:(7&E)<<18|W<<12|B<<6|63&f[b++])<65536)G+=String.fromCharCode(E);else{var D=E-65536;G+=String.fromCharCode(55296|D>>10,56320|1023&D)}}else G+=String.fromCharCode((31&E)<<6|W)}else G+=String.fromCharCode(E)}return G},Ce=(f,b)=>f?Ie(d,f,b):"",Ne=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ae=(f,b)=>{for(var O=f,N=O>>1,P=N+b/2;!(N>=P)&&I[N];)++N;if((O=N<<1)-f>32&&Ne)return Ne.decode(d.subarray(f,O));for(var G="",E=0;!(E>=b/2);++E){var W=m[f+2*E>>1];if(W==0)break;G+=String.fromCharCode(W)}return G},Le=(f,b,O)=>{if(O===void 0&&(O=2147483647),O<2)return 0;for(var N=b,P=(O-=2)<2*f.length?O/2:f.length,G=0;G<P;++G){var E=f.charCodeAt(G);m[b>>1]=E,b+=2}return m[b>>1]=0,b-N},Re=f=>2*f.length,Me=(f,b)=>{for(var O=0,N="";!(O>=b/4);){var P=h[f+4*O>>2];if(P==0)break;if(++O,P>=65536){var G=P-65536;N+=String.fromCharCode(55296|G>>10,56320|1023&G)}else N+=String.fromCharCode(P)}return N},ve=(f,b,O)=>{if(O===void 0&&(O=2147483647),O<4)return 0;for(var N=b,P=N+O-4,G=0;G<f.length;++G){var E=f.charCodeAt(G);if(E>=55296&&E<=57343&&(E=65536+((1023&E)<<10)|1023&f.charCodeAt(++G)),h[b>>2]=E,(b+=4)+4>P)break}return h[b>>2]=0,b-N},Oe=f=>{for(var b=0,O=0;O<f.length;++O){var N=f.charCodeAt(O);N>=55296&&N<=57343&&++O,b+=4}return b};pe=()=>performance.now();var qe=f=>{var b=(f-p.buffer.byteLength+65535)/65536;try{return p.grow(b),i(),1}catch{}},Qe=[null,[],[]];(()=>{for(var f=new Array(256),b=0;b<256;++b)f[b]=String.fromCharCode(b);ie=f})(),Y=u.BindingError=class extends Error{constructor(f){super(f),this.name="BindingError"}},R=u.InternalError=class extends Error{constructor(f){super(f),this.name="InternalError"}},Object.assign(he.prototype,{get(f){return this.allocated[f]},has(f){return this.allocated[f]!==void 0},allocate(f){var b=this.freelist.pop()||this.allocated.length;return this.allocated[b]=f,b},free(f){this.allocated[f]=void 0,this.freelist.push(f)}}),oe.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),oe.reserved=oe.allocated.length,u.count_emval_handles=we;var Te,Xe={_embind_register_bigint:(f,b,O,N,P)=>{},_embind_register_bool:(f,b,O,N)=>{U(f,{name:b=H(b),fromWireType:function(P){return!!P},toWireType:function(P,G){return G?O:N},argPackAdvance:8,readValueFromPointer:function(P){return this.fromWireType(d[P])},destructorFunction:null})},_embind_register_constant:(f,b,O)=>{f=H(f),ne([],[b],function(N){return N=N[0],u[f]=N.fromWireType(O),[]})},_embind_register_emval:(f,b)=>{U(f,{name:b=H(b),fromWireType:O=>{var N=me(O);return(P=>{P>=oe.reserved&&--oe.get(P).refcount==0&&oe.free(P)})(O),N},toWireType:(O,N)=>fe(N),argPackAdvance:8,readValueFromPointer:_e,destructorFunction:null})},_embind_register_float:(f,b,O)=>{U(f,{name:b=H(b),fromWireType:N=>N,toWireType:(N,P)=>P,argPackAdvance:8,readValueFromPointer:ye(b,O),destructorFunction:null})},_embind_register_integer:(f,b,O,N,P)=>{b=H(b);var G=B=>B;if(N===0){var E=32-8*O;G=B=>B<<E>>>E}var W=b.includes("unsigned");U(f,{name:b,fromWireType:G,toWireType:W?function(B,D){return this.name,D>>>0}:function(B,D){return this.name,D},argPackAdvance:8,readValueFromPointer:be(b,O,N!==0),destructorFunction:null})},_embind_register_memory_view:(f,b,O)=>{var N=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];function P(G){var E=l[G>>2],W=l[G+4>>2];return new N(S.buffer,W,E)}U(f,{name:O=H(O),fromWireType:P,argPackAdvance:8,readValueFromPointer:P},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(f,b)=>{var O=(b=H(b))==="std::string";U(f,{name:b,fromWireType:N=>{var P,G=l[N>>2],E=N+4;if(O)for(var W=E,B=0;B<=G;++B){var D=E+B;if(B==G||d[D]==0){var se=Ce(W,D-W);P===void 0?P=se:(P+="\0",P+=se),W=D+1}}else{var q=new Array(G);for(B=0;B<G;++B)q[B]=String.fromCharCode(d[E+B]);P=q.join("")}return ge(N),P},toWireType:(N,P)=>{var G;P instanceof ArrayBuffer&&(P=new Uint8Array(P));var E=typeof P=="string";E||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int8Array||ce("Cannot pass non-string to std::string"),G=O&&E?(q=>{for(var re=0,Z=0;Z<q.length;++Z){var de=q.charCodeAt(Z);de<=127?re++:de<=2047?re+=2:de>=55296&&de<=57343?(re+=4,++Z):re+=3}return re})(P):P.length;var W=Fe(4+G+1),B=W+4;if(l[W>>2]=G,O&&E)((q,re,Z,de)=>{if(!(de>0))return 0;for(var Be=Z,Pe=Z+de-1,xe=0;xe<q.length;++xe){var ae=q.charCodeAt(xe);if(ae>=55296&&ae<=57343&&(ae=65536+((1023&ae)<<10)|1023&q.charCodeAt(++xe)),ae<=127){if(Z>=Pe)break;re[Z++]=ae}else if(ae<=2047){if(Z+1>=Pe)break;re[Z++]=192|ae>>6,re[Z++]=128|63&ae}else if(ae<=65535){if(Z+2>=Pe)break;re[Z++]=224|ae>>12,re[Z++]=128|ae>>6&63,re[Z++]=128|63&ae}else{if(Z+3>=Pe)break;re[Z++]=240|ae>>18,re[Z++]=128|ae>>12&63,re[Z++]=128|ae>>6&63,re[Z++]=128|63&ae}}re[Z]=0})(P,d,B,G+1);else if(E)for(var D=0;D<G;++D){var se=P.charCodeAt(D);se>255&&(ge(B),ce("String has UTF-16 code units that do not fit in 8 bits")),d[B+D]=se}else for(D=0;D<G;++D)d[B+D]=P[D];return N!==null&&N.push(ge,W),W},argPackAdvance:8,readValueFromPointer:Se,destructorFunction:N=>ge(N)})},_embind_register_std_wstring:(f,b,O)=>{var N,P,G,E,W;O=H(O),b===2?(N=Ae,P=Le,E=Re,G=()=>I,W=1):b===4&&(N=Me,P=ve,E=Oe,G=()=>l,W=2),U(f,{name:O,fromWireType:B=>{for(var D,se=l[B>>2],q=G(),re=B+4,Z=0;Z<=se;++Z){var de=B+4+Z*b;if(Z==se||q[de>>W]==0){var Be=N(re,de-re);D===void 0?D=Be:(D+="\0",D+=Be),re=de+b}}return ge(B),D},toWireType:(B,D)=>{typeof D!="string"&&ce(`Cannot pass non-string to C++ string type ${O}`);var se=E(D),q=Fe(4+se+b);return l[q>>2]=se>>W,P(D,q+4,se+b),B!==null&&B.push(ge,q),q},argPackAdvance:8,readValueFromPointer:_e,destructorFunction:B=>ge(B)})},_embind_register_void:(f,b)=>{U(f,{isVoid:!0,name:b=H(b),argPackAdvance:0,fromWireType:()=>{},toWireType:(O,N)=>{}})},emscripten_get_now:pe,emscripten_memcpy_big:(f,b,O)=>d.copyWithin(f,b,b+O),emscripten_resize_heap:f=>{var b=d.length,O=2147483648;if((f>>>=0)>O)return!1;for(var N,P=1;P<=4;P*=2){var G=b*(1+.2/P);G=Math.min(G,f+100663296);var E=Math.min(O,(N=Math.max(f,G))+(65536-N%65536)%65536);if(qe(E))return!0}return!1},fd_write:(f,b,O,N)=>{for(var P=0,G=0;G<O;G++){var E=l[b>>2],W=l[b+4>>2];b+=8;for(var B=0;B<W;B++)D=f,se=d[E+B],q=void 0,q=Qe[D],se===0||se===10?((D===1?w:g)(Ie(q,0)),q.length=0):q.push(se);P+=W}var D,se,q;return l[N>>2]=P,0}},le=function(){var f,b,O,N,P={env:Xe,wasi_snapshot_preview1:Xe};function G(E,W){var B,D=E.exports;return p=(le=D).memory,i(),le.__indirect_function_table,B=le.__wasm_call_ctors,s.unshift(B),function(se){if(_--,u.monitorRunDependencies&&u.monitorRunDependencies(_),_==0&&v){var q=v;v=null,q()}}(),D}if(_++,u.monitorRunDependencies&&u.monitorRunDependencies(_),u.instantiateWasm)try{return u.instantiateWasm(P,G)}catch(E){g(`Module.instantiateWasm callback failed with error: ${E}`),y(E)}return(f=c,b=T,O=P,N=function(E){G(E.instance)},f||typeof WebAssembly.instantiateStreaming!="function"||z(b)||typeof fetch!="function"?j(b,O,N):fetch(b,{credentials:"same-origin"}).then(E=>WebAssembly.instantiateStreaming(E,O).then(N,function(W){return g(`wasm streaming compile failed: ${W}`),g("falling back to ArrayBuffer instantiation"),j(b,O,N)}))).catch(y),{}}(),Fe=f=>(Fe=le.malloc)(f),ge=f=>(ge=le.free)(f);function He(){function f(){Te||(Te=!0,u.calledRun=!0,n||(V(s),k(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),function(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)b=u.postRun.shift(),a.unshift(b);var b;V(a)}()))}_>0||(function(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)b=u.preRun.shift(),t.unshift(b);var b;V(t)}(),_>0||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),f()},1)):f()))}if(u._omalloc=f=>(u._omalloc=le.omalloc)(f),u._ofree=f=>(u._ofree=le.ofree)(f),u._getLastOnigError=()=>(u._getLastOnigError=le.getLastOnigError)(),u._createOnigScanner=(f,b,O,N,P)=>(u._createOnigScanner=le.createOnigScanner)(f,b,O,N,P),u._freeOnigScanner=f=>(u._freeOnigScanner=le.freeOnigScanner)(f),u._findNextOnigScannerMatch=(f,b,O,N,P,G)=>(u._findNextOnigScannerMatch=le.findNextOnigScannerMatch)(f,b,O,N,P,G),u._findNextOnigScannerMatchDbg=(f,b,O,N,P,G)=>(u._findNextOnigScannerMatchDbg=le.findNextOnigScannerMatchDbg)(f,b,O,N,P,G),u.__embind_initialize_bindings=()=>(u.__embind_initialize_bindings=le._embind_initialize_bindings)(),u.dynCall_jiji=(f,b,O,N,P)=>(u.dynCall_jiji=le.dynCall_jiji)(f,b,O,N,P),u.UTF8ToString=Ce,v=function f(){Te||He(),Te||(v=f)},u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return He(),o.ready});te.exports=M}},Q={},function te(M){var o=Q[M];if(o!==void 0)return o.exports;var k=Q[M]={exports:{}};return ee[M].call(k.exports,k,k.exports,te),k.exports}(770);var ee,Q})})(Ye);var We=Ye.exports,Ze={exports:{}};(function(K,L){var ee={};(function(Q,te){K.exports=te()})(Je,()=>(()=>{var Q={350:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UseOnigurumaFindOptions=o.DebugFlags=void 0,o.DebugFlags={InDebugMode:typeof process<"u"&&!!ee.VSCODE_TEXTMATE_DEBUG},o.UseOnigurumaFindOptions=!1},442:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.applyStateStackDiff=o.diffStateStacksRefEq=void 0;const y=k(391);o.diffStateStacksRefEq=function(u,C){let A=0;const c=[];let p=u,w=C;for(;p!==w;)p&&(!w||p.depth>=w.depth)?(A++,p=p.parent):(c.push(w.toStateStackFrame()),w=w.parent);return{pops:A,newFrames:c.reverse()}},o.applyStateStackDiff=function(u,C){let A=u;for(let c=0;c<C.pops;c++)A=A.parent;for(const c of C.newFrames)A=y.StateStackImpl.pushFrame(A,c);return A}},36:(M,o)=>{var k;Object.defineProperty(o,"__esModule",{value:!0}),o.toOptionalTokenType=o.EncodedTokenAttributes=void 0,(k=o.EncodedTokenAttributes||(o.EncodedTokenAttributes={})).toBinaryStr=function(y){return y.toString(2).padStart(32,"0")},k.print=function(y){const u=k.getLanguageId(y),C=k.getTokenType(y),A=k.getFontStyle(y),c=k.getForeground(y),p=k.getBackground(y);console.log({languageId:u,tokenType:C,fontStyle:A,foreground:c,background:p})},k.getLanguageId=function(y){return(255&y)>>>0},k.getTokenType=function(y){return(768&y)>>>8},k.containsBalancedBrackets=function(y){return(1024&y)!=0},k.getFontStyle=function(y){return(30720&y)>>>11},k.getForeground=function(y){return(16744448&y)>>>15},k.getBackground=function(y){return(4278190080&y)>>>24},k.set=function(y,u,C,A,c,p,w){let g=k.getLanguageId(y),S=k.getTokenType(y),d=k.containsBalancedBrackets(y)?1:0,m=k.getFontStyle(y),I=k.getForeground(y),h=k.getBackground(y);return u!==0&&(g=u),C!==8&&(S=C),A!==null&&(d=A?1:0),c!==-1&&(m=c),p!==0&&(I=p),w!==0&&(h=w),(g<<0|S<<8|d<<10|m<<11|I<<15|h<<24)>>>0},o.toOptionalTokenType=function(y){return y}},996:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BasicScopeAttributesProvider=o.BasicScopeAttributes=void 0;const y=k(878);class u{constructor(p,w){this.languageId=p,this.tokenType=w}}o.BasicScopeAttributes=u;class C{constructor(p,w){this._getBasicScopeAttributes=new y.CachedFn(g=>{const S=this._scopeToLanguage(g),d=this._toStandardTokenType(g);return new u(S,d)}),this._defaultAttributes=new u(p,8),this._embeddedLanguagesMatcher=new A(Object.entries(w||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(p){return p===null?C._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(p)}_scopeToLanguage(p){return this._embeddedLanguagesMatcher.match(p)||0}_toStandardTokenType(p){const w=p.match(C.STANDARD_TOKEN_TYPE_REGEXP);if(!w)return 8;switch(w[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}o.BasicScopeAttributesProvider=C,C._NULL_SCOPE_METADATA=new u(0,0),C.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class A{constructor(p){if(p.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(p);const w=p.map(([g,S])=>y.escapeRegExpCharacters(g));w.sort(),w.reverse(),this.scopesRegExp=new RegExp(`^((${w.join(")|(")}))($|\\.)`,"")}}match(p){if(!this.scopesRegExp)return;const w=p.match(this.scopesRegExp);return w?this.values.get(w[1]):void 0}}},947:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LineTokens=o.BalancedBracketSelectors=o.StateStackImpl=o.AttributedScopeStack=o.Grammar=o.createGrammar=void 0;const y=k(350),u=k(36),C=k(736),A=k(44),c=k(792),p=k(583),w=k(878),g=k(996),S=k(47);function d(i,t,s,a,_){const v=C.createMatchers(t,m),x=c.RuleFactory.getCompiledRuleId(s,a,_.repository);for(const T of v)i.push({debugSelector:t,matcher:T.matcher,ruleId:x,grammar:_,priority:T.priority})}function m(i,t){if(t.length<i.length)return!1;let s=0;return i.every(a=>{for(let _=s;_<t.length;_++)if(I(t[_],a))return s=_+1,!0;return!1})}function I(i,t){if(!i)return!1;if(i===t)return!0;const s=t.length;return i.length>s&&i.substr(0,s)===t&&i[s]==="."}o.createGrammar=function(i,t,s,a,_,v,x,T){return new h(i,t,s,a,_,v,x,T)};class h{constructor(t,s,a,_,v,x,T,F){if(this._rootScopeName=t,this.balancedBracketSelectors=x,this._onigLib=F,this._basicScopeAttributesProvider=new g.BasicScopeAttributesProvider(a,_),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=T,this._grammar=l(s,null),this._injections=null,this._tokenTypeMatchers=[],v)for(const z of Object.keys(v)){const J=C.createMatchers(z,m);for(const j of J)this._tokenTypeMatchers.push({matcher:j.matcher,type:v[z]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t=[],s=this._rootScopeName,a=(_=>_===this._rootScopeName?this._grammar:this.getExternalGrammar(_))(s);if(a){const _=a.injections;if(_)for(let x in _)d(t,x,_[x],this,a);const v=this._grammarRepository.injections(s);v&&v.forEach(x=>{const T=this.getExternalGrammar(x);if(T){const F=T.injectionSelector;F&&d(t,F,T,this,T)}})}return t.sort((_,v)=>_.priority-v.priority),t}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),y.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const t of this._injections)console.log(`  - ${t.debugSelector}`)}return this._injections}registerRule(t){const s=++this._lastRuleId,a=t(c.ruleIdFromNumber(s));return this._ruleId2desc[s]=a,a}getRule(t){return this._ruleId2desc[c.ruleIdToNumber(t)]}getExternalGrammar(t,s){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const a=this._grammarRepository.lookup(t);if(a)return this._includedGrammars[t]=l(a,s&&s.$base),this._includedGrammars[t]}}tokenizeLine(t,s,a=0){const _=this._tokenize(t,s,!1,a);return{tokens:_.lineTokens.getResult(_.ruleStack,_.lineLength),ruleStack:_.ruleStack,stoppedEarly:_.stoppedEarly}}tokenizeLine2(t,s,a=0){const _=this._tokenize(t,s,!0,a);return{tokens:_.lineTokens.getBinaryResult(_.ruleStack,_.lineLength),ruleStack:_.ruleStack,stoppedEarly:_.stoppedEarly}}_tokenize(t,s,a,_){let v;if(this._rootId===-1&&(this._rootId=c.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),s&&s!==e.NULL)v=!1,s.reset();else{v=!0;const J=this._basicScopeAttributesProvider.getDefaultAttributes(),j=this.themeProvider.getDefaults(),V=u.EncodedTokenAttributes.set(0,J.languageId,J.tokenType,null,j.fontStyle,j.foregroundId,j.backgroundId),ie=this.getRule(this._rootId).getName(null,null);let H;H=ie?r.createRootAndLookUpScopeName(ie,V,this):r.createRoot("unknown",V),s=new e(null,this._rootId,-1,-1,!1,null,H,H)}t+=`
`;const x=this.createOnigString(t),T=x.content.length,F=new n(a,t,this._tokenTypeMatchers,this.balancedBracketSelectors),z=S._tokenizeString(this,x,v,0,s,F,!0,_);return A.disposeOnigString(x),{lineLength:T,lineTokens:F,ruleStack:z.stack,stoppedEarly:z.stoppedEarly}}}function l(i,t){return(i=w.clone(i)).repository=i.repository||{},i.repository.$self={$vscodeTextmateLocation:i.$vscodeTextmateLocation,patterns:i.patterns,name:i.scopeName},i.repository.$base=t||i.repository.$self,i}o.Grammar=h;class r{constructor(t,s,a){this.parent=t,this.scopePath=s,this.tokenAttributes=a}static fromExtension(t,s){let a=t,_=t?.scopePath??null;for(const v of s)_=p.ScopeStack.push(_,v.scopeNames),a=new r(a,_,v.encodedTokenAttributes);return a}static createRoot(t,s){return new r(null,new p.ScopeStack(null,t),s)}static createRootAndLookUpScopeName(t,s,a){const _=a.getMetadataForScope(t),v=new p.ScopeStack(null,t),x=a.themeProvider.themeMatch(v),T=r.mergeAttributes(s,_,x);return new r(null,v,T)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return r.equals(this,t)}static equals(t,s){for(;;){if(t===s||!t&&!s)return!0;if(!t||!s||t.scopeName!==s.scopeName||t.tokenAttributes!==s.tokenAttributes)return!1;t=t.parent,s=s.parent}}static mergeAttributes(t,s,a){let _=-1,v=0,x=0;return a!==null&&(_=a.fontStyle,v=a.foregroundId,x=a.backgroundId),u.EncodedTokenAttributes.set(t,s.languageId,s.tokenType,null,_,v,x)}pushAttributed(t,s){if(t===null)return this;if(t.indexOf(" ")===-1)return r._pushAttributed(this,t,s);const a=t.split(/ /g);let _=this;for(const v of a)_=r._pushAttributed(_,v,s);return _}static _pushAttributed(t,s,a){const _=a.getMetadataForScope(s),v=t.scopePath.push(s),x=a.themeProvider.themeMatch(v),T=r.mergeAttributes(t.tokenAttributes,_,x);return new r(t,v,T)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){const s=[];let a=this;for(;a&&a!==t;)s.push({encodedTokenAttributes:a.tokenAttributes,scopeNames:a.scopePath.getExtensionIfDefined(a.parent?.scopePath??null)}),a=a.parent;return a===t?s.reverse():void 0}}o.AttributedScopeStack=r;class e{constructor(t,s,a,_,v,x,T,F){this.parent=t,this.ruleId=s,this.beginRuleCapturedEOL=v,this.endRule=x,this.nameScopesList=T,this.contentNameScopesList=F,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=a,this._anchorPos=_}equals(t){return t!==null&&e._equals(this,t)}static _equals(t,s){return t===s||!!this._structuralEquals(t,s)&&r.equals(t.contentNameScopesList,s.contentNameScopesList)}static _structuralEquals(t,s){for(;;){if(t===s||!t&&!s)return!0;if(!t||!s||t.depth!==s.depth||t.ruleId!==s.ruleId||t.endRule!==s.endRule)return!1;t=t.parent,s=s.parent}}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,s,a,_,v,x,T){return new e(this,t,s,a,_,v,x,T)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,s){return this.parent&&(s=this.parent._writeString(t,s)),t[s++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,s}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let s=this;for(;s&&s._enterPos===t._enterPos;){if(s.ruleId===t.ruleId)return!0;s=s.parent}return!1}toStateStackFrame(){return{ruleId:c.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,s){const a=r.fromExtension(t?.nameScopesList??null,s.nameScopesList);return new e(t,c.ruleIdFromNumber(s.ruleId),s.enterPos??-1,s.anchorPos??-1,s.beginRuleCapturedEOL,s.endRule,a,r.fromExtension(a,s.contentNameScopesList))}}o.StateStackImpl=e,e.NULL=new e(null,0,0,0,!1,null,null,null),o.BalancedBracketSelectors=class{constructor(i,t){this.allowAny=!1,this.balancedBracketScopes=i.flatMap(s=>s==="*"?(this.allowAny=!0,[]):C.createMatchers(s,m).map(a=>a.matcher)),this.unbalancedBracketScopes=t.flatMap(s=>C.createMatchers(s,m).map(a=>a.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(i){for(const t of this.unbalancedBracketScopes)if(t(i))return!1;for(const t of this.balancedBracketScopes)if(t(i))return!0;return this.allowAny}};class n{constructor(t,s,a,_){this.balancedBracketSelectors=_,this._emitBinaryTokens=t,this._tokenTypeOverrides=a,y.DebugFlags.InDebugMode?this._lineText=s:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,s){this.produceFromScopes(t.contentNameScopesList,s)}produceFromScopes(t,s){if(this._lastTokenEndIndex>=s)return;if(this._emitBinaryTokens){let _=t?.tokenAttributes??0,v=!1;if(this.balancedBracketSelectors?.matchesAlways&&(v=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const x=t?.getScopeNames()??[];for(const T of this._tokenTypeOverrides)T.matcher(x)&&(_=u.EncodedTokenAttributes.set(_,0,u.toOptionalTokenType(T.type),null,-1,0,0));this.balancedBracketSelectors&&(v=this.balancedBracketSelectors.match(x))}if(v&&(_=u.EncodedTokenAttributes.set(_,0,8,v,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===_)return void(this._lastTokenEndIndex=s);if(y.DebugFlags.InDebugMode){const x=t?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,s).replace(/\n$/,"\\n")+"|");for(let T=0;T<x.length;T++)console.log("      * "+x[T])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(_),void(this._lastTokenEndIndex=s)}const a=t?.getScopeNames()??[];if(y.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,s).replace(/\n$/,"\\n")+"|");for(let _=0;_<a.length;_++)console.log("      * "+a[_])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:s,scopes:a}),this._lastTokenEndIndex=s}getResult(t,s){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===s-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,s),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,s){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===s-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,s),this._binaryTokens[this._binaryTokens.length-2]=0);const a=new Uint32Array(this._binaryTokens.length);for(let _=0,v=this._binaryTokens.length;_<v;_++)a[_]=this._binaryTokens[_];return a}}o.LineTokens=n},965:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.parseInclude=o.TopLevelRepositoryReference=o.TopLevelReference=o.RelativeReference=o.SelfReference=o.BaseReference=o.ScopeDependencyProcessor=o.ExternalReferenceCollector=o.TopLevelRepositoryRuleReference=o.TopLevelRuleReference=void 0;const y=k(878);class u{constructor(e){this.scopeName=e}toKey(){return this.scopeName}}o.TopLevelRuleReference=u;class C{constructor(e,n){this.scopeName=e,this.ruleName=n}toKey(){return`${this.scopeName}#${this.ruleName}`}}o.TopLevelRepositoryRuleReference=C;class A{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const n=e.toKey();this._seenReferenceKeys.has(n)||(this._seenReferenceKeys.add(n),this._references.push(e))}}function c(r,e,n,i){const t=n.lookup(r.scopeName);if(!t){if(r.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);r instanceof u?w({baseGrammar:s,selfGrammar:t},i):p(r.ruleName,{baseGrammar:s,selfGrammar:t,repository:t.repository},i);const a=n.injections(r.scopeName);if(a)for(const _ of a)i.add(new u(_))}function p(r,e,n){e.repository&&e.repository[r]&&g([e.repository[r]],e,n)}function w(r,e){r.selfGrammar.patterns&&Array.isArray(r.selfGrammar.patterns)&&g(r.selfGrammar.patterns,{...r,repository:r.selfGrammar.repository},e),r.selfGrammar.injections&&g(Object.values(r.selfGrammar.injections),{...r,repository:r.selfGrammar.repository},e)}function g(r,e,n){for(const i of r){if(n.visitedRule.has(i))continue;n.visitedRule.add(i);const t=i.repository?y.mergeObjects({},e.repository,i.repository):e.repository;Array.isArray(i.patterns)&&g(i.patterns,{...e,repository:t},n);const s=i.include;if(!s)continue;const a=l(s);switch(a.kind){case 0:w({...e,selfGrammar:e.baseGrammar},n);break;case 1:w(e,n);break;case 2:p(a.ruleName,{...e,repository:t},n);break;case 3:case 4:const _=a.scopeName===e.selfGrammar.scopeName?e.selfGrammar:a.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(_){const v={baseGrammar:e.baseGrammar,selfGrammar:_,repository:t};a.kind===4?p(a.ruleName,v,n):w(v,n)}else a.kind===4?n.add(new C(a.scopeName,a.ruleName)):n.add(new u(a.scopeName))}}}o.ExternalReferenceCollector=A,o.ScopeDependencyProcessor=class{constructor(r,e){this.repo=r,this.initialScopeName=e,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new u(this.initialScopeName)]}processQueue(){const r=this.Q;this.Q=[];const e=new A;for(const n of r)c(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof u){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};class S{constructor(){this.kind=0}}o.BaseReference=S;class d{constructor(){this.kind=1}}o.SelfReference=d;class m{constructor(e){this.ruleName=e,this.kind=2}}o.RelativeReference=m;class I{constructor(e){this.scopeName=e,this.kind=3}}o.TopLevelReference=I;class h{constructor(e,n){this.scopeName=e,this.ruleName=n,this.kind=4}}function l(r){if(r==="$base")return new S;if(r==="$self")return new d;const e=r.indexOf("#");if(e===-1)return new I(r);if(e===0)return new m(r.substring(1));{const n=r.substring(0,e),i=r.substring(e+1);return new h(n,i)}}o.TopLevelRepositoryReference=h,o.parseInclude=l},391:function(M,o,k){var y=this&&this.__createBinding||(Object.create?function(C,A,c,p){p===void 0&&(p=c),Object.defineProperty(C,p,{enumerable:!0,get:function(){return A[c]}})}:function(C,A,c,p){p===void 0&&(p=c),C[p]=A[c]}),u=this&&this.__exportStar||function(C,A){for(var c in C)c==="default"||Object.prototype.hasOwnProperty.call(A,c)||y(A,C,c)};Object.defineProperty(o,"__esModule",{value:!0}),u(k(947),o)},47:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStackElement=o._tokenizeString=void 0;const y=k(350),u=k(44),C=k(792),A=k(878);class c{constructor(h,l){this.stack=h,this.stoppedEarly=l}}function p(I,h,l,r,e,n,i,t){const s=h.content.length;let a=!1,_=-1;if(i){const T=function(F,z,J,j,V,ie){let H=V.beginRuleCapturedEOL?0:-1;const $=[];for(let X=V;X;X=X.pop()){const Y=X.getRule(F);Y instanceof C.BeginWhileRule&&$.push({rule:Y,stack:X})}for(let X=$.pop();X;X=$.pop()){const{ruleScanner:Y,findOptions:ce}=g(X.rule,F,X.stack.endRule,J,j===H),R=Y.findNextMatchSync(z,j,ce);if(y.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(Y.toString())),!R){y.DebugFlags.InDebugMode&&console.log("  popping "+X.rule.debugName+" - "+X.rule.debugWhileRegExp),V=X.stack.pop();break}if(R.ruleId!==C.whileRuleId){V=X.stack.pop();break}R.captureIndices&&R.captureIndices.length&&(ie.produce(X.stack,R.captureIndices[0].start),d(F,z,J,X.stack,ie,X.rule.whileCaptures,R.captureIndices),ie.produce(X.stack,R.captureIndices[0].end),H=R.captureIndices[0].end,R.captureIndices[0].end>j&&(j=R.captureIndices[0].end,J=!1))}return{stack:V,linePos:j,anchorPosition:H,isFirstLine:J}}(I,h,l,r,e,n);e=T.stack,r=T.linePos,l=T.isFirstLine,_=T.anchorPosition}const v=Date.now();for(;!a;){if(t!==0&&Date.now()-v>t)return new c(e,!0);x()}return new c(e,!1);function x(){y.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${r}: |${h.content.substr(r).replace(/\n$/,"\\n")}|`));const T=function(j,V,ie,H,$,X){const Y=function(he,oe,we,me,fe,_e){const ye=fe.getRule(he),{ruleScanner:be,findOptions:Se}=w(ye,he,fe.endRule,we,me===_e);let pe=0;y.DebugFlags.InDebugMode&&(pe=A.performanceNow());const ue=be.findNextMatchSync(oe,me,Se);if(y.DebugFlags.InDebugMode){const Ie=A.performanceNow()-pe;Ie>5&&console.warn(`Rule ${ye.debugName} (${ye.id}) matching took ${Ie} against '${oe}'`),console.log(`  scanning for (linePos: ${me}, anchorPosition: ${_e})`),console.log(be.toString()),ue&&console.log(`matched rule id: ${ue.ruleId} from ${ue.captureIndices[0].start} to ${ue.captureIndices[0].end}`)}return ue?{captureIndices:ue.captureIndices,matchedRuleId:ue.ruleId}:null}(j,V,ie,H,$,X),ce=j.getInjections();if(ce.length===0)return Y;const R=function(he,oe,we,me,fe,_e,ye){let be,Se=Number.MAX_VALUE,pe=null,ue=0;const Ie=_e.contentNameScopesList.getScopeNames();for(let Ce=0,Ne=he.length;Ce<Ne;Ce++){const Ae=he[Ce];if(!Ae.matcher(Ie))continue;const Le=oe.getRule(Ae.ruleId),{ruleScanner:Re,findOptions:Me}=w(Le,oe,null,me,fe===ye),ve=Re.findNextMatchSync(we,fe,Me);if(!ve)continue;y.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${Ae.debugSelector}`),console.log(Re.toString()));const Oe=ve.captureIndices[0].start;if(!(Oe>=Se)&&(Se=Oe,pe=ve.captureIndices,be=ve.ruleId,ue=Ae.priority,Se===fe))break}return pe?{priorityMatch:ue===-1,captureIndices:pe,matchedRuleId:be}:null}(ce,j,V,ie,H,$,X);if(!R)return Y;if(!Y)return R;const ne=Y.captureIndices[0].start,U=R.captureIndices[0].start;return U<ne||R.priorityMatch&&U===ne?R:Y}(I,h,l,r,e,_);if(!T)return y.DebugFlags.InDebugMode&&console.log("  no more matches."),n.produce(e,s),void(a=!0);const F=T.captureIndices,z=T.matchedRuleId,J=!!(F&&F.length>0)&&F[0].end>r;if(z===C.endRuleId){const j=e.getRule(I);y.DebugFlags.InDebugMode&&console.log("  popping "+j.debugName+" - "+j.debugEndRegExp),n.produce(e,F[0].start),e=e.withContentNameScopesList(e.nameScopesList),d(I,h,l,e,n,j.endCaptures,F),n.produce(e,F[0].end);const V=e;if(e=e.parent,_=V.getAnchorPos(),!J&&V.getEnterPos()===r)return y.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),e=V,n.produce(e,s),void(a=!0)}else{const j=I.getRule(z);n.produce(e,F[0].start);const V=e,ie=j.getName(h.content,F),H=e.contentNameScopesList.pushAttributed(ie,I);if(e=e.push(z,r,_,F[0].end===s,null,H,H),j instanceof C.BeginEndRule){const $=j;y.DebugFlags.InDebugMode&&console.log("  pushing "+$.debugName+" - "+$.debugBeginRegExp),d(I,h,l,e,n,$.beginCaptures,F),n.produce(e,F[0].end),_=F[0].end;const X=$.getContentName(h.content,F),Y=H.pushAttributed(X,I);if(e=e.withContentNameScopesList(Y),$.endHasBackReferences&&(e=e.withEndRule($.getEndWithResolvedBackReferences(h.content,F))),!J&&V.hasSameRuleAs(e))return y.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),e=e.pop(),n.produce(e,s),void(a=!0)}else if(j instanceof C.BeginWhileRule){const $=j;y.DebugFlags.InDebugMode&&console.log("  pushing "+$.debugName),d(I,h,l,e,n,$.beginCaptures,F),n.produce(e,F[0].end),_=F[0].end;const X=$.getContentName(h.content,F),Y=H.pushAttributed(X,I);if(e=e.withContentNameScopesList(Y),$.whileHasBackReferences&&(e=e.withEndRule($.getWhileWithResolvedBackReferences(h.content,F))),!J&&V.hasSameRuleAs(e))return y.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),e=e.pop(),n.produce(e,s),void(a=!0)}else{const $=j;if(y.DebugFlags.InDebugMode&&console.log("  matched "+$.debugName+" - "+$.debugMatchRegExp),d(I,h,l,e,n,$.captures,F),n.produce(e,F[0].end),e=e.pop(),!J)return y.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),e=e.safePop(),n.produce(e,s),void(a=!0)}}F[0].end>r&&(r=F[0].end,l=!1)}}function w(I,h,l,r,e){return y.UseOnigurumaFindOptions?{ruleScanner:I.compile(h,l),findOptions:S(r,e)}:{ruleScanner:I.compileAG(h,l,r,e),findOptions:0}}function g(I,h,l,r,e){return y.UseOnigurumaFindOptions?{ruleScanner:I.compileWhile(h,l),findOptions:S(r,e)}:{ruleScanner:I.compileWhileAG(h,l,r,e),findOptions:0}}function S(I,h){let l=0;return I||(l|=1),h||(l|=4),l}function d(I,h,l,r,e,n,i){if(n.length===0)return;const t=h.content,s=Math.min(n.length,i.length),a=[],_=i[0].end;for(let v=0;v<s;v++){const x=n[v];if(x===null)continue;const T=i[v];if(T.length===0)continue;if(T.start>_)break;for(;a.length>0&&a[a.length-1].endPos<=T.start;)e.produceFromScopes(a[a.length-1].scopes,a[a.length-1].endPos),a.pop();if(a.length>0?e.produceFromScopes(a[a.length-1].scopes,T.start):e.produce(r,T.start),x.retokenizeCapturedWithRuleId){const z=x.getName(t,i),J=r.contentNameScopesList.pushAttributed(z,I),j=x.getContentName(t,i),V=J.pushAttributed(j,I),ie=r.push(x.retokenizeCapturedWithRuleId,T.start,-1,!1,null,J,V),H=I.createOnigString(t.substring(0,T.end));p(I,H,l&&T.start===0,T.start,ie,e,!1,0),u.disposeOnigString(H);continue}const F=x.getName(t,i);if(F!==null){const z=(a.length>0?a[a.length-1].scopes:r.contentNameScopesList).pushAttributed(F,I);a.push(new m(z,T.end))}}for(;a.length>0;)e.produceFromScopes(a[a.length-1].scopes,a[a.length-1].endPos),a.pop()}o._tokenizeString=p;class m{constructor(h,l){this.scopes=h,this.endPos=l}}o.LocalStackElement=m},974:(M,o)=>{function k(A,c){throw new Error("Near offset "+A.pos+": "+c+" ~~~"+A.source.substr(A.pos,50)+"~~~")}Object.defineProperty(o,"__esModule",{value:!0}),o.parseJSON=void 0,o.parseJSON=function(A,c,p){let w=new y(A),g=new u,S=0,d=null,m=[],I=[];function h(){m.push(S),I.push(d)}function l(){S=m.pop(),d=I.pop()}function r(e){k(w,e)}for(;C(w,g);){if(S===0){if(d!==null&&r("too many constructs in root"),g.type===3){d={},p&&(d.$vscodeTextmateLocation=g.toLocation(c)),h(),S=1;continue}if(g.type===2){d=[],h(),S=4;continue}r("unexpected token in root")}if(S===2){if(g.type===5){l();continue}if(g.type===7){S=3;continue}r("expected , or }")}if(S===1||S===3){if(S===1&&g.type===5){l();continue}if(g.type===1){let e=g.value;if(C(w,g)&&g.type===6||r("expected colon"),C(w,g)||r("expected value"),S=2,g.type===1){d[e]=g.value;continue}if(g.type===8){d[e]=null;continue}if(g.type===9){d[e]=!0;continue}if(g.type===10){d[e]=!1;continue}if(g.type===11){d[e]=parseFloat(g.value);continue}if(g.type===2){let n=[];d[e]=n,h(),S=4,d=n;continue}if(g.type===3){let n={};p&&(n.$vscodeTextmateLocation=g.toLocation(c)),d[e]=n,h(),S=1,d=n;continue}}r("unexpected token in dict")}if(S===5){if(g.type===4){l();continue}if(g.type===7){S=6;continue}r("expected , or ]")}if(S===4||S===6){if(S===4&&g.type===4){l();continue}if(S=5,g.type===1){d.push(g.value);continue}if(g.type===8){d.push(null);continue}if(g.type===9){d.push(!0);continue}if(g.type===10){d.push(!1);continue}if(g.type===11){d.push(parseFloat(g.value));continue}if(g.type===2){let e=[];d.push(e),h(),S=4,d=e;continue}if(g.type===3){let e={};p&&(e.$vscodeTextmateLocation=g.toLocation(c)),d.push(e),h(),S=1,d=e;continue}r("unexpected token in array")}r("unknown state")}return I.length!==0&&r("unclosed constructs"),d};class y{constructor(c){this.source=c,this.pos=0,this.len=c.length,this.line=1,this.char=0}}class u{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(c){return{filename:c,line:this.line,char:this.char}}}function C(A,c){c.value=null,c.type=0,c.offset=-1,c.len=-1,c.line=-1,c.char=-1;let p,w=A.source,g=A.pos,S=A.len,d=A.line,m=A.char;for(;;){if(g>=S)return!1;if(p=w.charCodeAt(g),p!==32&&p!==9&&p!==13){if(p!==10)break;g++,d++,m=0}else g++,m++}if(c.offset=g,c.line=d,c.char=m,p===34){for(c.type=1,g++,m++;;){if(g>=S)return!1;if(p=w.charCodeAt(g),g++,m++,p!==92){if(p===34)break}else g++,m++}c.value=w.substring(c.offset+1,g-1).replace(/\\u([0-9A-Fa-f]{4})/g,(I,h)=>String.fromCodePoint(parseInt(h,16))).replace(/\\(.)/g,(I,h)=>{switch(h){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:k(A,"invalid escape sequence")}throw new Error("unreachable")})}else if(p===91)c.type=2,g++,m++;else if(p===123)c.type=3,g++,m++;else if(p===93)c.type=4,g++,m++;else if(p===125)c.type=5,g++,m++;else if(p===58)c.type=6,g++,m++;else if(p===44)c.type=7,g++,m++;else if(p===110){if(c.type=8,g++,m++,p=w.charCodeAt(g),p!==117||(g++,m++,p=w.charCodeAt(g),p!==108)||(g++,m++,p=w.charCodeAt(g),p!==108))return!1;g++,m++}else if(p===116){if(c.type=9,g++,m++,p=w.charCodeAt(g),p!==114||(g++,m++,p=w.charCodeAt(g),p!==117)||(g++,m++,p=w.charCodeAt(g),p!==101))return!1;g++,m++}else if(p===102){if(c.type=10,g++,m++,p=w.charCodeAt(g),p!==97||(g++,m++,p=w.charCodeAt(g),p!==108)||(g++,m++,p=w.charCodeAt(g),p!==115)||(g++,m++,p=w.charCodeAt(g),p!==101))return!1;g++,m++}else for(c.type=11;;){if(g>=S)return!1;if(p=w.charCodeAt(g),!(p===46||p>=48&&p<=57||p===101||p===69||p===45||p===43))break;g++,m++}return c.len=g-c.offset,c.value===null&&(c.value=w.substr(c.offset,c.len)),A.pos=g,A.line=d,A.char=m,!0}},787:function(M,o,k){var y=this&&this.__createBinding||(Object.create?function(S,d,m,I){I===void 0&&(I=m),Object.defineProperty(S,I,{enumerable:!0,get:function(){return d[m]}})}:function(S,d,m,I){I===void 0&&(I=m),S[I]=d[m]}),u=this&&this.__exportStar||function(S,d){for(var m in S)m==="default"||Object.prototype.hasOwnProperty.call(d,m)||y(d,S,m)};Object.defineProperty(o,"__esModule",{value:!0}),o.applyStateStackDiff=o.diffStateStacksRefEq=o.parseRawGrammar=o.INITIAL=o.Registry=void 0;const C=k(391),A=k(50),c=k(652),p=k(583),w=k(965),g=k(442);Object.defineProperty(o,"applyStateStackDiff",{enumerable:!0,get:function(){return g.applyStateStackDiff}}),Object.defineProperty(o,"diffStateStacksRefEq",{enumerable:!0,get:function(){return g.diffStateStacksRefEq}}),u(k(44),o),o.Registry=class{constructor(S){this._options=S,this._syncRegistry=new c.SyncRegistry(p.Theme.createFromRawTheme(S.theme,S.colorMap),S.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(S,d){this._syncRegistry.setTheme(p.Theme.createFromRawTheme(S,d))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(S,d,m){return this.loadGrammarWithConfiguration(S,d,{embeddedLanguages:m})}loadGrammarWithConfiguration(S,d,m){return this._loadGrammar(S,d,m.embeddedLanguages,m.tokenTypes,new C.BalancedBracketSelectors(m.balancedBracketSelectors||[],m.unbalancedBracketSelectors||[]))}loadGrammar(S){return this._loadGrammar(S,0,null,null,null)}async _loadGrammar(S,d,m,I,h){const l=new w.ScopeDependencyProcessor(this._syncRegistry,S);for(;l.Q.length>0;)await Promise.all(l.Q.map(r=>this._loadSingleGrammar(r.scopeName))),l.processQueue();return this._grammarForScopeName(S,d,m,I,h)}async _loadSingleGrammar(S){return this._ensureGrammarCache.has(S)||this._ensureGrammarCache.set(S,this._doLoadSingleGrammar(S)),this._ensureGrammarCache.get(S)}async _doLoadSingleGrammar(S){const d=await this._options.loadGrammar(S);if(d){const m=typeof this._options.getInjections=="function"?this._options.getInjections(S):void 0;this._syncRegistry.addGrammar(d,m)}}async addGrammar(S,d=[],m=0,I=null){return this._syncRegistry.addGrammar(S,d),await this._grammarForScopeName(S.scopeName,m,I)}_grammarForScopeName(S,d=0,m=null,I=null,h=null){return this._syncRegistry.grammarForScopeName(S,d,m,I,h)}},o.INITIAL=C.StateStackImpl.NULL,o.parseRawGrammar=A.parseRawGrammar},736:(M,o)=>{function k(y){return!!y&&!!y.match(/[\w\.:]+/)}Object.defineProperty(o,"__esModule",{value:!0}),o.createMatchers=void 0,o.createMatchers=function(y,u){const C=[],A=function(g){let S=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,d=S.exec(g);return{next:()=>{if(!d)return null;const m=d[0];return d=S.exec(g),m}}}(y);let c=A.next();for(;c!==null;){let g=0;if(c.length===2&&c.charAt(1)===":"){switch(c.charAt(0)){case"R":g=1;break;case"L":g=-1;break;default:console.log(`Unknown priority ${c} in scope selector`)}c=A.next()}let S=w();if(C.push({matcher:S,priority:g}),c!==",")break;c=A.next()}return C;function p(){if(c==="-"){c=A.next();const g=p();return S=>!!g&&!g(S)}if(c==="("){c=A.next();const g=function(){const S=[];let d=w();for(;d&&(S.push(d),c==="|"||c===",");){do c=A.next();while(c==="|"||c===",");d=w()}return m=>S.some(I=>I(m))}();return c===")"&&(c=A.next()),g}if(k(c)){const g=[];do g.push(c),c=A.next();while(k(c));return S=>u(g,S)}return null}function w(){const g=[];let S=p();for(;S;)g.push(S),S=p();return d=>g.every(m=>m(d))}}},44:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.disposeOnigString=void 0,o.disposeOnigString=function(k){typeof k.dispose=="function"&&k.dispose()}},50:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.parseRawGrammar=void 0;const y=k(69),u=k(350),C=k(974);o.parseRawGrammar=function(A,c=null){return c!==null&&/\.json$/.test(c)?(p=A,w=c,u.DebugFlags.InDebugMode?C.parseJSON(p,w,!0):JSON.parse(p)):function(g,S){return u.DebugFlags.InDebugMode?y.parseWithLocation(g,S,"$vscodeTextmateLocation"):y.parsePLIST(g)}(A,c);var p,w}},69:(M,o)=>{function k(y,u,C){const A=y.length;let c=0,p=1,w=0;function g(R){if(C===null)c+=R;else for(;R>0;)y.charCodeAt(c)===10?(c++,p++,w=0):(c++,w++),R--}function S(R){C===null?c=R:g(R-c)}function d(){for(;c<A;){let R=y.charCodeAt(c);if(R!==32&&R!==9&&R!==13&&R!==10)break;g(1)}}function m(R){return y.substr(c,R.length)===R&&(g(R.length),!0)}function I(R){let ne=y.indexOf(R,c);S(ne!==-1?ne+R.length:A)}function h(R){let ne=y.indexOf(R,c);if(ne!==-1){let U=y.substring(c,ne);return S(ne+R.length),U}{let U=y.substr(c);return S(A),U}}A>0&&y.charCodeAt(0)===65279&&(c=1);let l=0,r=null,e=[],n=[],i=null;function t(R,ne){e.push(l),n.push(r),l=R,r=ne}function s(){if(e.length===0)return a("illegal state stack");l=e.pop(),r=n.pop()}function a(R){throw new Error("Near offset "+c+": "+R+" ~~~"+y.substr(c,50)+"~~~")}const _=function(){if(i===null)return a("missing <key>");let R={};C!==null&&(R[C]={filename:u,line:p,char:w}),r[i]=R,i=null,t(1,R)},v=function(){if(i===null)return a("missing <key>");let R=[];r[i]=R,i=null,t(2,R)},x=function(){let R={};C!==null&&(R[C]={filename:u,line:p,char:w}),r.push(R),t(1,R)},T=function(){let R=[];r.push(R),t(2,R)};function F(){if(l!==1)return a("unexpected </dict>");s()}function z(){return l===1||l!==2?a("unexpected </array>"):void s()}function J(R){if(l===1){if(i===null)return a("missing <key>");r[i]=R,i=null}else l===2?r.push(R):r=R}function j(R){if(isNaN(R))return a("cannot parse float");if(l===1){if(i===null)return a("missing <key>");r[i]=R,i=null}else l===2?r.push(R):r=R}function V(R){if(isNaN(R))return a("cannot parse integer");if(l===1){if(i===null)return a("missing <key>");r[i]=R,i=null}else l===2?r.push(R):r=R}function ie(R){if(l===1){if(i===null)return a("missing <key>");r[i]=R,i=null}else l===2?r.push(R):r=R}function H(R){if(l===1){if(i===null)return a("missing <key>");r[i]=R,i=null}else l===2?r.push(R):r=R}function $(R){if(l===1){if(i===null)return a("missing <key>");r[i]=R,i=null}else l===2?r.push(R):r=R}function X(){let R=h(">"),ne=!1;return R.charCodeAt(R.length-1)===47&&(ne=!0,R=R.substring(0,R.length-1)),{name:R.trim(),isClosed:ne}}function Y(R){if(R.isClosed)return"";let ne=h("</");return I(">"),ne.replace(/&#([0-9]+);/g,function(U,he){return String.fromCodePoint(parseInt(he,10))}).replace(/&#x([0-9a-f]+);/g,function(U,he){return String.fromCodePoint(parseInt(he,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(U){switch(U){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return U})}for(;c<A&&(d(),!(c>=A));){const R=y.charCodeAt(c);if(g(1),R!==60)return a("expected <");if(c>=A)return a("unexpected end of input");const ne=y.charCodeAt(c);if(ne===63){g(1),I("?>");continue}if(ne===33){if(g(1),m("--")){I("-->");continue}I(">");continue}if(ne===47){if(g(1),d(),m("plist")){I(">");continue}if(m("dict")){I(">"),F();continue}if(m("array")){I(">"),z();continue}return a("unexpected closed tag")}let U=X();switch(U.name){case"dict":l===1?_():l===2?x():(r={},C!==null&&(r[C]={filename:u,line:p,char:w}),t(1,r)),U.isClosed&&F();continue;case"array":l===1?v():l===2?T():(r=[],t(2,r)),U.isClosed&&z();continue;case"key":ce=Y(U),l!==1?a("unexpected <key>"):i!==null?a("too many <key>"):i=ce;continue;case"string":J(Y(U));continue;case"real":j(parseFloat(Y(U)));continue;case"integer":V(parseInt(Y(U),10));continue;case"date":ie(new Date(Y(U)));continue;case"data":H(Y(U));continue;case"true":Y(U),$(!0);continue;case"false":Y(U),$(!1);continue}if(!/^plist/.test(U.name))return a("unexpected opened tag "+U.name)}var ce;return r}Object.defineProperty(o,"__esModule",{value:!0}),o.parsePLIST=o.parseWithLocation=void 0,o.parseWithLocation=function(y,u,C){return k(y,u,C)},o.parsePLIST=function(y){return k(y,null,null)}},652:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SyncRegistry=void 0;const y=k(391);o.SyncRegistry=class{constructor(u,C){this._onigLibPromise=C,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=u}dispose(){for(const u of this._grammars.values())u.dispose()}setTheme(u){this._theme=u}getColorMap(){return this._theme.getColorMap()}addGrammar(u,C){this._rawGrammars.set(u.scopeName,u),C&&this._injectionGrammars.set(u.scopeName,C)}lookup(u){return this._rawGrammars.get(u)}injections(u){return this._injectionGrammars.get(u)}getDefaults(){return this._theme.getDefaults()}themeMatch(u){return this._theme.match(u)}async grammarForScopeName(u,C,A,c,p){if(!this._grammars.has(u)){let w=this._rawGrammars.get(u);if(!w)return null;this._grammars.set(u,y.createGrammar(u,w,C,A,c,p,this,await this._onigLibPromise))}return this._grammars.get(u)}}},792:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CompiledRule=o.RegExpSourceList=o.RegExpSource=o.RuleFactory=o.BeginWhileRule=o.BeginEndRule=o.IncludeOnlyRule=o.MatchRule=o.CaptureRule=o.Rule=o.ruleIdToNumber=o.ruleIdFromNumber=o.whileRuleId=o.endRuleId=void 0;const y=k(878),u=k(965),C=/\\(\d+)/,A=/\\(\d+)/g;o.endRuleId=-1,o.whileRuleId=-2,o.ruleIdFromNumber=function(r){return r},o.ruleIdToNumber=function(r){return r};class c{constructor(e,n,i,t){this.$location=e,this.id=n,this._name=i||null,this._nameIsCapturing=y.RegexSource.hasCaptures(this._name),this._contentName=t||null,this._contentNameIsCapturing=y.RegexSource.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${y.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return this._nameIsCapturing&&this._name!==null&&e!==null&&n!==null?y.RegexSource.replaceCaptures(this._name,e,n):this._name}getContentName(e,n){return this._contentNameIsCapturing&&this._contentName!==null?y.RegexSource.replaceCaptures(this._contentName,e,n):this._contentName}}o.Rule=c;class p extends c{constructor(e,n,i,t,s){super(e,n,i,t),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,n){throw new Error("Not supported!")}compile(e,n){throw new Error("Not supported!")}compileAG(e,n,i,t){throw new Error("Not supported!")}}o.CaptureRule=p;class w extends c{constructor(e,n,i,t,s){super(e,n,i,null),this._match=new I(t,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,n){n.push(this._match)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,i,t){return this._getCachedCompiledPatterns(e).compileAG(e,i,t)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new h,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}o.MatchRule=w;class g extends c{constructor(e,n,i,t,s){super(e,n,i,t),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,n){for(const i of this.patterns)e.getRule(i).collectPatterns(e,n)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,i,t){return this._getCachedCompiledPatterns(e).compileAG(e,i,t)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new h,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}o.IncludeOnlyRule=g;class S extends c{constructor(e,n,i,t,s,a,_,v,x,T){super(e,n,i,t),this._begin=new I(s,this.id),this.beginCaptures=a,this._end=new I(_||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=v,this.applyEndPatternLast=x||!1,this.patterns=T.patterns,this.hasMissingPatterns=T.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,n){return this._end.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e,n).compile(e)}compileAG(e,n,i,t){return this._getCachedCompiledPatterns(e,n).compileAG(e,i,t)}_getCachedCompiledPatterns(e,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new h;for(const i of this.patterns)e.getRule(i).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}}o.BeginEndRule=S;class d extends c{constructor(e,n,i,t,s,a,_,v,x){super(e,n,i,t),this._begin=new I(s,this.id),this.beginCaptures=a,this.whileCaptures=v,this._while=new I(_,o.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=x.patterns,this.hasMissingPatterns=x.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,n){return this._while.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,i,t){return this._getCachedCompiledPatterns(e).compileAG(e,i,t)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new h;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,n){return this._getCachedCompiledWhilePatterns(e,n).compile(e)}compileWhileAG(e,n,i,t){return this._getCachedCompiledWhilePatterns(e,n).compileAG(e,i,t)}_getCachedCompiledWhilePatterns(e,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new h,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||""),this._cachedCompiledWhilePatterns}}o.BeginWhileRule=d;class m{static createCaptureRule(e,n,i,t,s){return e.registerRule(a=>new p(n,a,i,t,s))}static getCompiledRuleId(e,n,i){return e.id||n.registerRule(t=>{if(e.id=t,e.match)return new w(e.$vscodeTextmateLocation,e.id,e.name,e.match,m._compileCaptures(e.captures,n,i));if(e.begin===void 0){e.repository&&(i=y.mergeObjects({},i,e.repository));let s=e.patterns;return s===void 0&&e.include&&(s=[{include:e.include}]),new g(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,m._compilePatterns(s,n,i))}return e.while?new d(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,m._compileCaptures(e.beginCaptures||e.captures,n,i),e.while,m._compileCaptures(e.whileCaptures||e.captures,n,i),m._compilePatterns(e.patterns,n,i)):new S(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,m._compileCaptures(e.beginCaptures||e.captures,n,i),e.end,m._compileCaptures(e.endCaptures||e.captures,n,i),e.applyEndPatternLast,m._compilePatterns(e.patterns,n,i))}),e.id}static _compileCaptures(e,n,i){let t=[];if(e){let s=0;for(const a in e){if(a==="$vscodeTextmateLocation")continue;const _=parseInt(a,10);_>s&&(s=_)}for(let a=0;a<=s;a++)t[a]=null;for(const a in e){if(a==="$vscodeTextmateLocation")continue;const _=parseInt(a,10);let v=0;e[a].patterns&&(v=m.getCompiledRuleId(e[a],n,i)),t[_]=m.createCaptureRule(n,e[a].$vscodeTextmateLocation,e[a].name,e[a].contentName,v)}}return t}static _compilePatterns(e,n,i){let t=[];if(e)for(let s=0,a=e.length;s<a;s++){const _=e[s];let v=-1;if(_.include){const x=u.parseInclude(_.include);switch(x.kind){case 0:case 1:v=m.getCompiledRuleId(i[_.include],n,i);break;case 2:let T=i[x.ruleName];T&&(v=m.getCompiledRuleId(T,n,i));break;case 3:case 4:const F=x.scopeName,z=x.kind===4?x.ruleName:null,J=n.getExternalGrammar(F,i);if(J)if(z){let j=J.repository[z];j&&(v=m.getCompiledRuleId(j,n,J.repository))}else v=m.getCompiledRuleId(J.repository.$self,n,J.repository)}}else v=m.getCompiledRuleId(_,n,i);if(v!==-1){const x=n.getRule(v);let T=!1;if((x instanceof g||x instanceof S||x instanceof d)&&x.hasMissingPatterns&&x.patterns.length===0&&(T=!0),T)continue;t.push(v)}}return{patterns:t,hasMissingPatterns:(e?e.length:0)!==t.length}}}o.RuleFactory=m;class I{constructor(e,n){if(e){const i=e.length;let t=0,s=[],a=!1;for(let _=0;_<i;_++)if(e.charAt(_)==="\\"&&_+1<i){const v=e.charAt(_+1);v==="z"?(s.push(e.substring(t,_)),s.push("$(?!\\n)(?<!\\n)"),t=_+2):v!=="A"&&v!=="G"||(a=!0),_++}this.hasAnchor=a,t===0?this.source=e:(s.push(e.substring(t,i)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,this.hasBackReferences=C.test(this.source)}clone(){return new I(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){let i=n.map(t=>e.substring(t.start,t.end));return A.lastIndex=0,this.source.replace(A,(t,s)=>y.escapeRegExpCharacters(i[parseInt(s,10)]||""))}_buildAnchorCache(){let e,n,i,t,s=[],a=[],_=[],v=[];for(e=0,n=this.source.length;e<n;e++)i=this.source.charAt(e),s[e]=i,a[e]=i,_[e]=i,v[e]=i,i==="\\"&&e+1<n&&(t=this.source.charAt(e+1),t==="A"?(s[e+1]="",a[e+1]="",_[e+1]="A",v[e+1]="A"):t==="G"?(s[e+1]="",a[e+1]="G",_[e+1]="",v[e+1]="G"):(s[e+1]=t,a[e+1]=t,_[e+1]=t,v[e+1]=t),e++);return{A0_G0:s.join(""),A0_G1:a.join(""),A1_G0:_.join(""),A1_G1:v.join("")}}resolveAnchors(e,n){return this.hasAnchor&&this._anchorCache?e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}o.RegExpSource=I;class h{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,n){this._items[e].source!==n&&(this._disposeCaches(),this._items[e].setSource(n))}compile(e){if(!this._cached){let n=this._items.map(i=>i.source);this._cached=new l(e,n,this._items.map(i=>i.ruleId))}return this._cached}compileAG(e,n,i){return this._hasAnchors?n?i?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,n,i)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,n,i)),this._anchorCache.A1_G0):i?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,n,i)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,n,i)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,n,i){let t=this._items.map(s=>s.resolveAnchors(n,i));return new l(e,t,this._items.map(s=>s.ruleId))}}o.RegExpSourceList=h;class l{constructor(e,n,i){this.regExps=n,this.rules=i,this.scanner=e.createOnigScanner(n)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let n=0,i=this.rules.length;n<i;n++)e.push("   - "+this.rules[n]+": "+this.regExps[n]);return e.join(`
`)}findNextMatchSync(e,n,i){const t=this.scanner.findNextMatchSync(e,n,i);return t?{ruleId:this.rules[t.index],captureIndices:t.captureIndices}:null}}o.CompiledRule=l},583:(M,o,k)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeTrieElement=o.ThemeTrieElementRule=o.ColorMap=o.fontStyleToString=o.ParsedThemeRule=o.parseTheme=o.StyleAttributes=o.ScopeStack=o.Theme=void 0;const y=k(878);class u{constructor(h,l,r){this._colorMap=h,this._defaults=l,this._root=r,this._cachedMatchRoot=new y.CachedFn(e=>this._root.match(e))}static createFromRawTheme(h,l){return this.createFromParsedTheme(p(h),l)}static createFromParsedTheme(h,l){return function(r,e){r.sort((v,x)=>{let T=y.strcmp(v.scope,x.scope);return T!==0?T:(T=y.strArrCmp(v.parentScopes,x.parentScopes),T!==0?T:v.index-x.index)});let n=0,i="#000000",t="#ffffff";for(;r.length>=1&&r[0].scope==="";){let v=r.shift();v.fontStyle!==-1&&(n=v.fontStyle),v.foreground!==null&&(i=v.foreground),v.background!==null&&(t=v.background)}let s=new g(e),a=new c(n,s.getId(i),s.getId(t)),_=new m(new d(0,null,-1,0,0),[]);for(let v=0,x=r.length;v<x;v++){let T=r[v];_.insert(0,T.scope,T.parentScopes,T.fontStyle,s.getId(T.foreground),s.getId(T.background))}return new u(s,a,_)}(h,l)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(h){if(h===null)return this._defaults;const l=h.scopeName,r=this._cachedMatchRoot.get(l).find(e=>function(n,i){if(i.length===0)return!0;for(let t=0;t<i.length;t++){let s=i[t],a=!1;if(s===">"){if(t===i.length-1)return!1;s=i[++t],a=!0}for(;n&&!A(n.scopeName,s);){if(a)return!1;n=n.parent}if(!n)return!1;n=n.parent}return!0}(h.parent,e.parentScopes));return r?new c(r.fontStyle,r.foreground,r.background):null}}o.Theme=u;class C{constructor(h,l){this.parent=h,this.scopeName=l}static push(h,l){for(const r of l)h=new C(h,r);return h}static from(...h){let l=null;for(let r=0;r<h.length;r++)l=new C(l,h[r]);return l}push(h){return new C(this,h)}getSegments(){let h=this;const l=[];for(;h;)l.push(h.scopeName),h=h.parent;return l.reverse(),l}toString(){return this.getSegments().join(" ")}extends(h){return this===h||this.parent!==null&&this.parent.extends(h)}getExtensionIfDefined(h){const l=[];let r=this;for(;r&&r!==h;)l.push(r.scopeName),r=r.parent;return r===h?l.reverse():void 0}}function A(I,h){return h===I||I.startsWith(h)&&I[h.length]==="."}o.ScopeStack=C;class c{constructor(h,l,r){this.fontStyle=h,this.foregroundId=l,this.backgroundId=r}}function p(I){if(!I)return[];if(!I.settings||!Array.isArray(I.settings))return[];let h=I.settings,l=[],r=0;for(let e=0,n=h.length;e<n;e++){let i,t=h[e];if(!t.settings)continue;if(typeof t.scope=="string"){let v=t.scope;v=v.replace(/^[,]+/,""),v=v.replace(/[,]+$/,""),i=v.split(",")}else i=Array.isArray(t.scope)?t.scope:[""];let s=-1;if(typeof t.settings.fontStyle=="string"){s=0;let v=t.settings.fontStyle.split(" ");for(let x=0,T=v.length;x<T;x++)switch(v[x]){case"italic":s|=1;break;case"bold":s|=2;break;case"underline":s|=4;break;case"strikethrough":s|=8}}let a=null;typeof t.settings.foreground=="string"&&y.isValidHexColor(t.settings.foreground)&&(a=t.settings.foreground);let _=null;typeof t.settings.background=="string"&&y.isValidHexColor(t.settings.background)&&(_=t.settings.background);for(let v=0,x=i.length;v<x;v++){let T=i[v].trim().split(" "),F=T[T.length-1],z=null;T.length>1&&(z=T.slice(0,T.length-1),z.reverse()),l[r++]=new w(F,z,e,s,a,_)}}return l}o.StyleAttributes=c,o.parseTheme=p;class w{constructor(h,l,r,e,n,i){this.scope=h,this.parentScopes=l,this.index=r,this.fontStyle=e,this.foreground=n,this.background=i}}o.ParsedThemeRule=w,o.fontStyleToString=function(I){if(I===-1)return"not set";let h="";return 1&I&&(h+="italic "),2&I&&(h+="bold "),4&I&&(h+="underline "),8&I&&(h+="strikethrough "),h===""&&(h="none"),h.trim()};class g{constructor(h){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(h)){this._isFrozen=!0;for(let l=0,r=h.length;l<r;l++)this._color2id[h[l]]=l,this._id2color[l]=h[l]}else this._isFrozen=!1}getId(h){if(h===null)return 0;h=h.toUpperCase();let l=this._color2id[h];if(l)return l;if(this._isFrozen)throw new Error(`Missing color in color map - ${h}`);return l=++this._lastColorId,this._color2id[h]=l,this._id2color[l]=h,l}getColorMap(){return this._id2color.slice(0)}}o.ColorMap=g;const S=Object.freeze([]);class d{constructor(h,l,r,e,n){this.scopeDepth=h,this.parentScopes=l||S,this.fontStyle=r,this.foreground=e,this.background=n}clone(){return new d(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(h){let l=[];for(let r=0,e=h.length;r<e;r++)l[r]=h[r].clone();return l}acceptOverwrite(h,l,r,e){this.scopeDepth>h?console.log("how did this happen?"):this.scopeDepth=h,l!==-1&&(this.fontStyle=l),r!==0&&(this.foreground=r),e!==0&&(this.background=e)}}o.ThemeTrieElementRule=d;class m{constructor(h,l=[],r={}){this._mainRule=h,this._children=r,this._rulesWithParentScopes=l}static _cmpBySpecificity(h,l){if(h.scopeDepth!==l.scopeDepth)return l.scopeDepth-h.scopeDepth;let r=0,e=0;for(;h.parentScopes[r]===">"&&r++,l.parentScopes[e]===">"&&e++,!(r>=h.parentScopes.length||e>=l.parentScopes.length);){const n=l.parentScopes[e].length-h.parentScopes[r].length;if(n!==0)return n;r++,e++}return l.parentScopes.length-h.parentScopes.length}match(h){if(h!==""){let r,e,n=h.indexOf(".");if(n===-1?(r=h,e=""):(r=h.substring(0,n),e=h.substring(n+1)),this._children.hasOwnProperty(r))return this._children[r].match(e)}const l=this._rulesWithParentScopes.concat(this._mainRule);return l.sort(m._cmpBySpecificity),l}insert(h,l,r,e,n,i){if(l==="")return void this._doInsertHere(h,r,e,n,i);let t,s,a,_=l.indexOf(".");_===-1?(t=l,s=""):(t=l.substring(0,_),s=l.substring(_+1)),this._children.hasOwnProperty(t)?a=this._children[t]:(a=new m(this._mainRule.clone(),d.cloneArr(this._rulesWithParentScopes)),this._children[t]=a),a.insert(h+1,s,r,e,n,i)}_doInsertHere(h,l,r,e,n){if(l!==null){for(let i=0,t=this._rulesWithParentScopes.length;i<t;i++){let s=this._rulesWithParentScopes[i];if(y.strArrCmp(s.parentScopes,l)===0)return void s.acceptOverwrite(h,r,e,n)}r===-1&&(r=this._mainRule.fontStyle),e===0&&(e=this._mainRule.foreground),n===0&&(n=this._mainRule.background),this._rulesWithParentScopes.push(new d(h,l,r,e,n))}else this._mainRule.acceptOverwrite(h,r,e,n)}}o.ThemeTrieElement=m},878:(M,o)=>{function k(C){return Array.isArray(C)?function(A){let c=[];for(let p=0,w=A.length;p<w;p++)c[p]=k(A[p]);return c}(C):typeof C=="object"?function(A){let c={};for(let p in A)c[p]=k(A[p]);return c}(C):C}Object.defineProperty(o,"__esModule",{value:!0}),o.performanceNow=o.CachedFn=o.escapeRegExpCharacters=o.isValidHexColor=o.strArrCmp=o.strcmp=o.RegexSource=o.basename=o.mergeObjects=o.clone=void 0,o.clone=function(C){return k(C)},o.mergeObjects=function(C,...A){return A.forEach(c=>{for(let p in c)C[p]=c[p]}),C},o.basename=function C(A){const c=~A.lastIndexOf("/")||~A.lastIndexOf("\\");return c===0?A:~c==A.length-1?C(A.substring(0,A.length-1)):A.substr(1+~c)};let y=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function u(C,A){return C<A?-1:C>A?1:0}o.RegexSource=class{static hasCaptures(C){return C!==null&&(y.lastIndex=0,y.test(C))}static replaceCaptures(C,A,c){return C.replace(y,(p,w,g,S)=>{let d=c[parseInt(w||g,10)];if(!d)return p;{let m=A.substring(d.start,d.end);for(;m[0]===".";)m=m.substring(1);switch(S){case"downcase":return m.toLowerCase();case"upcase":return m.toUpperCase();default:return m}}})}},o.strcmp=u,o.strArrCmp=function(C,A){if(C===null&&A===null)return 0;if(!C)return-1;if(!A)return 1;let c=C.length,p=A.length;if(c===p){for(let w=0;w<c;w++){let g=u(C[w],A[w]);if(g!==0)return g}return 0}return c-p},o.isValidHexColor=function(C){return!!(/^#[0-9a-f]{6}$/i.test(C)||/^#[0-9a-f]{8}$/i.test(C)||/^#[0-9a-f]{3}$/i.test(C)||/^#[0-9a-f]{4}$/i.test(C))},o.escapeRegExpCharacters=function(C){return C.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},o.CachedFn=class{constructor(C){this.fn=C,this.cache=new Map}get(C){if(this.cache.has(C))return this.cache.get(C);const A=this.fn(C);return this.cache.set(C,A),A}},o.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},te={};return function M(o){var k=te[o];if(k!==void 0)return k.exports;var y=te[o]={exports:{}};return Q[o].call(y.exports,y,y.exports,M),y.exports}(787)})())})(Ze);var Ue=Ze.exports;class et{_locked=!1;_waiting=[];get locked(){return this._locked}async lock(){if(!this._locked)this._locked=!0;else return new Promise(L=>{this._waiting.push(L)})}unlock(){if(this._waiting.length>0){const L=this._waiting.shift();L&&L()}else this._locked=!1}}const tt=""+new URL("onig-sIwl6pz-.wasm",import.meta.url).href,nt=""+new URL("javascript.tmLanguage-HDSMuL7K.json",import.meta.url).href,rt=""+new URL("svelte.tmLanguage-56cyxSas.json",import.meta.url).href,st=""+new URL("typescript.tmLanguage-zyHvLQfi.json",import.meta.url).href,it=""+new URL("vue.tmLanguage-GZHfp8fS.json",import.meta.url).href,ot="data:application/json;base64,ewogICJzY29wZU5hbWUiOiAic291cmNlLmNvbnNvbGUiLAogICJuYW1lIjogImNvbnNvbGUiLAogICJwYXR0ZXJucyI6IFsKICAgIHsKICAgICAgImNvbW1lbnQiOiAiRXJyb3IgTWVzc2FnZSIsCiAgICAgICJiZWdpbiI6ICJeKFxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9KSAoXFxbRVJST1JcXF0pICIsCiAgICAgICJlbmQiOiAiKD89XlxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9IFxcWyhJTkZPfEVSUk9SfFdBUk4pXFxdIHxcXFopIiwKICAgICAgImJlZ2luQ2FwdHVyZXMiOiB7CiAgICAgICAgIjEiOiB7ICJuYW1lIjogImNvbW1lbnQud2FsbGFieS1jb25zb2xlIiB9LAogICAgICAgICIyIjogeyAibmFtZSI6ICJ0b2tlbi5lcnJvci10b2tlbi53YWxsYWJ5LWNvbnNvbGUgaW52YWxpZC53YWxsYWJ5LWNvbnNvbGUiIH0KICAgICAgfQogICAgfSwKICAgIHsKICAgICAgImNvbW1lbnQiOiAiSW5mbyBNZXNzYWdlIiwKICAgICAgImJlZ2luIjogIl4oXFxkezJ9OlxcZHsyfTpcXGR7Mn1cXC5cXGR7M30pIChcXFtJTkZPXFxdKSAiLAogICAgICAiZW5kIjogIig/PV5cXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfSBcXFsoSU5GT3xFUlJPUnxXQVJOKVxcXSB8XFxaKSIsCiAgICAgICJiZWdpbkNhcHR1cmVzIjogewogICAgICAgICIxIjogeyAibmFtZSI6ICJjb21tZW50LndhbGxhYnktY29uc29sZSIgfSwKICAgICAgICAiMiI6IHsgIm5hbWUiOiAidG9rZW4uaW5mby10b2tlbi53YWxsYWJ5LWNvbnNvbGUgY29uc3RhbnQubnVtZXJpYy53YWxsYWJ5LWNvbnNvbGUiIH0KICAgICAgfQogICAgfSwKICAgIHsKICAgICAgImNvbW1lbnQiOiAiV2FybmluZyBNZXNzYWdlIiwKICAgICAgImJlZ2luIjogIl4oXFxkezJ9OlxcZHsyfTpcXGR7Mn1cXC5cXGR7M30pIChcXFtXQVJOXFxdKSAiLAogICAgICAiZW5kIjogIig/PV5cXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfSBcXFsoSU5GT3xFUlJPUnxXQVJOKVxcXSB8XFxaKSIsCiAgICAgICJiZWdpbkNhcHR1cmVzIjogewogICAgICAgICIxIjogeyAibmFtZSI6ICJjb21tZW50LndhbGxhYnktY29uc29sZSIgfSwKICAgICAgICAiMiI6IHsgIm5hbWUiOiAidG9rZW4ud2Fybi10b2tlbi53YWxsYWJ5LWNvbnNvbGUgc3RyaW5nLnZhbHVlLndhbGxhYnktY29uc29sZSIgfQogICAgICB9CiAgICB9CiAgXQp9Cg==",Ee=new et,Ve=new Set(["typescript","javascript","vue","svelte","console"]),at=new Map([["typescript","source.ts"],["javascript","source.js"],["vue","source.vue"],["svelte","source.svelte"],["console","source.console"]]),ct=new Map([["source.ts","typescript"],["source.js","javascript"],["source.vue","vue"],["source.svelte","svelte"],["source.console","console"]]);let $e={},ke,De,je,Ge;class lt{static getFontStyle(L){return(L&30720)>>>11}static getForeground(L){return(L&16744448)>>>15}static getInlineStyleFromMetadata(L,ee){const Q=this.getForeground(L),te=this.getFontStyle(L);let M=ee[Q];(Q===0||Q===1)&&M==="#000000"&&(M="var(--editor-foreground)");let o=`color: ${M};`;te&1&&(o+="font-style: italic;"),te&2&&(o+="font-weight: bold;");let k="";return te&4&&(k+=" underline"),te&8&&(k+=" line-through"),k&&(o+=`text-decoration:${k};`),o}}class ze{_tokens;_tokensCount;constructor(L){this._tokens=L,this._tokensCount=this._tokens.length>>>1}getCount(){return this._tokensCount}getEndOffset(L){return this._tokens[L<<1]}getInlineStyle(L,ee){const Q=this._tokens[(L<<1)+1];return lt.getInlineStyleFromMetadata(Q,ee)}static convertToEndOffset(L,ee){const te=(L.length>>>1)-1;for(let M=0;M<te;M++)L[M<<1]=L[M+1<<1];L[te<<1]=ee}}async function Ke(){try{if(await Ee.lock(),!je){const K=await fetch(tt);await We.loadWASM(K);const L=new Map;L.set("javascript",await(await fetch(nt)).text()),L.set("typescript",await(await fetch(st)).text()),L.set("vue",await(await fetch(it)).text()),L.set("svelte",await(await fetch(rt)).text()),L.set("console",await(await fetch(ot)).text()),je=L}if(!ke){ke={settings:[]};for(const K in $e){const L=$e[K];L!==void 0&&ke.settings.push({scope:K,settings:{foreground:L.foreground,background:L.background,fontStyle:L.style}})}De=new Ue.Registry({onigLib:Promise.resolve({createOnigScanner:We.createOnigScanner,createOnigString:We.createOnigString}),theme:ke,loadGrammar:async K=>{let L=ct.get(K);return Ue.parseRawGrammar(L&&je?.get(L)||"{}","example.json")}}),Ge||(Ge=new Map);for(const K of Ve){const L=at.get(K),ee=await De.loadGrammar(L||"source.ts");ee&&Ge.set(K,ee)}}return{grammars:Ge,registry:De}}finally{Ee.unlock()}}async function ut(K){try{await Ee.lock(),ke=void 0,$e=K}finally{Ee.unlock()}}async function ht(K,L,ee){try{const{grammars:Q,registry:te}=await Ke();if(Q.has(K)){const M=Q.get(K);if(!M||L.lines.length===0)return;const o=te.getColorMap();let k=[],y=Ue.INITIAL;for(let p=0;p<L.lines.length;p++){const w=L.lines[p],g=M.tokenizeLine2(w,y);ze.convertToEndOffset(g.tokens,w.length);const S=new ze(g.tokens);k.push(w===""?void 0:dt(w,S,o,2,!1)),y=g.ruleStack}let u=L.current,C=L.frame;if(ee&&k.length>=ee*2+1){const p=k.slice(L.current-ee,L.current+ee+1),w=k.length-p.length;k=p,u=ee,C={start:L.frame.start+w,end:L.frame.end-w}}const A=/^\s+/u,c=k.filter(p=>p).map(p=>p[0]);if(!c.some(p=>!A.test(p.content||""))){const p=Math.min(...c.map(w=>{if(!w.content)return 0;const g=w.content.match(A);return g?g[0].length:0}));c.forEach(w=>w.content=(w.content||"").slice(p))}return{lines:k.map(p=>p?p.map(w=>`<span style="${w.style};white-space:pre">${w.content}</span>`).join(""):"<br>"),current:u,frame:C}}}catch(Q){console.error(Q)}}function dt(K,L,ee,Q,te){const M=[];let o=0,k=0,y=!0;for(let u=0,C=L.getCount();u<C;u++){const A=L.getEndOffset(u);let c="";for(;o<A;o++){const p=K.charCodeAt(o);switch(p){case 9:{let w=Q-(o+k)%Q;for(k+=w-1;w>0;)te&&y?(c+="&#160;",y=!1):(c+=" ",y=!0),w--;break}case 60:c+="&lt;",y=!1;break;case 62:c+="&gt;",y=!1;break;case 38:c+="&amp;",y=!1;break;case 0:c+="&#00;",y=!1;break;case 65279:case 8232:case 8233:case 133:c+="",y=!1;break;case 13:c+="&#8203",y=!1;break;case 32:te&&y?(c+="&#160;",y=!1):(c+=" ",y=!0);break;default:c+=String.fromCharCode(p),y=!1}}if(M.push({style:L.getInlineStyle(u,ee),content:c}),A>K.length||o>=K.length)break}return M}const pt=Object.freeze(Object.defineProperty({__proto__:null,customize:ut,highlight:ht,languages:Ve,load:Ke},Symbol.toStringTag,{value:"Module"}));export{Ve as a,pt as i,Ke as l,Ue as m};
